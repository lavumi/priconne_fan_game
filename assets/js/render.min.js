let FontSystem=function(){let T={HP:{text:"This is SampleText",location:[-440,-384],renderData:{buffer:{position:null,uv:null,indices:null},vertexCount:0,dirty:!0,visible:!0}},Signature:{text:"Lavumi ZYANG ~@",location:[400,-470],renderData:{buffer:{position:null,uv:null,indices:null},vertexCount:0,dirty:!0,visible:!0}}},E={program:null,attribLocations:{},uniformLocations:{}},b={},s=null;let l=!1;return{loadFont:function(){var t;(t=new XMLHttpRequest).onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=this.responseXML.getElementsByTagName("Char");for(let t=0;t<e.length;t++){var n=e[t].getAttribute("code"),r=e[t].getAttribute("width"),i=e[t].getAttribute("offset").split(" "),a=e[t].getAttribute("rect").split(" ");b[n]={width:r,offset:i,rect:a}}{var o="myFont";let t=gl.createTexture(),e=new Image;e.onload=function(){gl.bindTexture(gl.TEXTURE_2D,t),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,e),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR_MIPMAP_NEAREST),gl.generateMipmap(gl.TEXTURE_2D),gl.bindTexture(gl.TEXTURE_2D,null),s=t,E=ShaderUtil.initShaders("fontShader").fontShader,l=!0},e.onerror=function(t){console.error("image load fail :"+o+" error : "+t)},e.src="assets/font/"+o+".png"}}},t.open("GET","assets/font/myFont.xml",!0),t.send()},setVisible:function(t,e){!0==!!T[t]&&(T[t].renderData.visible=e)},setString:function(t,e){!0==!!T[t]?T[t].text!==e&&(T[t].text=e,T[t].renderData.dirty=!0):T[t]={text:e,location:[0,0],renderData:{buffer:{position:null,uv:null,indices:null},vertexCount:0,dirty:!0,visible:!0}}},setPosition:function(t,e){!0==!!T[t]?T[t].location=e:console.log("No Label : "+t)},draw:function(){gl.useProgram(E.program),gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,s),gl.uniform1i(E.uniformLocations.texture,0),Object.keys(T).map(function(t){if(!0===T[t].renderData.visible){var r=t,i=T[r].renderData.dirty;if(!1!==i){var a,o,s,l,h,u,d,c,p,f,i=T[r].renderData.buffer,g=[],M=[],m=[],v=T[r].text,x=[0,0];let e=T[r].renderData.vertexCount=0,n=0;for(let t=0;t<v.length;t++)" "===v[t]?n+=30/512:(a=b[v[t]],n+=parseInt(a.width)/512);for(let t=0;t<v.length;t++)" "===v[t]?x[0]+=30/512:(s=(o=b[v[t]]).rect[0]/512,l=o.rect[1]/512,p=o.offset[0]/512,f=o.offset[1]/512,h=o.rect[2]/512,u=o.rect[3]/512,d=p+x[0]-n/2,c=f+x[1],p=p+x[0]+h-n/2,f=f+x[1]+u,x[0]+=o.width/512,g.push(d),g.push(c),g.push(0),g.push(d),g.push(f),g.push(0),g.push(p),g.push(f),g.push(0),g.push(p),g.push(c),g.push(0),M.push(s),M.push(l+u),M.push(s),M.push(l),M.push(s+h),M.push(l),M.push(s+h),M.push(l+u),m.push(0+4*e/6),m.push(1+4*e/6),m.push(2+4*e/6),m.push(0+4*e/6),m.push(2+4*e/6),m.push(3+4*e/6),e+=6);T[r].renderData.vertexCount=e,gl.deleteBuffer(i.position),gl.deleteBuffer(i.uv),gl.deleteBuffer(i.indices);var A=gl.createBuffer(),y=(gl.bindBuffer(gl.ARRAY_BUFFER,A),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(g),gl.STATIC_DRAW),gl.createBuffer()),w=(gl.bindBuffer(gl.ARRAY_BUFFER,y),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(M),gl.STATIC_DRAW),gl.createBuffer());gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,w),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(m),gl.STATIC_DRAW),i.position=A,i.uv=y,i.indices=w,T[r].renderData.dirty=!1}A=t,A=T[A].renderData.buffer,gl.bindBuffer(gl.ARRAY_BUFFER,A.position),gl.vertexAttribPointer(E.attribLocations.aVertexPosition,3,gl.FLOAT,!1,0,0),gl.enableVertexAttribArray(E.attribLocations.aVertexPosition),E.attribLocations.hasOwnProperty("uv")&&(gl.bindBuffer(gl.ARRAY_BUFFER,A.uv),gl.vertexAttribPointer(E.attribLocations.uv,2,gl.FLOAT,!0,0,0),gl.enableVertexAttribArray(E.attribLocations.uv)),gl.uniformMatrix4fv(E.uniformLocations.uVPMatrix,!1,[2,0,0,0,0,2,0,0,0,0,1,0,0,0,0,1]),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,A.indices),gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA),y=t,i=T[y].location[0],y=T[y].location[1],w=512/ScreenSize[0],r=512/ScreenSize[1],i={x:i/ScreenSize[0],y:y/ScreenSize[1]},gl.uniformMatrix4fv(E.uniformLocations.uWorldMatrix,!1,[w,0,0,0,0,r,0,0,0,0,1,0,i.x,i.y,0,1]),gl.drawElements(gl.TRIANGLES,T[t].renderData.vertexCount,gl.UNSIGNED_SHORT,0)}})}}}(),canvas=document.getElementById("canvas"),gl=canvas.getContext("webgl",{alpha:!1})||canvas.getContext("experimental-webgl",{alpha:!1}),shaders={simpleShader:{vertexShader:"shader/simple.vert",fragmentShader:"shader/simple.frag",attrInfo:["aVertexPosition"],uniInfo:["uWorldMatrix","uViewMatrix","uProjectionMatrix"]},colorShader:{vertexShader:"shader/color.vert",fragmentShader:"shader/color.frag",attrInfo:["aVertexPosition","aVertexColor"],uniInfo:["uWorldMatrix","uViewMatrix","uProjectionMatrix"]},textureShader:{vtxShaderSrc:"attribute vec4 aVertexPosition;attribute vec2 uv;uniform mat4 uVPMatrix;uniform mat4 uWorldMatrix;varying mediump vec2 TexCoords;void main() {   gl_Position = uVPMatrix * uWorldMatrix *  aVertexPosition;   TexCoords = uv;}",fragShaderSrc:"uniform sampler2D texture;varying mediump vec2 TexCoords;void main(){   mediump vec4 sampled = texture2D(texture, TexCoords);   gl_FragColor = sampled;}",attrInfo:["aVertexPosition","uv"],uniInfo:["uVPMatrix","uWorldMatrix","texture"]},fontShader:{vtxShaderSrc:"attribute vec4 aVertexPosition;attribute vec2 uv;uniform mat4 uVPMatrix;uniform mat4 uWorldMatrix;varying mediump vec2 TexCoords;void main(){   gl_Position = uVPMatrix * uWorldMatrix *  aVertexPosition;   TexCoords = uv;} ",fragShaderSrc:"precision mediump float;uniform vec4 color;uniform sampler2D texture;varying mediump vec2 TexCoords;void main() {    mediump vec4 sampled = texture2D(texture, TexCoords);    gl_FragColor = vec4(1, 1, 1, sampled.a);}",attrInfo:["aVertexPosition","uv"],uniInfo:["uVPMatrix","uWorldMatrix","texture","color"]}},ShaderUtil={shaderInfo:{},initShaders:function(e){function s(t,e,n){return e=t.createShader(e),t.shaderSource(e,n),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)||console.log(t.getShaderInfoLog(e)),e}let n=this;return function(t,e){var n=gl.createProgram(),r=s(gl,gl.VERTEX_SHADER,t.vtxShaderSrc);if(gl.attachShader(n,r),r=s(gl,gl.FRAGMENT_SHADER,t.fragShaderSrc),gl.attachShader(n,r),gl.linkProgram(n),!gl.getProgramParameter(n,gl.LINK_STATUS))return console.log("Unable to initialize the shader program: "+gl.getProgramInfoLog(n)),e(null);var i={program:n,attribLocations:{},uniformLocations:{}};let a,o;for(a=0;a<t.attrInfo.length;a++)o=t.attrInfo[a],i.attribLocations[o]=gl.getAttribLocation(n,o),-1===i.attribLocations[o]&&console.warn(o," is not used in shader ");for(a=0;a<t.uniInfo.length;a++)o=t.uniInfo[a],i.uniformLocations[o]=gl.getUniformLocation(n,o),-1===i.uniformLocations[o]&&console.warn(o," is not used in shader ");e(i)}(shaders[e],function(t){n.shaderInfo[e]=t}),n.shaderInfo}};var spine,__extends=this&&this.__extends||function(){var r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])});return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(L){e.prototype.apply=function(t,e,n,r,i,a,o,s){if(null==t)throw new Error("skeleton cannot be null.");r&&0!=this.duration&&(n%=this.duration,0<e)&&(e%=this.duration);for(var l=this.timelines,h=0,u=l.length;h<u;h++)l[h].apply(t,e,n,i,a,o,s)},e.binarySearch=function(t,e,n){var r=0,i=t.length/(n=void 0===n?1:n)-2;if(0==i)return n;for(var a=i>>>1;;){if(t[(a+1)*n]<=e?r=a+1:i=a,r==i)return(r+1)*n;a=r+i>>>1}},e.linearSearch=function(t,e,n){for(var r=0,i=t.length-n;r<=i;r+=n)if(t[r]>e)return r;return-1};var _,c,t,F=e;function e(t,e,n){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=n}L.Animation=F,(n=_=L.MixPose||(L.MixPose={}))[n.setup=0]="setup",n[n.current=1]="current",n[n.currentLayered=2]="currentLayered",(n=c=L.MixDirection||(L.MixDirection={}))[n.in=0]="in",n[n.out=1]="out",(n=t=L.TimelineType||(L.TimelineType={}))[n.rotate=0]="rotate",n[n.translate=1]="translate",n[n.scale=2]="scale",n[n.shear=3]="shear",n[n.attachment=4]="attachment",n[n.color=5]="color",n[n.deform=6]="deform",n[n.event=7]="event",n[n.drawOrder=8]="drawOrder",n[n.ikConstraint=9]="ikConstraint",n[n.transformConstraint=10]="transformConstraint",n[n.pathConstraintPosition=11]="pathConstraintPosition",n[n.pathConstraintSpacing=12]="pathConstraintSpacing",n[n.pathConstraintMix=13]="pathConstraintMix",n[n.twoColor=14]="twoColor";v.prototype.getFrameCount=function(){return this.curves.length/v.BEZIER_SIZE+1},v.prototype.setLinear=function(t){this.curves[t*v.BEZIER_SIZE]=v.LINEAR},v.prototype.setStepped=function(t){this.curves[t*v.BEZIER_SIZE]=v.STEPPED},v.prototype.getCurveType=function(t){var t=t*v.BEZIER_SIZE;return t==this.curves.length||(t=this.curves[t])==v.LINEAR?v.LINEAR:t==v.STEPPED?v.STEPPED:v.BEZIER},v.prototype.setCurve=function(t,e,n,r,i){var a=.03*(2*-e+r),o=.03*(2*-n+i),s=.006*(3*(e-r)+1),l=.006*(3*(n-i)+1),h=2*a+s,u=2*o+l,d=.3*e+a+.16666667*s,c=.3*n+o+.16666667*l,p=t*v.BEZIER_SIZE,f=this.curves;f[p++]=v.BEZIER;for(var g=d,M=c,m=p+v.BEZIER_SIZE-1;p<m;p+=2)f[p]=g,f[p+1]=M,d+=h,c+=u,h+=s,u+=l,g+=d,M+=c},v.prototype.getCurvePercent=function(t,e){e=L.MathUtils.clamp(e,0,1);var n=this.curves,r=t*v.BEZIER_SIZE,t=n[r];if(t==v.LINEAR)return e;if(t==v.STEPPED)return 0;for(var i,a,o=0,s=++r,l=r+v.BEZIER_SIZE-1;r<l;r+=2)if(e<=(o=n[r]))return a=i=void 0,(a=r==s?i=0:(i=n[r-2],n[r-1]))+(n[r+1]-a)*(e-i)/(o-i);t=n[r-1];return t+(1-t)*(e-o)/(1-o)},v.LINEAR=0,v.STEPPED=1,v.BEZIER=2,v.BEZIER_SIZE=19;var n=v;function v(t){if(t<=0)throw new Error("frameCount must be > 0: "+t);this.curves=L.Utils.newFloatArray((t-1)*v.BEZIER_SIZE)}L.CurveTimeline=n;__extends(p,r=n),p.prototype.getPropertyId=function(){return(t.rotate<<24)+this.boneIndex},p.prototype.setFrame=function(t,e,n){this.frames[t<<=1]=e,this.frames[t+p.ROTATION]=n},p.prototype.apply=function(t,e,n,r,i,a,o){var s,l,h=this.frames,u=t.bones[this.boneIndex];if(n<h[0])switch(a){case _.setup:return void(u.rotation=u.data.rotation);case _.current:var d=u.data.rotation-u.rotation;u.rotation+=(d-=360*(16384-(16384.499999999996-d/360|0)))*i}else n>=h[h.length-p.ENTRIES]?a==_.setup?u.rotation=u.data.rotation+h[h.length+p.PREV_ROTATION]*i:(t=u.data.rotation+h[h.length+p.PREV_ROTATION]-u.rotation,u.rotation+=(t-=360*(16384-(16384.499999999996-t/360|0)))*i):(s=h[(t=F.binarySearch(h,n,p.ENTRIES))+p.PREV_ROTATION],l=h[t],n=this.getCurvePercent((t>>1)-1,1-(n-l)/(h[t+p.PREV_TIME]-l)),l=h[t+p.ROTATION]-s,l=s+(l-=360*(16384-(16384.499999999996-l/360|0)))*n,a==_.setup?u.rotation=u.data.rotation+(l-=360*(16384-(16384.499999999996-l/360|0)))*i:(l=u.data.rotation+l-u.rotation,u.rotation+=(l-=360*(16384-(16384.499999999996-l/360|0)))*i))},p.ENTRIES=2,p.PREV_TIME=-2,p.PREV_ROTATION=-1,p.ROTATION=1;var r,i=p;function p(t){var e=r.call(this,t)||this;return e.frames=L.Utils.newFloatArray(t<<1),e}L.RotateTimeline=i;__extends(f,a=n),f.prototype.getPropertyId=function(){return(t.translate<<24)+this.boneIndex},f.prototype.setFrame=function(t,e,n,r){this.frames[t*=f.ENTRIES]=e,this.frames[t+f.X]=n,this.frames[t+f.Y]=r},f.prototype.apply=function(t,e,n,r,i,a,o){var s=this.frames,l=t.bones[this.boneIndex];if(n<s[0])switch(a){case _.setup:return l.x=l.data.x,void(l.y=l.data.y);case _.current:l.x+=(l.data.x-l.x)*i,l.y+=(l.data.y-l.y)*i}else{var h,u,t=0,d=0;n>=s[s.length-f.ENTRIES]?(t=s[s.length+f.PREV_X],d=s[s.length+f.PREV_Y]):(t=s[(h=F.binarySearch(s,n,f.ENTRIES))+f.PREV_X],d=s[h+f.PREV_Y],u=s[h],n=this.getCurvePercent(h/f.ENTRIES-1,1-(n-u)/(s[h+f.PREV_TIME]-u)),t+=(s[h+f.X]-t)*n,d+=(s[h+f.Y]-d)*n),a==_.setup?(l.x=l.data.x+t*i,l.y=l.data.y+d*i):(l.x+=(l.data.x+t-l.x)*i,l.y+=(l.data.y+d-l.y)*i)}},f.ENTRIES=3,f.PREV_TIME=-3,f.PREV_X=-2,f.PREV_Y=-1,f.X=1,f.Y=2;var a,i=f;function f(t){var e=a.call(this,t)||this;return e.frames=L.Utils.newFloatArray(t*f.ENTRIES),e}L.TranslateTimeline=i;__extends(g,o=i),g.prototype.getPropertyId=function(){return(t.scale<<24)+this.boneIndex},g.prototype.apply=function(t,e,n,r,i,a,o){var s=this.frames,l=t.bones[this.boneIndex];if(n<s[0])switch(a){case _.setup:return l.scaleX=l.data.scaleX,void(l.scaleY=l.data.scaleY);case _.current:l.scaleX+=(l.data.scaleX-l.scaleX)*i,l.scaleY+=(l.data.scaleY-l.scaleY)*i}else{var h,u,t=0,d=0;d=n>=s[s.length-g.ENTRIES]?(t=s[s.length+g.PREV_X]*l.data.scaleX,s[s.length+g.PREV_Y]*l.data.scaleY):(t=s[(h=F.binarySearch(s,n,g.ENTRIES))+g.PREV_X],d=s[h+g.PREV_Y],u=s[h],n=this.getCurvePercent(h/g.ENTRIES-1,1-(n-u)/(s[h+g.PREV_TIME]-u)),t=(t+(s[h+g.X]-t)*n)*l.data.scaleX,(d+(s[h+g.Y]-d)*n)*l.data.scaleY),1==i?(l.scaleX=t,l.scaleY=d):(s=u=0,s=(a==_.setup?(u=l.data.scaleX,l.data):(u=l.scaleX,l)).scaleY,o==c.out?(t=Math.abs(t)*L.MathUtils.signum(u),d=Math.abs(d)*L.MathUtils.signum(s)):(u=Math.abs(u)*L.MathUtils.signum(t),s=Math.abs(s)*L.MathUtils.signum(d)),l.scaleX=u+(t-u)*i,l.scaleY=s+(d-s)*i)}};var o,s=g;function g(t){return o.call(this,t)||this}L.ScaleTimeline=s;__extends(M,l=i),M.prototype.getPropertyId=function(){return(t.shear<<24)+this.boneIndex},M.prototype.apply=function(t,e,n,r,i,a,o){var s=this.frames,l=t.bones[this.boneIndex];if(n<s[0])switch(a){case _.setup:return l.shearX=l.data.shearX,void(l.shearY=l.data.shearY);case _.current:l.shearX+=(l.data.shearX-l.shearX)*i,l.shearY+=(l.data.shearY-l.shearY)*i}else{var h,u,t=0,d=0;n>=s[s.length-M.ENTRIES]?(t=s[s.length+M.PREV_X],d=s[s.length+M.PREV_Y]):(t=s[(h=F.binarySearch(s,n,M.ENTRIES))+M.PREV_X],d=s[h+M.PREV_Y],u=s[h],n=this.getCurvePercent(h/M.ENTRIES-1,1-(n-u)/(s[h+M.PREV_TIME]-u)),t+=(s[h+M.X]-t)*n,d+=(s[h+M.Y]-d)*n),a==_.setup?(l.shearX=l.data.shearX+t*i,l.shearY=l.data.shearY+d*i):(l.shearX+=(l.data.shearX+t-l.shearX)*i,l.shearY+=(l.data.shearY+d-l.shearY)*i)}};var l,s=M;function M(t){return l.call(this,t)||this}L.ShearTimeline=s;__extends(m,h=n),m.prototype.getPropertyId=function(){return(t.color<<24)+this.slotIndex},m.prototype.setFrame=function(t,e,n,r,i,a){this.frames[t*=m.ENTRIES]=e,this.frames[t+m.R]=n,this.frames[t+m.G]=r,this.frames[t+m.B]=i,this.frames[t+m.A]=a},m.prototype.apply=function(t,e,n,r,i,a,o){var s=t.slots[this.slotIndex],t=this.frames;if(n<t[0])switch(a){case _.setup:return void s.color.setFromColor(s.data.color);case _.current:var l=s.color,h=s.data.color;l.add((h.r-l.r)*i,(h.g-l.g)*i,(h.b-l.b)*i,(h.a-l.a)*i)}else{var u,d,c=0,p=0,f=0,g=0;n>=t[t.length-m.ENTRIES]?(c=t[(u=t.length)+m.PREV_R],p=t[u+m.PREV_G],f=t[u+m.PREV_B],g=t[u+m.PREV_A]):(c=t[(u=F.binarySearch(t,n,m.ENTRIES))+m.PREV_R],p=t[u+m.PREV_G],f=t[u+m.PREV_B],g=t[u+m.PREV_A],d=t[u],n=this.getCurvePercent(u/m.ENTRIES-1,1-(n-d)/(t[u+m.PREV_TIME]-d)),c+=(t[u+m.R]-c)*n,p+=(t[u+m.G]-p)*n,f+=(t[u+m.B]-f)*n,g+=(t[u+m.A]-g)*n),1==i?s.color.set(c,p,f,g):(l=s.color,a==_.setup&&l.setFromColor(s.data.color),l.add((c-l.r)*i,(p-l.g)*i,(f-l.b)*i,(g-l.a)*i))}},m.ENTRIES=5,m.PREV_TIME=-5,m.PREV_R=-4,m.PREV_G=-3,m.PREV_B=-2,m.PREV_A=-1,m.R=1,m.G=2,m.B=3,m.A=4;var h,i=m;function m(t){var e=h.call(this,t)||this;return e.frames=L.Utils.newFloatArray(t*m.ENTRIES),e}L.ColorTimeline=i;__extends(y,u=n),y.prototype.getPropertyId=function(){return(t.twoColor<<24)+this.slotIndex},y.prototype.setFrame=function(t,e,n,r,i,a,o,s,l){this.frames[t*=y.ENTRIES]=e,this.frames[t+y.R]=n,this.frames[t+y.G]=r,this.frames[t+y.B]=i,this.frames[t+y.A]=a,this.frames[t+y.R2]=o,this.frames[t+y.G2]=s,this.frames[t+y.B2]=l},y.prototype.apply=function(t,e,n,r,i,a,o){var s=t.slots[this.slotIndex],t=this.frames;if(n<t[0])switch(a){case _.setup:return s.color.setFromColor(s.data.color),void s.darkColor.setFromColor(s.data.darkColor);case _.current:var l=s.color,h=s.darkColor,u=s.data.color,d=s.data.darkColor;l.add((u.r-l.r)*i,(u.g-l.g)*i,(u.b-l.b)*i,(u.a-l.a)*i),h.add((d.r-h.r)*i,(d.g-h.g)*i,(d.b-h.b)*i,0)}else{var c,p,f=0,g=0,M=0,m=0,v=0,x=0,A=0;n>=t[t.length-y.ENTRIES]?(f=t[(c=t.length)+y.PREV_R],g=t[c+y.PREV_G],M=t[c+y.PREV_B],m=t[c+y.PREV_A],v=t[c+y.PREV_R2],x=t[c+y.PREV_G2],A=t[c+y.PREV_B2]):(f=t[(c=F.binarySearch(t,n,y.ENTRIES))+y.PREV_R],g=t[c+y.PREV_G],M=t[c+y.PREV_B],m=t[c+y.PREV_A],v=t[c+y.PREV_R2],x=t[c+y.PREV_G2],A=t[c+y.PREV_B2],p=t[c],n=this.getCurvePercent(c/y.ENTRIES-1,1-(n-p)/(t[c+y.PREV_TIME]-p)),f+=(t[c+y.R]-f)*n,g+=(t[c+y.G]-g)*n,M+=(t[c+y.B]-M)*n,m+=(t[c+y.A]-m)*n,v+=(t[c+y.R2]-v)*n,x+=(t[c+y.G2]-x)*n,A+=(t[c+y.B2]-A)*n),1==i?(s.color.set(f,g,M,m),s.darkColor.set(v,x,A,1)):(l=s.color,h=s.darkColor,a==_.setup&&(l.setFromColor(s.data.color),h.setFromColor(s.data.darkColor)),l.add((f-l.r)*i,(g-l.g)*i,(M-l.b)*i,(m-l.a)*i),h.add((v-h.r)*i,(x-h.g)*i,(A-h.b)*i,0))}},y.ENTRIES=8,y.PREV_TIME=-8,y.PREV_R=-7,y.PREV_G=-6,y.PREV_B=-5,y.PREV_A=-4,y.PREV_R2=-3,y.PREV_G2=-2,y.PREV_B2=-1,y.R=1,y.G=2,y.B=3,y.A=4,y.R2=5,y.G2=6,y.B2=7;var u,s=y;function y(t){var e=u.call(this,t)||this;return e.frames=L.Utils.newFloatArray(t*y.ENTRIES),e}function d(t){this.frames=L.Utils.newFloatArray(t),this.attachmentNames=new Array(t)}L.TwoColorTimeline=s,d.prototype.getPropertyId=function(){return(t.attachment<<24)+this.slotIndex},d.prototype.getFrameCount=function(){return this.frames.length},d.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},d.prototype.apply=function(t,e,n,r,i,a,o){var s=t.slots[this.slotIndex];o==c.out&&a==_.setup?(o=s.data.attachmentName,s.setAttachment(null==o?null:t.getAttachment(this.slotIndex,o))):n<(o=this.frames)[0]?a==_.setup&&(a=s.data.attachmentName,s.setAttachment(null==a?null:t.getAttachment(this.slotIndex,a))):(s=0,s=n>=o[o.length-1]?o.length-1:F.binarySearch(o,n,1)-1,a=this.attachmentNames[s],t.slots[this.slotIndex].setAttachment(null==a?null:t.getAttachment(this.slotIndex,a)))},L.AttachmentTimeline=d;var x,A=null,i=(__extends(w,x=n),w.prototype.getPropertyId=function(){return(t.deform<<27)+ +this.attachment.id+this.slotIndex},w.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},w.prototype.apply=function(t,e,n,r,i,a,o){var t=t.slots[this.slotIndex],s=t.getAttachment();if(s instanceof L.VertexAttachment&&s.applyDeform(this.attachment)){var l=t.attachmentVertices,t=(0==l.length&&(i=1),this.frameVertices),h=t[0].length,u=this.frames;if(n<u[0]){var d=s;switch(a){case _.setup:return void(l.length=0);case _.current:if(1==i)l.length=0;else{var c=L.Utils.setArraySize(l,h);if(null==d.bones)for(var p=d.vertices,f=0;f<h;f++)c[f]+=(p[f]-c[f])*i;else{i=1-i;for(f=0;f<h;f++)c[f]*=i}}}}else{var g=L.Utils.setArraySize(l,h);if(n>=u[u.length-1]){var M=t[u.length-1];if(1==i)L.Utils.arrayCopy(M,0,g,0,h);else if(a==_.setup)if(null==(d=s).bones)for(var m=d.vertices,v=0;v<h;v++){var x=m[v];g[v]=x+(M[v]-x)*i}else for(var A=0;A<h;A++)g[A]=M[A]*i;else for(var y=0;y<h;y++)g[y]+=(M[y]-g[y])*i}else{var w=F.binarySearch(u,n),T=t[w-1],E=t[w],t=u[w],b=this.getCurvePercent(w-1,1-(n-t)/(u[w-1]-t));if(1==i)for(var R=0;R<h;R++){var S=T[R];g[R]=S+(E[R]-S)*b}else if(a==_.setup)if(null==(d=s).bones)for(var C=d.vertices,I=0;I<h;I++){S=T[I],x=C[I];g[I]=x+(S+(E[I]-S)*b-x)*i}else for(var P=0;P<h;P++){S=T[P];g[P]=(S+(E[P]-S)*b)*i}else for(var V=0;V<h;V++){S=T[V];g[V]+=(S+(E[V]-S)*b-g[V])*i}}}}},w);function w(t){var e=x.call(this,t)||this;return e.frames=L.Utils.newFloatArray(t),e.frameVertices=new Array(t),null==A&&(A=L.Utils.newFloatArray(64)),e}function T(t){this.frames=L.Utils.newFloatArray(t),this.events=new Array(t)}function E(t){this.frames=L.Utils.newFloatArray(t),this.drawOrders=new Array(t)}L.DeformTimeline=i,T.prototype.getPropertyId=function(){return t.event<<24},T.prototype.getFrameCount=function(){return this.frames.length},T.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},T.prototype.apply=function(t,e,n,r,i,a,o){if(null!=r){var s=this.frames,l=this.frames.length;if(n<e)this.apply(t,e,Number.MAX_VALUE,r,i,a,o),e=-1;else if(e>=s[l-1])return;if(!(n<s[0])){var h=0;if(e<s[0])h=0;else for(var u=s[h=F.binarySearch(s,e)];0<h&&s[h-1]==u;)h--;for(;h<l&&n>=s[h];h++)r.push(this.events[h])}}},L.EventTimeline=T,E.prototype.getPropertyId=function(){return t.drawOrder<<24},E.prototype.getFrameCount=function(){return this.frames.length},E.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},E.prototype.apply=function(t,e,n,r,i,a,o){var s=t.drawOrder,l=t.slots;if(o==c.out&&a==_.setup)L.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{o=this.frames;if(n<o[0])a==_.setup&&L.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var a=n>=o[o.length-1]?o.length-1:F.binarySearch(o,n)-1,h=this.drawOrders[a];if(null==h)L.Utils.arrayCopy(l,0,s,0,l.length);else for(var u=0,d=h.length;u<d;u++)s[u]=l[h[u]]}}},L.DrawOrderTimeline=E;__extends(R,b=n),R.prototype.getPropertyId=function(){return(t.ikConstraint<<24)+this.ikConstraintIndex},R.prototype.setFrame=function(t,e,n,r){this.frames[t*=R.ENTRIES]=e,this.frames[t+R.MIX]=n,this.frames[t+R.BEND_DIRECTION]=r},R.prototype.apply=function(t,e,n,r,i,a,o){var s,l,h=this.frames,u=t.ikConstraints[this.ikConstraintIndex];if(n<h[0])switch(a){case _.setup:return u.mix=u.data.mix,void(u.bendDirection=u.data.bendDirection);case _.current:u.mix+=(u.data.mix-u.mix)*i,u.bendDirection=u.data.bendDirection}else n>=h[h.length-R.ENTRIES]?a==_.setup?(u.mix=u.data.mix+(h[h.length+R.PREV_MIX]-u.data.mix)*i,u.bendDirection=o==c.out?u.data.bendDirection:h[h.length+R.PREV_BEND_DIRECTION]):(u.mix+=(h[h.length+R.PREV_MIX]-u.mix)*i,o==c.in&&(u.bendDirection=h[h.length+R.PREV_BEND_DIRECTION])):(s=h[(t=F.binarySearch(h,n,R.ENTRIES))+R.PREV_MIX],l=h[t],n=this.getCurvePercent(t/R.ENTRIES-1,1-(n-l)/(h[t+R.PREV_TIME]-l)),a==_.setup?(u.mix=u.data.mix+(s+(h[t+R.MIX]-s)*n-u.data.mix)*i,u.bendDirection=o==c.out?u.data.bendDirection:h[t+R.PREV_BEND_DIRECTION]):(u.mix+=(s+(h[t+R.MIX]-s)*n-u.mix)*i,o==c.in&&(u.bendDirection=h[t+R.PREV_BEND_DIRECTION])))},R.ENTRIES=3,R.PREV_TIME=-3,R.PREV_MIX=-2,R.PREV_BEND_DIRECTION=-1,R.MIX=1,R.BEND_DIRECTION=2;var b,s=R;function R(t){var e=b.call(this,t)||this;return e.frames=L.Utils.newFloatArray(t*R.ENTRIES),e}L.IkConstraintTimeline=s;__extends(C,S=n),C.prototype.getPropertyId=function(){return(t.transformConstraint<<24)+this.transformConstraintIndex},C.prototype.setFrame=function(t,e,n,r,i,a){this.frames[t*=C.ENTRIES]=e,this.frames[t+C.ROTATE]=n,this.frames[t+C.TRANSLATE]=r,this.frames[t+C.SCALE]=i,this.frames[t+C.SHEAR]=a},C.prototype.apply=function(t,e,n,r,i,a,o){var s=this.frames,l=t.transformConstraints[this.transformConstraintIndex];if(n<s[0]){var h=l.data;switch(a){case _.setup:return l.rotateMix=h.rotateMix,l.translateMix=h.translateMix,l.scaleMix=h.scaleMix,void(l.shearMix=h.shearMix);case _.current:l.rotateMix+=(h.rotateMix-l.rotateMix)*i,l.translateMix+=(h.translateMix-l.translateMix)*i,l.scaleMix+=(h.scaleMix-l.scaleMix)*i,l.shearMix+=(h.shearMix-l.shearMix)*i}}else{var u,d,t=0,c=0,p=0,f=0;n>=s[s.length-C.ENTRIES]?(t=s[(u=s.length)+C.PREV_ROTATE],c=s[u+C.PREV_TRANSLATE],p=s[u+C.PREV_SCALE],f=s[u+C.PREV_SHEAR]):(t=s[(u=F.binarySearch(s,n,C.ENTRIES))+C.PREV_ROTATE],c=s[u+C.PREV_TRANSLATE],p=s[u+C.PREV_SCALE],f=s[u+C.PREV_SHEAR],d=s[u],n=this.getCurvePercent(u/C.ENTRIES-1,1-(n-d)/(s[u+C.PREV_TIME]-d)),t+=(s[u+C.ROTATE]-t)*n,c+=(s[u+C.TRANSLATE]-c)*n,p+=(s[u+C.SCALE]-p)*n,f+=(s[u+C.SHEAR]-f)*n),a==_.setup?(h=l.data,l.rotateMix=h.rotateMix+(t-h.rotateMix)*i,l.translateMix=h.translateMix+(c-h.translateMix)*i,l.scaleMix=h.scaleMix+(p-h.scaleMix)*i,l.shearMix=h.shearMix+(f-h.shearMix)*i):(l.rotateMix+=(t-l.rotateMix)*i,l.translateMix+=(c-l.translateMix)*i,l.scaleMix+=(p-l.scaleMix)*i,l.shearMix+=(f-l.shearMix)*i)}},C.ENTRIES=5,C.PREV_TIME=-5,C.PREV_ROTATE=-4,C.PREV_TRANSLATE=-3,C.PREV_SCALE=-2,C.PREV_SHEAR=-1,C.ROTATE=1,C.TRANSLATE=2,C.SCALE=3,C.SHEAR=4;var S,i=C;function C(t){var e=S.call(this,t)||this;return e.frames=L.Utils.newFloatArray(t*C.ENTRIES),e}L.TransformConstraintTimeline=i;__extends(P,I=n),P.prototype.getPropertyId=function(){return(t.pathConstraintPosition<<24)+this.pathConstraintIndex},P.prototype.setFrame=function(t,e,n){this.frames[t*=P.ENTRIES]=e,this.frames[t+P.VALUE]=n},P.prototype.apply=function(t,e,n,r,i,a,o){var s=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(n<s[0])switch(a){case _.setup:return void(l.position=l.data.position);case _.current:l.position+=(l.data.position-l.position)*i}else{var h,u,t=0;n>=s[s.length-P.ENTRIES]?t=s[s.length+P.PREV_VALUE]:(t=s[(h=F.binarySearch(s,n,P.ENTRIES))+P.PREV_VALUE],u=s[h],n=this.getCurvePercent(h/P.ENTRIES-1,1-(n-u)/(s[h+P.PREV_TIME]-u)),t+=(s[h+P.VALUE]-t)*n),a==_.setup?l.position=l.data.position+(t-l.data.position)*i:l.position+=(t-l.position)*i}},P.ENTRIES=2,P.PREV_TIME=-2,P.PREV_VALUE=-1,P.VALUE=1;var I,s=P;function P(t){var e=I.call(this,t)||this;return e.frames=L.Utils.newFloatArray(t*P.ENTRIES),e}L.PathConstraintPositionTimeline=s;__extends(V,N=s),V.prototype.getPropertyId=function(){return(t.pathConstraintSpacing<<24)+this.pathConstraintIndex},V.prototype.apply=function(t,e,n,r,i,a,o){var s=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(n<s[0])switch(a){case _.setup:return void(l.spacing=l.data.spacing);case _.current:l.spacing+=(l.data.spacing-l.spacing)*i}else{var h,u,t=0;n>=s[s.length-V.ENTRIES]?t=s[s.length+V.PREV_VALUE]:(t=s[(h=F.binarySearch(s,n,V.ENTRIES))+V.PREV_VALUE],u=s[h],n=this.getCurvePercent(h/V.ENTRIES-1,1-(n-u)/(s[h+V.PREV_TIME]-u)),t+=(s[h+V.VALUE]-t)*n),a==_.setup?l.spacing=l.data.spacing+(t-l.data.spacing)*i:l.spacing+=(t-l.spacing)*i}};var N,i=V;function V(t){return N.call(this,t)||this}L.PathConstraintSpacingTimeline=i;__extends(D,U=n),D.prototype.getPropertyId=function(){return(t.pathConstraintMix<<24)+this.pathConstraintIndex},D.prototype.setFrame=function(t,e,n,r){this.frames[t*=D.ENTRIES]=e,this.frames[t+D.ROTATE]=n,this.frames[t+D.TRANSLATE]=r},D.prototype.apply=function(t,e,n,r,i,a,o){var s=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(n<s[0])switch(a){case _.setup:return l.rotateMix=l.data.rotateMix,void(l.translateMix=l.data.translateMix);case _.current:l.rotateMix+=(l.data.rotateMix-l.rotateMix)*i,l.translateMix+=(l.data.translateMix-l.translateMix)*i}else{var h,u,t=0,d=0;n>=s[s.length-D.ENTRIES]?(t=s[s.length+D.PREV_ROTATE],d=s[s.length+D.PREV_TRANSLATE]):(t=s[(h=F.binarySearch(s,n,D.ENTRIES))+D.PREV_ROTATE],d=s[h+D.PREV_TRANSLATE],u=s[h],n=this.getCurvePercent(h/D.ENTRIES-1,1-(n-u)/(s[h+D.PREV_TIME]-u)),t+=(s[h+D.ROTATE]-t)*n,d+=(s[h+D.TRANSLATE]-d)*n),a==_.setup?(l.rotateMix=l.data.rotateMix+(t-l.data.rotateMix)*i,l.translateMix=l.data.translateMix+(d-l.data.translateMix)*i):(l.rotateMix+=(t-l.rotateMix)*i,l.translateMix+=(d-l.translateMix)*i)}},D.ENTRIES=3,D.PREV_TIME=-3,D.PREV_ROTATE=-2,D.PREV_TRANSLATE=-1,D.ROTATE=1,D.TRANSLATE=2;var U,s=D;function D(t){var e=U.call(this,t)||this;return e.frames=L.Utils.newFloatArray(t*D.ENTRIES),e}L.PathConstraintMixTimeline=s}(spine=spine||{}),function(T){E.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,n=0,r=e.length;n<r;n++){var i=e[n];if(null!=i){i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;var a=t*i.timeScale;if(0<i.delay){if(i.delay-=a,0<i.delay)continue;a=-i.delay,i.delay=0}var o=i.next;if(null!=o){var s=i.trackLast-o.delay;if(0<=s){for(o.delay=0,o.trackTime=s+t*o.timeScale,i.trackTime+=a,this.setCurrent(n,o,!0);null!=o.mixingFrom;)o.mixTime+=a,o=o.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&null==i.mixingFrom){e[n]=null,this.queue.end(i),this.disposeNext(i);continue}if(null!=i.mixingFrom&&this.updateMixingFrom(i,t)){var l=i.mixingFrom;for(i.mixingFrom=null;null!=l;)this.queue.end(l),l=l.mixingFrom}i.trackTime+=a}}this.queue.drain()},E.prototype.updateMixingFrom=function(t,e){var n,r=t.mixingFrom;return null==r||(n=this.updateMixingFrom(r,e),r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast,0<t.mixTime&&(t.mixTime>=t.mixDuration||0==t.timeScale)?(0!=r.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=r.mixingFrom,t.interruptAlpha=r.interruptAlpha,this.queue.end(r)),n):(r.trackTime+=e*r.timeScale,t.mixTime+=e*t.timeScale,!1))},E.prototype.apply=function(t){if(null==t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,n=this.tracks,r=!1,i=0,a=n.length;i<a;i++){var o=n[i];if(!(null==o||0<o.delay)){var r=!0,s=0==i?T.MixPose.current:T.MixPose.currentLayered,l=o.alpha,h=(null!=o.mixingFrom?l*=this.applyMixingFrom(o,t,s):o.trackTime>=o.trackEnd&&null==o.next&&(l=0),o.animationLast),u=o.getAnimationTime(),d=o.animation.timelines.length,c=o.animation.timelines;if(1==l)for(var p=0;p<d;p++)c[p].apply(t,h,u,e,1,T.MixPose.setup,T.MixDirection.in);else{var f=o.timelineData,g=0==o.timelinesRotation.length;g&&T.Utils.setArraySize(o.timelinesRotation,d<<1,null);for(var M=o.timelinesRotation,p=0;p<d;p++){var m=c[p],v=f[p]>=E.FIRST?T.MixPose.setup:s;m instanceof T.RotateTimeline?this.applyRotateTimeline(m,t,u,l,v,M,p<<1,g):(T.Utils.webkit602BugfixHelper(l,v),m.apply(t,h,u,e,l,v,T.MixDirection.in))}}this.queueEvents(o,u),e.length=0,o.nextAnimationLast=u,o.nextTrackLast=o.trackTime}}return this.queue.drain(),r},E.prototype.applyMixingFrom=function(t,e,n){var r=t.mixingFrom,i=(null!=r.mixingFrom&&this.applyMixingFrom(r,e,n),0),a=(0==t.mixDuration?(i=1,n=T.MixPose.setup):1<(i=t.mixTime/t.mixDuration)&&(i=1),i<r.eventThreshold?this.events:null),o=i<r.attachmentThreshold,s=i<r.drawOrderThreshold,l=r.animationLast,h=r.getAnimationTime(),u=r.animation.timelines.length,d=r.animation.timelines,c=r.timelineData,p=r.timelineDipMix,f=0==r.timelinesRotation.length;f&&T.Utils.setArraySize(r.timelinesRotation,u<<1,null);for(var g=r.timelinesRotation,M=r.alpha*t.interruptAlpha,m=M*(1-i),v=0,x=r.totalAlpha=0;x<u;x++){var A=d[x];switch(c[x]){case E.SUBSEQUENT:if(!o&&A instanceof T.AttachmentTimeline)continue;if(!s&&A instanceof T.DrawOrderTimeline)continue;y=n,v=m;break;case E.FIRST:y=T.MixPose.setup,v=m;break;case E.DIP:y=T.MixPose.setup,v=M;break;default:var y=T.MixPose.setup,v=M,w=p[x];v*=Math.max(0,1-w.mixTime/w.mixDuration)}r.totalAlpha+=v,A instanceof T.RotateTimeline?this.applyRotateTimeline(A,e,h,v,y,g,x<<1,f):(T.Utils.webkit602BugfixHelper(v,y),A.apply(e,l,h,a,v,y,T.MixDirection.out))}return 0<t.mixDuration&&this.queueEvents(r,h),this.events.length=0,r.nextAnimationLast=h,r.nextTrackLast=r.trackTime,i},E.prototype.applyRotateTimeline=function(t,e,n,r,i,a,o,s){var l,h,u,d,c;s&&(a[o]=0),1==r?t.apply(e,0,n,null,1,i,T.MixDirection.in):(h=(t=t).frames,e=e.bones[t.boneIndex],n<h[0]?i==T.MixPose.setup&&(e.rotation=e.data.rotation):(c=0,n>=h[h.length-T.RotateTimeline.ENTRIES]?c=e.data.rotation+h[h.length+T.RotateTimeline.PREV_ROTATION]:(d=h[(u=T.Animation.binarySearch(h,n,T.RotateTimeline.ENTRIES))+T.RotateTimeline.PREV_ROTATION],l=h[u],t=t.getCurvePercent((u>>1)-1,1-(n-l)/(h[u+T.RotateTimeline.PREV_TIME]-l)),c=h[u+T.RotateTimeline.ROTATION]-d,c=d+(c-=360*(16384-(16384.499999999996-c/360|0)))*t+e.data.rotation,c-=360*(16384-(16384.499999999996-c/360|0))),(n=0)==(h=c-(l=(i==T.MixPose.setup?e.data:e).rotation))?n=a[o]:(h-=360*(16384-(16384.499999999996-h/360|0)),d=u=0,d=s?(u=0,h):(u=a[o],a[o+1]),t=0<h,c=0<=u,T.MathUtils.signum(d)!=T.MathUtils.signum(h)&&Math.abs(d)<=90&&(180<Math.abs(u)&&(u+=360*T.MathUtils.signum(u)),c=t),n=h+u-u%360,c!=t&&(n+=360*T.MathUtils.signum(u)),a[o]=n),a[o+1]=h,e.rotation=(l+=n*r)-360*(16384-(16384.499999999996-l/360|0))))},E.prototype.queueEvents=function(t,e){for(var n=t.animationStart,r=t.animationEnd,i=r-n,a=t.trackLast%i,o=this.events,s=0,l=o.length;s<l;s++){var h=o[s];if(h.time<a)break;h.time>r||this.queue.event(t,h)}for((t.loop?0==i||a>t.trackTime%i:r<=e&&t.animationLast<r)&&this.queue.complete(t);s<l;s++)o[s].time<n||this.queue.event(t,o[s])},E.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},E.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){t=this.tracks[t];if(null!=t){this.queue.end(t),this.disposeNext(t);for(var e=t;;){var n=e.mixingFrom;if(null==n)break;this.queue.end(n),e.mixingFrom=null,e=n}this.tracks[t.trackIndex]=null,this.queue.drain()}}},E.prototype.setCurrent=function(t,e,n){var r=this.expandToIndex(t);this.tracks[t]=e,null!=r&&(n&&this.queue.interrupt(r),e.mixingFrom=r,e.mixTime=0,null!=r.mixingFrom&&0<r.mixDuration&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)},E.prototype.setAnimation=function(t,e,n){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,r,n)},E.prototype.setAnimationWith=function(t,e,n){if(null==e)throw new Error("animation cannot be null.");var r=!0,i=this.expandToIndex(t),e=(null!=i&&(-1==i.nextTrackLast?(this.tracks[t]=i.mixingFrom,this.queue.interrupt(i),this.queue.end(i),this.disposeNext(i),i=i.mixingFrom,r=!1):this.disposeNext(i)),this.trackEntry(t,e,n,i));return this.setCurrent(t,e,r),this.queue.drain(),e},E.prototype.addAnimation=function(t,e,n,r){var i=this.data.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,i,n,r)},E.prototype.addAnimationWith=function(t,e,n,r){if(null==e)throw new Error("animation cannot be null.");var i=this.expandToIndex(t);if(null!=i)for(;null!=i.next;)i=i.next;n=this.trackEntry(t,e,n,i);return null==i?(this.setCurrent(t,n,!0),this.queue.drain()):(i.next=n,r<=0&&(0!=(t=i.animationEnd-i.animationStart)?r=(r+=i.loop?t*(1+(i.trackTime/t|0)):t)-this.data.getMix(i.animation,e):r=0)),n.delay=r,n},E.prototype.setEmptyAnimation=function(t,e){t=this.setAnimationWith(t,E.emptyAnimation,!1);return t.mixDuration=e,t.trackEnd=e,t},E.prototype.addEmptyAnimation=function(t,e,n){n<=0&&(n-=e);t=this.addAnimationWith(t,E.emptyAnimation,!1,n);return t.mixDuration=e,t.trackEnd=e,t},E.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,r=this.tracks.length;n<r;n++){var i=this.tracks[n];null!=i&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},E.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(T.Utils.ensureArrayCapacity(this.tracks,t-this.tracks.length+1,null),this.tracks.length=t+1,null)},E.prototype.trackEntry=function(t,e,n,r){var i=this.trackEntryPool.obtain();return i.trackIndex=t,i.animation=e,i.loop=n,i.eventThreshold=0,i.attachmentThreshold=0,i.drawOrderThreshold=0,i.animationStart=0,i.animationEnd=e.duration,i.animationLast=-1,i.nextAnimationLast=-1,i.delay=0,i.trackTime=0,i.trackLast=-1,i.nextTrackLast=-1,i.trackEnd=Number.MAX_VALUE,i.timeScale=1,i.alpha=1,i.interruptAlpha=1,i.mixTime=0,i.mixDuration=null==r?0:this.data.getMix(r.animation,e),i},E.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},E.prototype._animationsChanged=function(){this.animationsChanged=!1;var t=this.propertyIDs;t.clear();for(var e=this.mixingTo,n=0,r=this.tracks.length;n<r;n++){var i=this.tracks[n];null!=i&&i.setTimelineData(null,e,t)}},E.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},E.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},E.prototype.removeListener=function(t){t=this.listeners.indexOf(t);0<=t&&this.listeners.splice(t,1)},E.prototype.clearListeners=function(){this.listeners.length=0},E.prototype.clearListenerNotifications=function(){this.queue.clear()},E.emptyAnimation=new T.Animation("<empty>",[],0),E.SUBSEQUENT=0,E.FIRST=1,E.DIP=2,E.DIP_MIX=3;var f=E;function E(t){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new r(this),this.propertyIDs=new T.IntSet,this.mixingTo=new Array,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new T.Pool(function(){return new e}),this.data=t}T.AnimationState=f;t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.animation=null,this.listener=null,this.timelineData.length=0,this.timelineDipMix.length=0,this.timelinesRotation.length=0},t.prototype.setTimelineData=function(t,e,n){null!=t&&e.push(t);var r=null!=this.mixingFrom?this.mixingFrom.setTimelineData(this,e,n):this,i=(null!=t&&e.pop(),e),a=e.length-1,o=this.animation.timelines,s=this.animation.timelines.length,l=T.Utils.setArraySize(this.timelineData,s),h=(this.timelineDipMix.length=0,T.Utils.setArraySize(this.timelineDipMix,s));t:for(var u=0;u<s;u++){var d=o[u].getPropertyId();if(n.add(d))if(null!=t&&t.hasTimeline(d)){for(var c=a;0<=c;c--){var p=i[c];if(!p.hasTimeline(d)&&0<p.mixDuration){l[u]=f.DIP_MIX,h[u]=p;continue t}}l[u]=f.DIP}else l[u]=f.FIRST;else l[u]=f.SUBSEQUENT}return r},t.prototype.hasTimeline=function(t){for(var e=this.animation.timelines,n=0,r=e.length;n<r;n++)if(e[n].getPropertyId()==t)return!0;return!1},t.prototype.getAnimationTime=function(){var t;return this.loop?0==(t=this.animationEnd-this.animationStart)?this.animationStart:this.trackTime%t+this.animationStart:Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0};var e=t;function t(){this.timelineData=new Array,this.timelineDipMix=new Array,this.timelinesRotation=new Array}T.TrackEntry=e;i.prototype.start=function(t){this.objects.push(s.start),this.objects.push(t),this.animState.animationsChanged=!0},i.prototype.interrupt=function(t){this.objects.push(s.interrupt),this.objects.push(t)},i.prototype.end=function(t){this.objects.push(s.end),this.objects.push(t),this.animState.animationsChanged=!0},i.prototype.dispose=function(t){this.objects.push(s.dispose),this.objects.push(t)},i.prototype.complete=function(t){this.objects.push(s.complete),this.objects.push(t)},i.prototype.event=function(t,e){this.objects.push(s.event),this.objects.push(t),this.objects.push(e)},i.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];switch(r){case s.start:null!=i.listener&&i.listener.start&&i.listener.start(i);for(var a=0;a<e.length;a++)e[a].start&&e[a].start(i);break;case s.interrupt:null!=i.listener&&i.listener.interrupt&&i.listener.interrupt(i);for(a=0;a<e.length;a++)e[a].interrupt&&e[a].interrupt(i);break;case s.end:null!=i.listener&&i.listener.end&&i.listener.end(i);for(a=0;a<e.length;a++)e[a].end&&e[a].end(i);case s.dispose:null!=i.listener&&i.listener.dispose&&i.listener.dispose(i);for(a=0;a<e.length;a++)e[a].dispose&&e[a].dispose(i);this.animState.trackEntryPool.free(i);break;case s.complete:null!=i.listener&&i.listener.complete&&i.listener.complete(i);for(a=0;a<e.length;a++)e[a].complete&&e[a].complete(i);break;case s.event:var o=t[2+n++];null!=i.listener&&i.listener.event&&i.listener.event(i,o);for(a=0;a<e.length;a++)e[a].event&&e[a].event(i,o)}}this.clear(),this.drainDisabled=!1}},i.prototype.clear=function(){this.objects.length=0};var s,n,r=i;function i(t){this.objects=[],this.drainDisabled=!1,this.animState=t}function a(){}T.EventQueue=r,(n=s=T.EventType||(T.EventType={}))[n.start=0]="start",n[n.interrupt=1]="interrupt",n[n.end=2]="end",n[n.dispose=3]="dispose",n[n.complete=4]="complete",n[n.event=5]="event",a.prototype.start=function(t){},a.prototype.interrupt=function(t){},a.prototype.end=function(t){},a.prototype.dispose=function(t){},a.prototype.complete=function(t){},a.prototype.event=function(t,e){},T.AnimationStateAdapter2=a}(spine=spine||{}),function(t){function e(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}e.prototype.setMix=function(t,e,n){var r=this.skeletonData.findAnimation(t);if(null==r)throw new Error("Animation not found: "+t);t=this.skeletonData.findAnimation(e);if(null==t)throw new Error("Animation not found: "+e);this.setMixWith(r,t,n)},e.prototype.setMixWith=function(t,e,n){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");t=t.name+"."+e.name;this.animationToMixTime[t]=n},e.prototype.getMix=function(t,e){t=t.name+"."+e.name,e=this.animationToMixTime[t];return void 0===e?this.defaultMix:e},t.AnimationStateData=e}(spine=spine||{}),function(c){function t(t,e){void 0===e&&(e=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=t,this.pathPrefix=e}t.downloadText=function(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.onload=function(){200==r.status?e(r.responseText):n(r.status,r.responseText)},r.onerror=function(){n(r.status,r.responseText)},r.send()},t.downloadBinary=function(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status?e(new Uint8Array(r.response)):n(r.status,r.responseText)},r.onerror=function(){n(r.status,r.responseText)},r.send()},t.prototype.loadText=function(n,e,r){var i=this;void 0===e&&(e=null),void 0===r&&(r=null),n=this.pathPrefix+n,this.toLoad++,t.downloadText(n,function(t){i.assets[n]=t,e&&e(n,t),i.toLoad--,i.loaded++},function(t,e){i.errors[n]="Couldn't load text "+n+": status "+status+", "+e,r&&r(n,"Couldn't load text "+n+": status "+status+", "+e),i.toLoad--,i.loaded++})},t.prototype.loadData=function(t,e,n){var r=this,i=(void 0===e&&(e=null),void 0===n&&(n=null),t=this.pathPrefix+t,this.toLoad++,new XMLHttpRequest);i.onreadystatechange=function(){i.readyState==XMLHttpRequest.DONE&&(200<=i.status&&i.status<300?(r.assets[t]=i.response,e&&e(t,i.response)):(r.errors[t]="Couldn't load text "+t+": status "+i.status+", "+i.response,n&&n(t,"Couldn't load text "+t+": status "+i.status+", "+i.response)),r.toLoad--,r.loaded++)},i.open("GET",t,!0),i.responseType="arraybuffer",i.send()},t.prototype.loadTexture=function(n,r,e){var i=this,a=(void 0===r&&(r=null),void 0===e&&(e=null),n=this.pathPrefix+n,this.toLoad++,new Image);a.crossOrigin="anonymous",a.onload=function(t){var e=i.textureLoader(a);i.assets[n]=e,i.toLoad--,i.loaded++,r&&r(n,a)},a.onerror=function(t){i.errors[n]="Couldn't load image "+n,i.toLoad--,i.loaded++,e&&e(n,"Couldn't load image "+n)},a.src=n},t.prototype.loadTextureData=function(n,t,r,e){var i=this,a=(void 0===r&&(r=null),void 0===e&&(e=null),n=this.pathPrefix+n,this.toLoad++,new Image);a.onload=function(t){var e=i.textureLoader(a);i.assets[n]=e,i.toLoad--,i.loaded++,r&&r(n,a)},a.onerror=function(t){i.errors[n]="Couldn't load image "+n,i.toLoad--,i.loaded++,e&&e(n,"Couldn't load image "+n)},a.src=t},t.prototype.loadTextureAtlas=function(s,l,h){var u=this,d=(void 0===l&&(l=null),void 0===h&&(h=null),0<=s.lastIndexOf("/")?s.substring(0,s.lastIndexOf("/")):"");s=this.pathPrefix+s,this.toLoad++,t.downloadText(s,function(i){var a={count:0},o=new Array;try{new c.TextureAtlas(i,function(t){o.push(d+"/"+t);t=document.createElement("img");return t.width=16,t.height=16,new c.FakeTexture(t)})}catch(t){var e=t;return u.errors[s]="Couldn't load texture atlas "+s+": "+e.message,h&&h(s,"Couldn't load texture atlas "+s+": "+e.message),u.toLoad--,void u.loaded++}for(var t=0,n=o;t<n.length;t++)!function(t){var r=!1;u.loadTexture(t,function(e,t){if(a.count++,a.count==o.length)if(r)u.errors[s]="Couldn't load texture atlas page "+e+"} of atlas "+s,h&&h(s,"Couldn't load texture atlas page "+e+" of atlas "+s),u.toLoad--,u.loaded++;else try{var n=new c.TextureAtlas(i,function(t){return u.get(d+"/"+t)});u.assets[s]=n,l&&l(s,n),u.toLoad--,u.loaded++}catch(t){e=t;u.errors[s]="Couldn't load texture atlas "+s+": "+e.message,h&&h(s,"Couldn't load texture atlas "+s+": "+e.message),u.toLoad--,u.loaded++}},function(t,e){r=!0,a.count++,a.count==o.length&&(u.errors[s]="Couldn't load texture atlas page "+t+"} of atlas "+s,h&&h(s,"Couldn't load texture atlas page "+t+" of atlas "+s),u.toLoad--,u.loaded++)})}(n[t])},function(t,e){u.errors[s]="Couldn't load texture atlas "+s+": status "+status+", "+e,h&&h(s,"Couldn't load texture atlas "+s+": status "+status+", "+e),u.toLoad--,u.loaded++})},t.prototype.get=function(t){return t=this.pathPrefix+t,this.assets[t]},t.prototype.remove=function(t){t=this.pathPrefix+t;var e=this.assets[t];e.dispose&&e.dispose(),this.assets[t]=null},t.prototype.removeAll=function(){for(var t in this.assets){t=this.assets[t];t.dispose&&t.dispose()}this.assets={}},t.prototype.isLoadingComplete=function(){return 0==this.toLoad},t.prototype.getToLoad=function(){return this.toLoad},t.prototype.getLoaded=function(){return this.loaded},t.prototype.dispose=function(){this.removeAll()},t.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},t.prototype.getErrors=function(){return this.errors},c.AssetManager=t}(spine=spine||{}),function(i){function t(t){this.atlas=t}t.prototype.newRegionAttachment=function(t,e,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (region attachment: "+e+")");r.renderObject=r;n=new i.RegionAttachment(e);return n.setRegion(r),n},t.prototype.newMeshAttachment=function(t,e,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+e+")");r.renderObject=r;n=new i.MeshAttachment(e);return n.region=r,n},t.prototype.newBoundingBoxAttachment=function(t,e){return new i.BoundingBoxAttachment(e)},t.prototype.newPathAttachment=function(t,e){return new i.PathAttachment(e)},t.prototype.newPointAttachment=function(t,e){return new i.PointAttachment(e)},t.prototype.newClippingAttachment=function(t,e){return new i.ClippingAttachment(e)},i.AtlasAttachmentLoader=t}(spine=spine||{}),function(t){(t=t.BlendMode||(t.BlendMode={}))[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(spine=spine||{}),function(T){function t(t,e,n){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.worldX=0,this.c=0,this.d=0,this.worldY=0,this.sorted=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()}t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(t,e,n,r,i,a,o){this.ax=t,this.ay=e,this.arotation=n,this.ascaleX=r,this.ascaleY=i,this.ashearX=a,this.ashearY=o,this.appliedValid=!0;var s,l=this.parent;if(null==l)p=n+90+o,f=T.MathUtils.cosDeg(n+a)*r,g=T.MathUtils.cosDeg(p)*i,M=T.MathUtils.sinDeg(n+a)*r,m=T.MathUtils.sinDeg(p)*i,(s=this.skeleton).flipX&&(t=-t,f=-f,g=-g),s.flipY&&(e=-e,M=-M,m=-m),this.a=f,this.b=g,this.c=M,this.d=m,this.worldX=t+s.x,this.worldY=e+s.y;else{var h=l.a,u=l.b,d=l.c,c=l.d;switch(this.worldX=h*t+u*e+l.worldX,this.worldY=d*t+c*e+l.worldY,this.data.transformMode){case T.TransformMode.Normal:var p=n+90+o,f=T.MathUtils.cosDeg(n+a)*r,g=T.MathUtils.cosDeg(p)*i,M=T.MathUtils.sinDeg(n+a)*r,m=T.MathUtils.sinDeg(p)*i;return this.a=h*f+u*M,this.b=h*g+u*m,this.c=d*f+c*M,void(this.d=d*g+c*m);case T.TransformMode.OnlyTranslation:p=n+90+o;this.a=T.MathUtils.cosDeg(n+a)*r,this.b=T.MathUtils.cosDeg(p)*i,this.c=T.MathUtils.sinDeg(n+a)*r,this.d=T.MathUtils.sinDeg(p)*i;break;case T.TransformMode.NoRotationOrReflection:var v=0,x=n+a-(v=1e-4<(A=h*h+d*d)?(u=d*(A=Math.abs(h*c-u*d)/A),c=h*A,Math.atan2(d,h)*T.MathUtils.radDeg):(d=h=0,90-Math.atan2(c,u)*T.MathUtils.radDeg)),v=n+o-v+90,f=T.MathUtils.cosDeg(x)*r,g=T.MathUtils.cosDeg(v)*i,M=T.MathUtils.sinDeg(x)*r,m=T.MathUtils.sinDeg(v)*i;this.a=h*f-u*M,this.b=h*g-u*m,this.c=d*f+c*M,this.d=d*g+c*m;break;case T.TransformMode.NoScale:case T.TransformMode.NoScaleOrReflection:var A,x=T.MathUtils.cosDeg(n),v=T.MathUtils.sinDeg(n),y=h*x+u*v,x=d*x+c*v,v=(y*=A=1e-5<(A=Math.sqrt(y*y+x*x))?1/A:A,x*=A,A=Math.sqrt(y*y+x*x),Math.PI/2+Math.atan2(x,y)),w=Math.cos(v)*A,v=Math.sin(v)*A,f=T.MathUtils.cosDeg(a)*r,g=T.MathUtils.cosDeg(90+o)*i,M=T.MathUtils.sinDeg(a)*r,m=T.MathUtils.sinDeg(90+o)*i;return(this.data.transformMode!=T.TransformMode.NoScaleOrReflection?h*c-u*d<0:this.skeleton.flipX!=this.skeleton.flipY)&&(w=-w,v=-v),this.a=y*f+w*M,this.b=y*g+w*m,this.c=x*f+v*M,void(this.d=x*g+v*m)}this.skeleton.flipX&&(this.a=-this.a,this.b=-this.b),this.skeleton.flipY&&(this.c=-this.c,this.d=-this.d)}},t.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*T.MathUtils.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*T.MathUtils.radDeg},t.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},t.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t,e,n,r,i,a,o=this.parent;null==o?(this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*T.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*T.MathUtils.radDeg):(r=o.a,n=o.b,a=o.c,e=o.d,t=this.worldX-o.worldX,o=this.worldY-o.worldY,this.ax=t*e*(i=1/(r*e-n*a))-o*n*i,this.ay=o*r*i-t*a*i,e=(o=i*e)*this.a-(t=i*n)*this.c,n=o*this.b-t*this.d,r=(o=i*r)*this.c-(t=i*a)*this.a,i=o*this.d-t*this.b,this.ashearX=0,this.ascaleX=Math.sqrt(e*e+r*r),1e-4<this.ascaleX?(this.ascaleY=(a=e*i-n*r)/this.ascaleX,this.ashearY=Math.atan2(e*n+r*i,a)*T.MathUtils.radDeg,this.arotation=Math.atan2(r,e)*T.MathUtils.radDeg):(this.ascaleX=0,this.ascaleY=Math.sqrt(n*n+i*i),this.ashearY=0,this.arotation=90-Math.atan2(i,n)*T.MathUtils.radDeg))},t.prototype.worldToLocal=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,a=1/(e*i-n*r),o=t.x-this.worldX,s=t.y-this.worldY;return t.x=o*i*a-s*n*a,t.y=s*e*a-o*r*a,t},t.prototype.localToWorld=function(t){var e=t.x,n=t.y;return t.x=e*this.a+n*this.b+this.worldX,t.y=e*this.c+n*this.d+this.worldY,t},t.prototype.worldToLocalRotation=function(t){var e=T.MathUtils.sinDeg(t),t=T.MathUtils.cosDeg(t);return Math.atan2(this.a*e-this.c*t,this.d*t-this.b*e)*T.MathUtils.radDeg},t.prototype.localToWorldRotation=function(t){var e=T.MathUtils.sinDeg(t),t=T.MathUtils.cosDeg(t);return Math.atan2(t*this.c+e*this.d,t*this.a+e*this.b)*T.MathUtils.radDeg},t.prototype.rotateWorld=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,a=T.MathUtils.cosDeg(t),t=T.MathUtils.sinDeg(t);this.a=a*e-t*r,this.b=a*n-t*i,this.c=t*e+a*r,this.d=t*n+a*i,this.appliedValid=!1},T.Bone=t}(spine=spine||{}),function(t){var r;t.BoneData=function(t,e,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=r.Normal,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=n},(t=r=t.TransformMode||(t.TransformMode={}))[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(spine=spine||{}),(spine||(spine={})).Event=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e},(spine||(spine={})).EventData=function(t){this.name=t},function(z){function t(t,e){if(this.mix=1,this.bendDirection=0,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}t.prototype.getOrder=function(){return this.data.order},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}},t.prototype.apply1=function(t,e,n,r){t.appliedValid||t.updateAppliedTransform();var i=t.parent,a=1/(i.a*i.d-i.b*i.c),e=e-i.worldX,n=n-i.worldY,o=(e*i.d-n*i.b)*a-t.ax,n=(n*i.a-e*i.c)*a-t.ay,e=Math.atan2(n,o)*z.MathUtils.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(e+=180),180<e?e-=360:e<-180&&(e+=360),t.updateWorldTransformWith(t.ax,t.ay,t.arotation+e*r,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)},t.prototype.apply2=function(t,e,n,r,i,a){if(0==a)e.updateWorldTransform();else{t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();var o=t.ax,N=t.ay,s=t.ascaleX,l=t.ascaleY,h=e.ascaleX,U=0,B=0,u=0,u=s<0?(s=-s,U=180,-1):(U=0,1),B=(l<0&&(l=-l,u=-u),h<0?(h=-h,180):0),d=e.ax,c=0,p=0,f=0,g=t.a,M=t.b,m=t.c,v=t.d,k=Math.abs(s-l)<=1e-4,f=k?(p=g*d+M*(c=e.ay)+t.worldX,m*d+v*c+t.worldY):(c=0,p=g*d+t.worldX,m*d+t.worldY),x=t.parent,A=(g=x.a,M=x.b,m=x.c,1/(g*(v=x.d)-M*m)),y=n-x.worldX,w=r-x.worldY,T=(y*v-w*M)*A-o,E=(w*g-y*m)*A-N,n=((y=p-x.worldX)*v-(w=f-x.worldY)*M)*A-o,r=(w*g-y*m)*A-N,b=Math.sqrt(n*n+r*r),R=e.data.length*h,S=0,C=0;t:if(k){var I=(T*T+E*E-b*b-(R*=s)*R)/(2*b*R);I<-1?I=-1:1<I&&(I=1),C=Math.acos(I)*i,g=b+R*I,M=R*Math.sin(C),S=Math.atan2(E*g-T*M,T*g+E*M)}else{var I=(g=s*R)*g,P=(M=l*R)*M,V=T*T+E*E,O=Math.atan2(E,T),L=-2*P*b,_=P-I;if(0<=(v=L*L-4*_*(m=P*b*b+I*V-I*P))){var F=Math.sqrt(v),L=(F=-(L+(F=L<0?-F:F))/2)/_,_=m/F,F=Math.abs(L)<Math.abs(_)?L:_;if(F*F<=V){w=Math.sqrt(V-F*F)*i,S=O-Math.atan2(w,F),C=Math.atan2(w/l,(F-b)/s);break t}}var L=z.MathUtils.PI,_=b-g,F=_*_,X=0,Y=0,D=b+g,W=D*D,G=0;-1<=(m=-g*b/(I-P))&&m<=1&&(m=Math.acos(m),(v=(y=g*Math.cos(m)+b)*y+(w=M*Math.sin(m))*w)<F&&(L=m,F=v,_=y,X=w),W<v)&&(Y=m,W=v,D=y,G=w),C=V<=(F+W)/2?(S=O-Math.atan2(X*i,_),L*i):(S=O-Math.atan2(G*i,D),Y*i)}p=Math.atan2(c,d)*u,f=t.arotation;180<(S=(S-p)*z.MathUtils.radDeg+U-f)?S-=360:S<-180&&(S+=360),t.updateWorldTransformWith(o,N,f+S*a,t.ascaleX,t.ascaleY,0,0),f=e.arotation,180<(C=((C+p)*z.MathUtils.radDeg-e.ashearX)*u+B-f)?C-=360:C<-180&&(C+=360),e.updateWorldTransformWith(d,c,f+C*a,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}},z.IkConstraint=t}(spine=spine||{}),(spine||(spine={})).IkConstraintData=function(t){this.order=0,this.bones=new Array,this.bendDirection=1,this.mix=1,this.name=t},function(j){function Q(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,r=t.bones.length;n<r;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}Q.prototype.apply=function(){this.update()},Q.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof j.PathAttachment){var e=this.rotateMix,n=this.translateMix,r=0<e;if(0<n||r){var i=this.data,a=i.spacingMode,o=a==j.SpacingMode.Length,s=i.rotateMode,l=s==j.RotateMode.Tangent,h=s==j.RotateMode.ChainScale,u=this.bones.length,d=l?u:u+1,N=this.bones,c=j.Utils.setArraySize(this.spaces,d),p=null,f=this.spacing;if(h||o){h&&(p=j.Utils.setArraySize(this.lengths,u));for(var g=0,U=d-1;g<U;){var M,m=(T=N[g]).data.length;m<Q.epsilon?(h&&(p[g]=0),c[++g]=0):(b=m*T.a,R=m*T.c,M=Math.sqrt(b*b+R*R),h&&(p[g]=M),c[++g]=(o?m+f:f)*M/m)}}else for(g=1;g<d;g++)c[g]=f;var v=this.computeWorldPositions(t,d,l,i.positionMode==j.PositionMode.Percent,a==j.SpacingMode.Percent),x=v[0],A=v[1],y=i.offsetRotation,w=!1;0==y?w=s==j.RotateMode.Chain:(w=!1,y*=0<(E=this.target.bone).a*E.d-E.b*E.c?j.MathUtils.degRad:-j.MathUtils.degRad);for(var T,g=0,E=3;g<u;g++,E+=3){(T=N[g]).worldX+=(x-T.worldX)*n,T.worldY+=(A-T.worldY)*n;var b,R,S=(b=v[E])-x,C=(R=v[E+1])-A;h&&0!=(I=p[g])&&(I=(Math.sqrt(S*S+C*C)/I-1)*e+1,T.a*=I,T.c*=I);var I,P,V,L,_,F,B,D,x=b,A=R;r&&(I=T.a,P=T.b,V=T.c,L=T.d,F=_=D=0,D=l?v[E-1]:0==c[g+1]?v[E+2]:Math.atan2(C,S),D-=Math.atan2(V,I),w?(_=Math.cos(D),F=Math.sin(D),x+=((B=T.data.length)*(_*I-F*V)-S)*e,A+=(B*(F*I+_*V)-C)*e):D+=y,D>j.MathUtils.PI?D-=j.MathUtils.PI2:D<-j.MathUtils.PI&&(D+=j.MathUtils.PI2),D*=e,_=Math.cos(D),F=Math.sin(D),T.a=_*I-F*V,T.b=_*P-F*L,T.c=F*I+_*V,T.d=F*P+_*L),T.appliedValid=!1}}}},Q.prototype.computeWorldPositions=function(t,e,N,U,B){var n=this.target,r=this.position,i=this.spaces,a=j.Utils.setArraySize(this.positions,3*e+2),o=null,s=t.closed,l=t.worldVerticesLength,h=l/6,u=Q.NONE;if(t.constantSpeed){s?(o=j.Utils.setArraySize(this.world,l+=2),t.computeWorldVertices(n,2,l-4,o,0,2),t.computeWorldVertices(n,0,2,o,l-4,2),o[l-2]=o[0],o[l-1]=o[1]):(h--,o=j.Utils.setArraySize(this.world,l-=4),t.computeWorldVertices(n,2,l,o,0,2));for(var k=j.Utils.setArraySize(this.curves,h),d=0,c=o[0],p=o[1],f=0,g=0,M=0,m=0,v=0,O=0,X=0,Y=0,x=0,A=0,y=0,w=0,T=0,E=0,b=0,R=2;b<h;b++,R+=6)f=o[R],g=o[R+1],M=o[R+2],m=o[R+3],y=2*(X=.1875*(c-2*f+M))+(x=.09375*(3*(f-M)-c+(v=o[R+4]))),w=2*(Y=.1875*(p-2*g+m))+(A=.09375*(3*(g-m)-p+(O=o[R+5]))),T=.75*(f-c)+X+.16666667*x,E=.75*(g-p)+Y+.16666667*A,d+=Math.sqrt(T*T+E*E),T+=y,E+=w,y+=x,w+=A,d+=Math.sqrt(T*T+E*E),T+=y,E+=w,d+=Math.sqrt(T*T+E*E),T+=y+x,E+=w+A,d+=Math.sqrt(T*T+E*E),k[b]=d,c=v,p=O;if(U&&(r*=d),B)for(b=0;b<e;b++)i[b]*=d;for(var S=this.segments,C=0,b=0,I=0,P=0,V=0;b<e;b++,I+=3){F=r+=q=i[b];if(s)(F%=d)<0&&(F+=d),P=0;else{if(F<0){this.addBeforePosition(F,o,0,a,I);continue}if(d<F){this.addAfterPosition(F-d,o,l-4,a,I);continue}}for(;;P++){var W=k[P];if(!(W<F)){0==P?F/=W:F=(F-(D=k[P-1]))/(W-D);break}}if(P!=u){var u=P,L=6*P,c=o[L],p=o[L+1],f=o[L+2],g=o[L+3],M=o[L+4],m=o[L+5],y=2*(X=.03*(c-2*f+M))+(x=.006*(3*(f-M)-c+(v=o[L+6]))),w=2*(Y=.03*(p-2*g+m))+(A=.006*(3*(g-m)-p+(O=o[L+7]))),T=.3*(f-c)+X+.16666667*x,E=.3*(g-p)+Y+.16666667*A,C=Math.sqrt(T*T+E*E);for(S[0]=C,L=1;L<8;L++)T+=y,E+=w,y+=x,w+=A,C+=Math.sqrt(T*T+E*E),S[L]=C;T+=y,E+=w,C+=Math.sqrt(T*T+E*E),S[8]=C,T+=y+x,E+=w+A,C+=Math.sqrt(T*T+E*E),S[9]=C,V=0}for(F*=C;;V++){var G=S[V];if(!(G<F)){0==V?F/=G:F=V+(F-(D=S[V-1]))/(G-D);break}}this.addCurvePosition(.1*F,c,p,f,g,M,m,v,O,a,I,N||0<b&&0==q)}}else{var z=t.lengths,_=z[h-=s?1:2];if(U&&(r*=_),B)for(var b=0;b<e;b++)i[b]*=_;for(var o=j.Utils.setArraySize(this.world,8),b=0,I=0,P=0;b<e;b++,I+=3){var q,F=r+=q=i[b];if(s)(F%=_)<0&&(F+=_),P=0;else{if(F<0){u!=Q.BEFORE&&(u=Q.BEFORE,t.computeWorldVertices(n,2,4,o,0,2)),this.addBeforePosition(F,o,0,a,I);continue}if(_<F){u!=Q.AFTER&&(u=Q.AFTER,t.computeWorldVertices(n,l-6,4,o,0,2)),this.addAfterPosition(F-_,o,0,a,I);continue}}for(;;P++){var D,H=z[P];if(!(H<F)){0==P?F/=H:F=(F-(D=z[P-1]))/(H-D);break}}P!=u&&(u=P,s&&P==h?(t.computeWorldVertices(n,l-4,4,o,0,2),t.computeWorldVertices(n,0,4,o,4,2)):t.computeWorldVertices(n,6*P+2,8,o,0,2)),this.addCurvePosition(F,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],a,I,N||0<b&&0==q)}}return a},Q.prototype.addBeforePosition=function(t,e,n,r,i){var a=e[n],o=e[n+1],s=e[n+2]-a,e=e[n+3]-o,n=Math.atan2(e,s);r[i]=a+t*Math.cos(n),r[i+1]=o+t*Math.sin(n),r[i+2]=n},Q.prototype.addAfterPosition=function(t,e,n,r,i){var a=e[n+2],o=e[n+3],s=a-e[n],e=o-e[n+1],n=Math.atan2(e,s);r[i]=a+t*Math.cos(n),r[i+1]=o+t*Math.sin(n),r[i+2]=n},Q.prototype.addCurvePosition=function(t,e,n,r,i,a,o,s,l,h,u,d){var c=(t=0!=t&&!isNaN(t)?t:1e-4)*t,p=c*t,f=1-t,g=f*f,M=g*f,m=f*t,v=3*m,f=f*v,v=v*t,t=e*M+r*f+a*v+s*p,s=n*M+i*f+o*v+l*p;h[u]=t,h[u+1]=s,d&&(h[u+2]=Math.atan2(s-(n*g+i*m*2+o*c),t-(e*g+r*m*2+a*c)))},Q.prototype.getOrder=function(){return this.data.order},Q.NONE=-1,Q.BEFORE=-2,Q.AFTER=-3,Q.epsilon=1e-5,j.PathConstraint=Q}(spine=spine||{}),function(t){var e;t.PathConstraintData=function(t){this.order=0,this.bones=new Array,this.name=t},(e=t.PositionMode||(t.PositionMode={}))[e.Fixed=0]="Fixed",e[e.Percent=1]="Percent",(e=t.SpacingMode||(t.SpacingMode={}))[e.Length=0]="Length",e[e.Fixed=1]="Fixed",e[e.Percent=2]="Percent",(e=t.RotateMode||(t.RotateMode={}))[e.Tangent=0]="Tangent",e[e.Chain=1]="Chain",e[e.ChainScale=2]="ChainScale"}(spine=spine||{}),function(t){n.prototype.loaded=function(){var t,e=0;for(t in this.assets)e++;return e};var i=n;function e(t){void 0===t&&(t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=t}function n(t){this.toLoad=new Array,this.assets={},this.clientId=t}e.prototype.queueAsset=function(t,e,n){var r=this.clientAssets[t];return null==r&&(r=new i(t),this.clientAssets[t]=r),null!==e&&(r.textureLoader=e),r.toLoad.push(n),this.queuedAssets[n]!==n&&(this.queuedAssets[n]=n,!0)},e.prototype.loadText=function(t,e){var n,r=this;e=this.pathPrefix+e,this.queueAsset(t,null,e)&&((n=new XMLHttpRequest).onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&(200<=n.status&&n.status<300?r.rawAssets[e]=n.responseText:r.errors[e]="Couldn't load text "+e+": status "+n.status+", "+n.responseText)},n.open("GET",e,!0),n.send())},e.prototype.loadJson=function(t,e){var n,r=this;e=this.pathPrefix+e,this.queueAsset(t,null,e)&&((n=new XMLHttpRequest).onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&(200<=n.status&&n.status<300?r.rawAssets[e]=JSON.parse(n.responseText):r.errors[e]="Couldn't load text "+e+": status "+n.status+", "+n.responseText)},n.open("GET",e,!0),n.send())},e.prototype.loadTexture=function(t,e,n){var r,i=this;n=this.pathPrefix+n,this.queueAsset(t,e,n)&&((r=new Image).src=n,r.crossOrigin="anonymous",r.onload=function(t){i.rawAssets[n]=r},r.onerror=function(t){i.errors[n]="Couldn't load image "+n})},e.prototype.get=function(t,e){e=this.pathPrefix+e;t=this.clientAssets[t];return null==t||t.assets[e]},e.prototype.updateClientAssets=function(t){for(var e=0;e<t.toLoad.length;e++){var n=t.toLoad[e],r=t.assets[n];null==r&&null!=(r=this.rawAssets[n])&&(r instanceof HTMLImageElement?t.assets[n]=t.textureLoader(r):t.assets[n]=r)}},e.prototype.isLoadingComplete=function(t){t=this.clientAssets[t];return null==t||(this.updateClientAssets(t),t.toLoad.length==t.loaded())},e.prototype.dispose=function(){},e.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},e.prototype.getErrors=function(){return this.errors},t.SharedAssetManager=e}(spine=spine||{}),function(v){function t(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.flipX=!1,this.flipY=!1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var n,r=t.bones[e],i=void 0;null==r.parent?i=new v.Bone(r,this,null):(n=this.bones[r.parent.index],i=new v.Bone(r,this,n),n.children.push(i)),this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(e=0;e<t.slots.length;e++){var a=t.slots[e],i=this.bones[a.boneData.index],a=new v.Slot(a,i);this.slots.push(a),this.drawOrder.push(a)}this.ikConstraints=new Array;for(e=0;e<t.ikConstraints.length;e++){var o=t.ikConstraints[e];this.ikConstraints.push(new v.IkConstraint(o,this))}this.transformConstraints=new Array;for(e=0;e<t.transformConstraints.length;e++){var s=t.transformConstraints[e];this.transformConstraints.push(new v.TransformConstraint(s,this))}this.pathConstraints=new Array;for(e=0;e<t.pathConstraints.length;e++){var l=t.pathConstraints[e];this.pathConstraints.push(new v.PathConstraint(l,this))}this.color=new v.Color(1,1,1,1),this.updateCache()}t.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].sorted=!1;var r=this.ikConstraints,i=this.transformConstraints,a=this.pathConstraints,o=r.length,s=i.length,l=a.length,h=o+s+l;t:for(e=0;e<h;e++){for(var u=0;u<o;u++)if((d=r[u]).data.order==e){this.sortIkConstraint(d);continue t}for(u=0;u<s;u++)if((d=i[u]).data.order==e){this.sortTransformConstraint(d);continue t}for(var d,u=0;u<l;u++)if((d=a[u]).data.order==e){this.sortPathConstraint(d);continue t}}for(e=0,n=t.length;e<n;e++)this.sortBone(t[e])},t.prototype.sortIkConstraint=function(t){var e,n=t.target,n=(this.sortBone(n),t.bones),r=n[0];this.sortBone(r),1<n.length&&(e=n[n.length-1],-1<this._updateCache.indexOf(e)||this.updateCacheReset.push(e)),this._updateCache.push(t),this.sortReset(r.children),n[n.length-1].sorted=!0},t.prototype.sortPathConstraint=function(t){var e=t.target,n=e.data.index,r=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(var i=0,a=this.data.skins.length;i<a;i++)this.sortPathConstraintAttachment(this.data.skins[i],n,r);e=e.getAttachment();e instanceof v.PathAttachment&&this.sortPathConstraintAttachmentWith(e,r);for(var o=t.bones,s=o.length,i=0;i<s;i++)this.sortBone(o[i]);this._updateCache.push(t);for(i=0;i<s;i++)this.sortReset(o[i].children);for(i=0;i<s;i++)o[i].sorted=!0},t.prototype.sortTransformConstraint=function(t){this.sortBone(t.target);var e=t.bones,n=e.length;if(t.data.local)for(var r=0;r<n;r++){var i=e[r];this.sortBone(i.parent),-1<this._updateCache.indexOf(i)||this.updateCacheReset.push(i)}else for(r=0;r<n;r++)this.sortBone(e[r]);this._updateCache.push(t);for(var a=0;a<n;a++)this.sortReset(e[a].children);for(a=0;a<n;a++)e[a].sorted=!0},t.prototype.sortPathConstraintAttachment=function(t,e,n){var r=t.attachments[e];if(r)for(var i in r)this.sortPathConstraintAttachmentWith(r[i],n)},t.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof v.PathAttachment){var n=t.bones;if(null==n)this.sortBone(e);else for(var r=this.bones,i=0;i<n.length;)for(var a=n[i++],o=i+a;i<o;i++){var s=n[i];this.sortBone(r[s])}}},t.prototype.sortBone=function(t){var e;t.sorted||(null!=(e=t.parent)&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t))},t.prototype.sortReset=function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];r.sorted&&this.sortReset(r.children),r.sorted=!1}},t.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,n=t.length;e<n;e++){var r=t[e];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY,r.appliedValid=!0}for(var i=this._updateCache,e=0,n=i.length;e<n;e++)i[e].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();for(var r=this.ikConstraints,e=0,n=r.length;e<n;e++)(s=r[e]).bendDirection=s.data.bendDirection,s.mix=s.data.mix;for(var i=this.transformConstraints,e=0,n=i.length;e<n;e++){var a=(s=i[e]).data;s.rotateMix=a.rotateMix,s.translateMix=a.translateMix,s.scaleMix=a.scaleMix,s.shearMix=a.shearMix}for(var o=this.pathConstraints,e=0,n=o.length;e<n;e++){var s,a=(s=o[e]).data;s.position=a.position,s.spacing=a.spacing,s.rotateMix=a.rotateMix,s.translateMix=a.translateMix}},t.prototype.setSlotsToSetupPose=function(){var t=this.slots;v.Utils.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,n=t.length;e<n;e++)t[e].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++)if(e[n].data.name==t)return n;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++)if(e[n].data.name==t)return n;return-1},t.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},t.prototype.setSkin=function(t){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n],a=i.data.attachmentName;null!=a&&null!=(a=t.getAttachment(n,a))&&i.setAttachment(a)}this.skin=t},t.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},t.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var n=this.skin.getAttachment(t,e);if(null!=n)return n}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},t.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var n=this.slots,r=0,i=n.length;r<i;r++){var a=n[r];if(a.data.name==t){var o=null;if(null!=e&&null==(o=this.getAttachment(r,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void a.setAttachment(o)}}throw new Error("Slot not found: "+t)},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.getBounds=function(t,e,n){if(null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");for(var r=this.drawOrder,i=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,l=0,h=r.length;l<h;l++){var u=r[l],d=0,c=null,p=u.getAttachment();if(p instanceof v.RegionAttachment?(c=v.Utils.setArraySize(n,d=8,0),p.computeWorldVertices(u.bone,c,0,2)):p instanceof v.MeshAttachment&&(d=(p=p).worldVerticesLength,c=v.Utils.setArraySize(n,d,0),p.computeWorldVertices(u,0,d,c,0,2)),null!=c)for(var f=0,g=c.length;f<g;f+=2)var M=c[f],m=c[f+1],i=Math.min(i,M),a=Math.min(a,m),o=Math.max(o,M),s=Math.max(s,m)}t.set(i,a),e.set(o-i,s-a)},t.prototype.update=function(t){this.time+=t},v.Skeleton=t}(spine=spine||{}),function(ht){e.prototype.readByte=function(){return this.buffer[this.offset++]},e.prototype.readSByte=function(){var t=this.readByte();return 127<t&&(t-=256),t},e.prototype.readBool=function(){return 0!=this.readByte()},e.prototype.readShort=function(){var t=this.readByte();return(t<<=8)|this.readByte()},e.prototype.readInt=function(){var t=this.readByte();return(t=((t=((t<<=8)|this.readByte())<<8)|this.readByte())<<8)|this.readByte()},e.prototype.readVarInt=function(t){void 0===t&&(t=!0);var e=this.readByte(),n=127&e;return 128&e&&(n|=(127&(e=this.readByte()))<<7,128&e)&&(n|=(127&(e=this.readByte()))<<14,128&e)&&(n|=(127&(e=this.readByte()))<<21,128&e)&&(n|=(127&this.readByte())<<28),n=t?n:n>>>1^-(1&n)},e.prototype.readFloat=function(){return this.floatBufIn[3]=this.readByte(),this.floatBufIn[2]=this.readByte(),this.floatBufIn[1]=this.readByte(),this.floatBufIn[0]=this.readByte(),this.floatBufOut[0]},e.prototype.readString=function(){var t,e=this.readVarInt();return 0==e?null:(t=new Uint8Array(this.buffer.buffer.slice(this.offset,this.offset+e-1)),this.offset+=e-1,decodeURIComponent(escape(String.fromCharCode.apply(null,t))))},e.prototype.readColor=function(){var t=[this.readByte()/255,this.readByte()/255,this.readByte()/255,this.readByte()/255];return t=1==t[0]&&1==t[1]&&1==t[2]&&1==t[3]?null:t};var D=e;function t(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}function e(t){this.offset=0,this.size=t.byteLength,this.buffer=new Uint8Array(t),this.floatBuf=new ArrayBuffer(4),this.floatBufIn=new Uint8Array(this.floatBuf),this.floatBufOut=new Float32Array(this.floatBuf),this.doubleBuf=new ArrayBuffer(8),this.doubleBufIn=new Uint8Array(this.doubleBuf),this.doubleBufOut=new Float64Array(this.doubleBuf)}t.prototype.readSkeletonData=function(t){var e=this.scale,n=new ht.SkeletonData,r=new D(t),i=(n.hash=r.readString(),n.version=r.readString(),n.width=r.readFloat(),n.height=r.readFloat(),r.readBool());i&&(n.fps=r.readFloat(),n.imagesPath=r.readString());for(var a=0,o=r.readVarInt();a<o;a++){var s=r.readString(),l=null;if(0<a){var h=r.readVarInt();if(null==(l=n.bones[h]))throw new Error("Parent bone not found: "+h)}(f=new ht.BoneData(a,s,l)).rotation=r.readFloat(),f.x=r.readFloat()*e,f.y=r.readFloat()*e,f.scaleX=r.readFloat(),f.scaleY=r.readFloat(),f.shearX=r.readFloat(),f.shearY=r.readFloat(),f.length=r.readFloat()*e,f.transformMode=r.readByte(),i&&r.readColor(),n.bones.push(f)}for(var a=0,u=r.readVarInt();a<u;a++){var d=r.readString(),c=r.readVarInt(),p=n.bones[c];if(null==p)throw new Error("Slot bone not found: "+c);var f=new ht.SlotData(a,d,p),d=r.readColor(),p=(null!=d&&f.color.set(d[0],d[1],d[2],d[3]),r.readColor());null!=p&&(f.darkColor=new ht.Color(1,1,1,1),f.darkColor.set(p[0],p[1],p[2],p[3])),f.attachmentName=r.readString(),f.blendMode=r.readByte(),n.slots.push(f)}for(var a=0,g=r.readVarInt();a<g;a++){(f=new ht.IkConstraintData(r.readString())).order=r.readVarInt();for(var M=0,o=r.readVarInt();M<o;M++){c=r.readVarInt();if(null==(A=n.bones[c]))throw new Error("IK bone not found: "+c);f.bones.push(A)}var m=r.readVarInt();if(f.target=n.bones[m],null==f.target)throw new Error("IK target bone not found: "+m);f.mix=r.readFloat(),f.bendDirection=r.readSByte(),n.ikConstraints.push(f)}for(var a=0,v=r.readVarInt();a<v;a++){(f=new ht.TransformConstraintData(r.readString())).order=r.readVarInt();for(M=0,o=r.readVarInt();M<o;M++){c=r.readVarInt();if(null==(A=n.bones[c]))throw new Error("Transform constraint bone not found: "+c);f.bones.push(A)}m=r.readVarInt();if(f.target=n.bones[m],null==f.target)throw new Error("Transform constraint target bone not found: "+m);f.local=r.readBool(),f.relative=r.readBool(),f.offsetRotation=r.readFloat(),f.offsetX=r.readFloat(),f.offsetY=r.readFloat(),f.offsetScaleX=r.readFloat(),f.offsetScaleY=r.readFloat(),f.offsetShearY=r.readFloat(),f.rotateMix=r.readFloat(),f.translateMix=r.readFloat(),f.scaleMix=r.readFloat(),f.shearMix=r.readFloat(),n.transformConstraints.push(f)}for(var a=0,x=r.readVarInt();a<x;a++){(f=new ht.PathConstraintData(r.readString())).order=r.readVarInt();for(M=0,o=r.readVarInt();M<o;M++){var A,c=r.readVarInt();if(null==(A=n.bones[c]))throw new Error("Transform constraint bone not found: "+c);f.bones.push(A)}m=r.readVarInt();if(f.target=n.slots[m],null==f.target)throw new Error("Path target slot not found: "+m);f.positionMode=r.readByte(),f.spacingMode=r.readByte(),f.rotateMode=r.readByte(),f.offsetRotation=r.readFloat(),f.position=r.readFloat(),f.positionMode==ht.PositionMode.Fixed&&(f.position*=e),f.spacing=r.readFloat(),f.spacingMode!=ht.SpacingMode.Length&&f.spacingMode!=ht.SpacingMode.Fixed||(f.spacing*=e),f.rotateMix=r.readFloat(),f.translateMix=r.readFloat(),n.pathConstraints.push(f)}for(var y=new ht.Skin("default"),a=0,u=r.readVarInt();a<u;a++)for(var w=r.readVarInt(),M=0,T=r.readVarInt();M<T;M++){var E=r.readString();null!=(C=this.readAttachment(r,y,w,E,n,i))&&y.addAttachment(w,E,C)}n.skins.push(y),n.defaultSkin=y;for(var a=0,b=r.readVarInt();a<b;a++){for(var R=new ht.Skin(r.readString()),M=0,u=r.readVarInt();M<u;M++)for(var w=r.readVarInt(),S=0,T=r.readVarInt();S<T;S++){var C,E=r.readString();null!=(C=this.readAttachment(r,R,w,E,n,i))&&R.addAttachment(w,E,C)}n.skins.push(R)}for(var a=0,I=this.linkedMeshes.length;a<I;a++){var P=this.linkedMeshes[a];if(null==(R=null==P.skin?n.defaultSkin:n.findSkin(P.skin)))throw new Error("Skin not found: "+P.skin);var V=R.getAttachment(P.slotIndex,P.parent);if(null==V)throw new Error("Parent mesh not found: "+P.parent);P.mesh.setParentMesh(V),P.mesh.updateUVs()}for(var a=this.linkedMeshes.length=0,L=r.readVarInt();a<L;a++)(f=new ht.EventData(r.readString())).intValue=r.readVarInt(!1),f.floatValue=r.readFloat(),f.stringValue=r.readString(),n.events.push(f);for(var a=0,_=r.readVarInt();a<_;a++){var F=r.readString();this.readAnimation(r,F,n)}return n},t.prototype.readAttachment=function(t,e,n,r,i,a){var o=this.scale,s=(s=t.readString())||r;switch(t.readByte()){case ht.AttachmentType.Region:var l=t.readString(),h=this.attachmentLoader.newRegionAttachment(e,s,l=l||s);return null==h?null:(h.path=l,h.rotation=t.readFloat(),h.x=t.readFloat()*o,h.y=t.readFloat()*o,h.scaleX=t.readFloat(),h.scaleY=t.readFloat(),h.width=t.readFloat()*o,h.height=t.readFloat()*o,null!=(w=t.readColor())&&h.color.set(w[0],w[1],w[2],w[3]),h.updateOffset(),h);case ht.AttachmentType.BoundingBox:h=this.attachmentLoader.newBoundingBoxAttachment(e,s);return null==h?null:(x=t.readVarInt(),this.readVertices(t,h,x),a&&null!=(w=t.readColor())&&h.color.set(w[0],w[1],w[2],w[3]),h);case ht.AttachmentType.Mesh:var l=t.readString();if(null==(y=this.attachmentLoader.newMeshAttachment(e,s,l=l||s)))return null;y.path=l,null!=(w=t.readColor())&&y.color.set(w[0],w[1],w[2],w[3]);for(var u=[],d=0,c=t.readVarInt();d<c;d++)u.push(t.readFloat()),u.push(t.readFloat());for(var p=[],d=0,f=t.readVarInt();d<f;d++)p.push(t.readShort());if(y.triangles=p,y.regionUVs=u,this.readVertices(t,y,u.length/2),y.updateUVs(),y.hullLength=2*t.readVarInt(),a){for(var g=[],d=0,M=t.readVarInt();d<M;d++)g.push(t.readShort());t.readFloat(),t.readFloat()}return y;case ht.AttachmentType.LinkedMesh:l=t.readString();if(null==(y=this.attachmentLoader.newMeshAttachment(e,s,l=l||s)))return null;y.path=l;null!=(w=t.readColor())&&y.color.set(w[0],w[1],w[2],w[3]);var h=t.readString(),m=t.readString(),v=t.readBool();return y.inheritDeform=v,this.linkedMeshes.push(new T(y,h,n,m)),a&&(t.readFloat(),t.readFloat()),y;case ht.AttachmentType.Path:if(null==(l=this.attachmentLoader.newPathAttachment(e,s)))return null;l.closed=t.readBool(),l.constantSpeed=t.readBool();var x=t.readVarInt();this.readVertices(t,l,x);for(var A=ht.Utils.newArray(x/3,0),d=0;d<A.length;d++)A[d]=t.readFloat()*o;return l.lengths=A,a&&null!=(w=t.readColor())&&l.color.set(w[0],w[1],w[2],w[3]),l;case ht.AttachmentType.Point:v=this.attachmentLoader.newPointAttachment(e,s);return null==v?null:(v.x=t.readFloat()*o,v.y=t.readFloat()*o,v.rotation=t.readFloat(),a&&null!=(w=t.readColor())&&v.color.set(w[0],w[1],w[2],w[3]),v);case ht.AttachmentType.Clipping:h=this.attachmentLoader.newClippingAttachment(e,s);if(null==h)return null;var m=t.readVarInt(),y=i.slots[m];if(null==y)throw new Error("Clipping end slot not found: "+m);h.endSlot=y;var w,x=t.readVarInt();return this.readVertices(t,h,x),a&&null!=(w=t.readColor())&&h.color.set(w[0],w[1],w[2],w[3]),h}return null},t.prototype.readVertices=function(t,e,n){var r=this.scale;if(e.worldVerticesLength=2*n,t.readBool()){for(var i=new Array,a=new Array,o=0,s=n;o<s;o++){var l=t.readVarInt();a.push(l);for(var h=0;h<l;h++)a.push(t.readVarInt()),i.push(t.readFloat()*r),i.push(t.readFloat()*r),i.push(t.readFloat())}e.bones=a,e.vertices=ht.Utils.toFloatArray(i)}else{for(var u=new Array,o=0;o<n;o++)u.push(t.readFloat()),u.push(t.readFloat());var d=ht.Utils.toFloatArray(u);if(1!=r)for(var o=0,s=u.length;o<s;o++)d[o]*=r;e.vertices=d}},t.prototype.readAnimation=function(t,N,e){for(var n=this.scale,r=new Array,i=0,a=0,o=t.readVarInt();a<o;a++)for(var s=t.readVarInt(),l=0,U=t.readVarInt();l<U;l++){var h=t.readByte()+4,u=t.readVarInt();if(h==ht.TimelineType.attachment){(m=new ht.AttachmentTimeline(u)).slotIndex=s;for(var d=0,B=0;B<u;B++)m.setFrame(d++,t.readFloat(),t.readString());r.push(m),i=Math.max(i,m.frames[m.getFrameCount()-1])}else if(h==ht.TimelineType.color){(m=new ht.ColorTimeline(u)).slotIndex=s;for(var d=0,k=0;k<u;k++){var c=t.readFloat(),p=(p=t.readColor())||[1,1,1,1];m.setFrame(d,c,p[0],p[1],p[2],p[3]),d<u-1&&this.readCurve(t,m,d),d++}r.push(m),i=Math.max(i,m.frames[(m.getFrameCount()-1)*ht.ColorTimeline.ENTRIES])}else{if(h!=ht.TimelineType.deform)throw new Error("Invalid timeline type for a slot: "+h+" ("+s+")");(m=new ht.TwoColorTimeline(u)).slotIndex=s;for(var d=0,O=0;O<u;O++){var c=t.readFloat(),f=(f=t.readColor())||[1,1,1,1],g=(g=t.readColor())||[1,1,1,1];m.setFrame(d,c,f[0],f[1],f[2],f[3],g[0],g[1],g[2]),d<u-1&&this.readCurve(t,m,d),d++}r.push(m),i=Math.max(i,m.frames[(m.getFrameCount()-1)*ht.TwoColorTimeline.ENTRIES])}}for(var a=0,X=t.readVarInt();a<X;a++)for(var M=t.readVarInt(),l=0,U=t.readVarInt();l<U;l++){h=t.readByte(),u=t.readVarInt();if(h===ht.TimelineType.rotate){(m=new ht.RotateTimeline(u)).boneIndex=M;for(var d=0,Y=0;Y<u;Y++)m.setFrame(d,t.readFloat(),t.readFloat()),d<u-1&&this.readCurve(t,m,d),d++;r.push(m),i=Math.max(i,m.frames[(m.getFrameCount()-1)*ht.RotateTimeline.ENTRIES])}else{if(h!==ht.TimelineType.translate&&h!==ht.TimelineType.scale&&h!==ht.TimelineType.shear)throw new Error("Invalid timeline type for a bone: "+h+" ("+M+")");var m=null,v=1;h===ht.TimelineType.scale?m=new ht.ScaleTimeline(u):h===ht.TimelineType.shear?m=new ht.ShearTimeline(u):(m=new ht.TranslateTimeline(u),v=n),m.boneIndex=M;for(var d=0,W=0;W<u;W++){var c=t.readFloat(),G=t.readFloat(),z=t.readFloat();m.setFrame(d,c,G*v,z*v),d<u-1&&this.readCurve(t,m,d),d++}r.push(m),i=Math.max(i,m.frames[(m.getFrameCount()-1)*ht.TranslateTimeline.ENTRIES])}}for(var a=0,x=t.readVarInt();a<x;a++){var q=t.readVarInt(),u=t.readVarInt();(m=new ht.IkConstraintTimeline(u)).ikConstraintIndex=q;for(var d=0,H=0;H<u;H++)m.setFrame(d,t.readFloat(),t.readFloat(),t.readSByte()),d<u-1&&this.readCurve(t,m,d),d++;r.push(m),i=Math.max(i,m.frames[(m.getFrameCount()-1)*ht.IkConstraintTimeline.ENTRIES])}for(a=0,x=t.readVarInt();a<x;a++){var j=t.readVarInt(),u=t.readVarInt();(m=new ht.TransformConstraintTimeline(u)).transformConstraintIndex=j;for(var d=0,Q=0;Q<u;Q++)m.setFrame(d,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat()),d<u-1&&this.readCurve(t,m,d),d++;r.push(m),i=Math.max(i,m.frames[(m.getFrameCount()-1)*ht.TransformConstraintTimeline.ENTRIES])}for(a=0,x=t.readVarInt();a<x;a++)for(var A=t.readVarInt(),y=e.pathConstraints[A],l=0,w=t.readVarInt();l<w;l++){h=t.readByte()+11,u=t.readVarInt();if(h===ht.TimelineType.pathConstraintPosition||h===ht.TimelineType.pathConstraintSpacing){var m=null,v=1;h===ht.TimelineType.pathConstraintSpacing?(m=new ht.PathConstraintSpacingTimeline(u),y.spacingMode!=ht.SpacingMode.Length&&y.spacingMode!=ht.SpacingMode.Fixed||(v=n)):(m=new ht.PathConstraintPositionTimeline(u),y.positionMode==ht.PositionMode.Fixed&&(v=n)),m.pathConstraintIndex=A;for(var d=0,Z=0;Z<u;Z++)m.setFrame(d,t.readFloat(),t.readFloat()*v),d<u-1&&this.readCurve(t,m,d),d++;r.push(m),i=Math.max(i,m.frames[(m.getFrameCount()-1)*ht.PathConstraintPositionTimeline.ENTRIES])}else if(h===ht.TimelineType.pathConstraintMix){(m=new ht.PathConstraintMixTimeline(u)).pathConstraintIndex=A;for(var d=0,K=0;K<u;K++)m.setFrame(d,t.readFloat(),t.readFloat(),t.readFloat()),d<u-1&&this.readCurve(t,m,d),d++;r.push(m),i=Math.max(i,m.frames[(m.getFrameCount()-1)*ht.PathConstraintMixTimeline.ENTRIES])}}for(a=0,x=t.readVarInt();a<x;a++){var J=t.readVarInt(),$=e.skins[J];if(null==$)throw new Error("Skin not found: "+J);for(l=0,w=t.readVarInt();l<w;l++)for(var s=t.readVarInt(),tt=0,et=t.readVarInt();tt<et;tt++){var nt=t.readString(),T=$.getAttachment(s,nt);if(null==T)throw new Error("Deform attachment not found: "+nt);var E=null!=T.bones,b=T.vertices,rt=E?b.length/3*2:b.length,u=t.readVarInt();(m=new ht.DeformTimeline(u)).slotIndex=s,m.attachment=T;for(var d=0,it=0;it<u;it++){var c=t.readFloat(),R=t.readVarInt(),S=void 0;if(0==R)S=E?ht.Utils.newFloatArray(rt):b;else{var S=ht.Utils.newFloatArray(rt),C=t.readVarInt();if(R+=C,1==n)for(var I=C;I<R;I++)S[I]=t.readFloat();else for(I=C;I<R;I++)S[I]=t.readFloat()*n;if(!E)for(var I=0,at=S.length;I<at;I++)S[I]+=b[I]}m.setFrame(d,c,S),d<u-1&&this.readCurve(t,m,d),d++}r.push(m),i=Math.max(i,m.frames[m.getFrameCount()-1])}}var P=t.readVarInt();if(0<P){for(m=new ht.DrawOrderTimeline(P),o=e.slots.length,a=0;a<P;a++){for(var c=t.readFloat(),ot=t.readVarInt(),V=ht.Utils.newArray(o,-1),L=new Array(o-ot),_=0,F=0,l=0;l<ot;l++){for(s=t.readVarInt();_!=s;)L[F++]=_++;V[_+t.readVarInt()]=_++}for(;_<o;)L[F++]=_++;for(l=o-1;0<=l;l--)-1==V[l]&&(V[l]=L[--F]);m.setFrame(a,c,V)}r.push(m),i=Math.max(i,m.frames[m.getFrameCount()-1])}var st=t.readVarInt();if(0<st){for(m=new ht.EventTimeline(st),a=0;a<st;a++){var c=t.readFloat(),D=t.readVarInt(),lt=e.events[D];if(null==lt)throw new Error("Event not found: "+D);D=new ht.Event(ht.Utils.toSinglePrecision(c),lt);D.intValue=t.readVarInt(!1),D.floatValue=t.readFloat(),D.stringValue=t.readBool()?t.readString():lt.stringValue,m.setFrame(a,D)}r.push(m),i=Math.max(i,m.frames[m.getFrameCount()-1])}if(isNaN(i))throw new Error("Error while parsing animation, duration is NaN");e.animations.push(new ht.Animation(N,r,i))},t.prototype.readCurve=function(t,e,n){var r=t.readByte();r===ht.CurveTimeline.STEPPED?e.setStepped(n):r===ht.CurveTimeline.BEZIER&&e.setCurve(n,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())},ht.SkeletonBinary=t;var T=function(t,e,n,r){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=r}}(spine=spine||{}),function(d){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new d.Pool(function(){return d.Utils.newFloatArray(16)})}t.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,r=this.polygons,i=this.polygonPool,a=t.slots,o=a.length;n.length=0,i.freeAll(r);for(var s=r.length=0;s<o;s++){var l,h=a[s],u=h.getAttachment();u instanceof d.BoundingBoxAttachment&&(n.push(u=u),(l=i.obtain()).length!=u.worldVerticesLength&&(l=d.Utils.newFloatArray(u.worldVerticesLength)),r.push(l),u.computeWorldVertices(h,0,u.worldVerticesLength,l,0,2))}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,i=this.polygons,a=0,o=i.length;a<o;a++)for(var s=i[a],l=s,h=0,u=s.length;h<u;h+=2)var d=l[h],c=l[h+1],t=Math.min(t,d),e=Math.min(e,c),n=Math.max(n,d),r=Math.max(r,c);this.minX=t,this.minY=e,this.maxX=n,this.maxY=r},t.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},t.prototype.aabbIntersectsSegment=function(t,e,n,r){var i=this.minX,a=this.minY,o=this.maxX,s=this.maxY;return!(t<=i&&n<=i||e<=a&&r<=a||o<=t&&o<=n||s<=e&&s<=r)&&(a<(n=(r=(r-e)/(n-t))*(i-t)+e)&&n<s||a<(n=r*(o-t)+e)&&n<s||i<(n=(a-e)/r+t)&&n<o||i<(n=(s-e)/r+t)&&n<o)},t.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},t.prototype.containsPoint=function(t,e){for(var n=this.polygons,r=0,i=n.length;r<i;r++)if(this.containsPointPolygon(n[r],t,e))return this.boundingBoxes[r];return null},t.prototype.containsPointPolygon=function(t,e,n){for(var r=t,i=t.length,a=i-2,o=!1,s=0;s<i;s+=2){var l,h=r[s+1],u=r[a+1];(h<n&&n<=u||u<n&&n<=h)&&(l=r[s])+(n-h)/(u-h)*(r[a]-l)<e&&(o=!o),a=s}return o},t.prototype.intersectsSegment=function(t,e,n,r){for(var i=this.polygons,a=0,o=i.length;a<o;a++)if(this.intersectsSegmentPolygon(i[a],t,e,n,r))return this.boundingBoxes[a];return null},t.prototype.intersectsSegmentPolygon=function(t,e,n,r,i){for(var a=t,o=t.length,s=e-r,l=n-i,h=e*i-n*r,u=a[o-2],d=a[o-1],c=0;c<o;c+=2){var p=a[c],f=a[c+1],g=u*f-d*p,M=u-p,m=d-f,v=s*m-l*M,M=(h*M-s*g)/v;if((u<=M&&M<=p||p<=M&&M<=u)&&(e<=M&&M<=r||r<=M&&M<=e)){M=(h*m-l*g)/v;if((d<=M&&M<=f||f<=M&&M<=d)&&(n<=M&&M<=i||i<=M&&M<=n))return!0}u=p,d=f}return!1},t.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");t=this.boundingBoxes.indexOf(t);return-1==t?null:this.polygons[t]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},d.SkeletonBounds=t}(spine=spine||{}),function(z){function l(){this.triangulator=new z.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}l.prototype.clipStart=function(t,e){if(null!=this.clipAttachment)return 0;var n=(this.clipAttachment=e).worldVerticesLength,r=z.Utils.setArraySize(this.clippingPolygon,n),e=(e.computeWorldVertices(t,0,n,r,0,2),this.clippingPolygon);l.makeClockwise(e);for(var i=this.clippingPolygons=this.triangulator.decompose(e,this.triangulator.triangulate(e)),a=0,o=i.length;a<o;a++){var s=i[a];l.makeClockwise(s),s.push(s[0]),s.push(s[1])}return i.length},l.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},l.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},l.prototype.isClipping=function(){return null!=this.clipAttachment},l.prototype.clipTriangles=function(t,N,e,U,n,r,i,a){var o=this.clipOutput,s=this.clippedVertices,l=this.clippedTriangles,B=this.clippingPolygons,k=this.clippingPolygons.length,h=a?12:8,u=0;s.length=0;t:for(var d=l.length=0;d<U;d+=3)for(var c=e[d]<<1,p=t[c],f=t[1+c],g=n[c],M=n[1+c],m=t[c=e[d+1]<<1],v=t[1+c],x=n[c],A=n[1+c],y=t[c=e[d+2]<<1],w=t[1+c],T=n[c],E=n[1+c],b=0;b<k;b++){var R=s.length;if(!this.clip(p,f,m,v,y,w,B[b],o)){(P=z.Utils.setArraySize(s,R+3*h))[R]=p,P[R+1]=f,P[R+2]=r.r,P[R+3]=r.g,P[R+4]=r.b,P[R+5]=r.a,a?(P[R+6]=g,P[R+7]=M,P[R+8]=i.r,P[R+9]=i.g,P[R+10]=i.b,P[R+11]=i.a,P[R+12]=m,P[R+13]=v,P[R+14]=r.r,P[R+15]=r.g,P[R+16]=r.b,P[R+17]=r.a,P[R+18]=x,P[R+19]=A,P[R+20]=i.r,P[R+21]=i.g,P[R+22]=i.b,P[R+23]=i.a,P[R+24]=y,P[R+25]=w,P[R+26]=r.r,P[R+27]=r.g,P[R+28]=r.b,P[R+29]=r.a,P[R+30]=T,P[R+31]=E,P[R+32]=i.r,P[R+33]=i.g,P[R+34]=i.b,P[R+35]=i.a):(P[R+6]=g,P[R+7]=M,P[R+8]=m,P[R+9]=v,P[R+10]=r.r,P[R+11]=r.g,P[R+12]=r.b,P[R+13]=r.a,P[R+14]=x,P[R+15]=A,P[R+16]=y,P[R+17]=w,P[R+18]=r.r,P[R+19]=r.g,P[R+20]=r.b,P[R+21]=r.a,P[R+22]=T,P[R+23]=E),R=l.length,(D=z.Utils.setArraySize(l,R+3))[R]=u,D[R+1]=u+1,D[R+2]=u+2,u+=3;continue t}var S=o.length;if(0!=S){for(var C=v-w,O=y-m,X=p-y,Y=w-f,W=1/(C*X+O*(f-w)),I=S>>1,G=this.clipOutput,P=z.Utils.setArraySize(s,R+I*h),V=0;V<S;V+=2){var L=G[V],_=G[V+1],L=(P[R]=L,P[R+1]=_,P[R+2]=r.r,P[R+3]=r.g,P[R+4]=r.b,P[R+5]=r.a,L-y),_=_-w,F=(C*L+O*_)*W,L=(Y*L+X*_)*W,_=1-F-L;P[R+6]=g*F+x*L+T*_,P[R+7]=M*F+A*L+E*_,a&&(P[R+8]=i.r,P[R+9]=i.g,P[R+10]=i.b,P[R+11]=i.a),R+=h}var R=l.length,D=z.Utils.setArraySize(l,R+3*(I-2));I--;for(V=1;V<I;V++)D[R]=u,D[R+1]=u+V,D[R+2]=u+V+1,R+=3;u+=1+I}}},l.prototype.clip=function(t,e,n,r,i,a,o,s){var l=s,h=!1,u=null;2<=o.length%4?(u=s,s=this.scratch):u=this.scratch,u.length=0,u.push(t),u.push(e),u.push(n),u.push(r),u.push(i),u.push(a),u.push(t),u.push(e),s.length=0;for(var d=o,c=o.length-4,p=0;;p+=2){for(var f=d[p],g=d[p+1],M=d[p+2],m=d[p+3],v=f-M,x=g-m,A=u,y=u.length-2,w=s.length,T=0;T<y;T+=2){var E=A[T],b=A[T+1],R=A[T+2],S=A[T+3],C=0<v*(S-m)-x*(R-M);if(0<v*(b-m)-x*(E-M)){if(C){s.push(R),s.push(S);continue}var I,P,V=((P=R-E)*(g-b)-(I=S-b)*(f-E))/(I*(M-f)-P*(m-g));s.push(f+(M-f)*V),s.push(g+(m-g)*V)}else C&&(V=((P=R-E)*(g-b)-(I=S-b)*(f-E))/(I*(M-f)-P*(m-g)),s.push(f+(M-f)*V),s.push(g+(m-g)*V),s.push(R),s.push(S));h=!0}if(w==s.length)return!(l.length=0);if(s.push(s[0]),s.push(s[1]),p==c)break;w=s;(s=u).length=0,u=w}if(l!=s)for(var p=l.length=0,L=s.length-2;p<L;p++)l[p]=s[p];else l.length=l.length-2;return h},l.makeClockwise=function(t){for(var e,n,r,i=t,t=t.length,a=i[t-2]*i[1]-i[0]*i[t-1],o=0,s=t-3;o<s;o+=2)e=i[o],n=i[o+1],r=i[o+2],a+=e*i[o+3]-r*n;if(!(a<0))for(var o=0,l=t-2,s=t>>1;o<s;o+=2){var h=i[o],u=i[o+1],d=l-o;i[o]=i[d],i[o+1]=i[1+d],i[d]=h,i[1+d]=u}},z.SkeletonClipping=l}(spine=spine||{}),function(t){function e(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},e.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},e.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},e.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},e.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},t.SkeletonData=e}(spine=spine||{}),function($){function P(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}P.prototype.readSkeletonData=function(t){var e=this.scale,n=new $.SkeletonData,r="string"==typeof t?JSON.parse(t):t,t=r.skeleton;if(null!=t&&(n.hash=t.hash,n.version=t.spine,n.width=t.width,n.height=t.height,n.fps=t.fps,n.imagesPath=t.images),r.bones)for(var i=0;i<r.bones.length;i++){var a=r.bones[i],o=null,s=this.getValue(a,"parent",null);if(null!=s&&null==(o=n.findBone(s)))throw new Error("Parent bone not found: "+s);(d=new $.BoneData(n.bones.length,a.name,o)).length=this.getValue(a,"length",0)*e,d.x=this.getValue(a,"x",0)*e,d.y=this.getValue(a,"y",0)*e,d.rotation=this.getValue(a,"rotation",0),d.scaleX=this.getValue(a,"scaleX",1),d.scaleY=this.getValue(a,"scaleY",1),d.shearX=this.getValue(a,"shearX",0),d.shearY=this.getValue(a,"shearY",0),d.transformMode=P.transformModeFromString(this.getValue(a,"transform","normal")),n.bones.push(d)}if(r.slots)for(i=0;i<r.slots.length;i++){var l=(x=r.slots[i]).name,h=x.bone,u=n.findBone(h);if(null==u)throw new Error("Slot bone not found: "+h);var d=new $.SlotData(n.slots.length,l,u),u=this.getValue(x,"color",null),u=(null!=u&&d.color.setFromString(u),this.getValue(x,"dark",null));null!=u&&(d.darkColor=new $.Color(1,1,1,1),d.darkColor.setFromString(u)),d.attachmentName=this.getValue(x,"attachment",null),d.blendMode=P.blendModeFromString(this.getValue(x,"blend","normal")),n.slots.push(d)}if(r.ik)for(i=0;i<r.ik.length;i++){var c=r.ik[i];(d=new $.IkConstraintData(c.name)).order=this.getValue(c,"order",0);for(var p=0;p<c.bones.length;p++){h=c.bones[p];if(null==(g=n.findBone(h)))throw new Error("IK bone not found: "+h);d.bones.push(g)}var f=c.target;if(d.target=n.findBone(f),null==d.target)throw new Error("IK target bone not found: "+f);d.bendDirection=this.getValue(c,"bendPositive",!0)?1:-1,d.mix=this.getValue(c,"mix",1),n.ikConstraints.push(d)}if(r.transform)for(i=0;i<r.transform.length;i++){c=r.transform[i];(d=new $.TransformConstraintData(c.name)).order=this.getValue(c,"order",0);for(p=0;p<c.bones.length;p++){h=c.bones[p];if(null==(g=n.findBone(h)))throw new Error("Transform constraint bone not found: "+h);d.bones.push(g)}f=c.target;if(d.target=n.findBone(f),null==d.target)throw new Error("Transform constraint target bone not found: "+f);d.local=this.getValue(c,"local",!1),d.relative=this.getValue(c,"relative",!1),d.offsetRotation=this.getValue(c,"rotation",0),d.offsetX=this.getValue(c,"x",0)*e,d.offsetY=this.getValue(c,"y",0)*e,d.offsetScaleX=this.getValue(c,"scaleX",0),d.offsetScaleY=this.getValue(c,"scaleY",0),d.offsetShearY=this.getValue(c,"shearY",0),d.rotateMix=this.getValue(c,"rotateMix",1),d.translateMix=this.getValue(c,"translateMix",1),d.scaleMix=this.getValue(c,"scaleMix",1),d.shearMix=this.getValue(c,"shearMix",1),n.transformConstraints.push(d)}if(r.path)for(i=0;i<r.path.length;i++){c=r.path[i];(d=new $.PathConstraintData(c.name)).order=this.getValue(c,"order",0);for(p=0;p<c.bones.length;p++){var g,h=c.bones[p];if(null==(g=n.findBone(h)))throw new Error("Transform constraint bone not found: "+h);d.bones.push(g)}f=c.target;if(d.target=n.findSlot(f),null==d.target)throw new Error("Path target slot not found: "+f);d.positionMode=P.positionModeFromString(this.getValue(c,"positionMode","percent")),d.spacingMode=P.spacingModeFromString(this.getValue(c,"spacingMode","length")),d.rotateMode=P.rotateModeFromString(this.getValue(c,"rotateMode","tangent")),d.offsetRotation=this.getValue(c,"rotation",0),d.position=this.getValue(c,"position",0),d.positionMode==$.PositionMode.Fixed&&(d.position*=e),d.spacing=this.getValue(c,"spacing",0),d.spacingMode!=$.SpacingMode.Length&&d.spacingMode!=$.SpacingMode.Fixed||(d.spacing*=e),d.rotateMix=this.getValue(c,"rotateMix",1),d.translateMix=this.getValue(c,"translateMix",1),n.pathConstraints.push(d)}if(r.skins)for(var M in r.skins){var m=r.skins[M],v=new $.Skin(M);for(l in m){var x,A,y=n.findSlotIndex(l);if(-1==y)throw new Error("Slot not found: "+l);for(A in x=m[l]){var w=this.readAttachment(x[A],v,y,A,n);null!=w&&v.addAttachment(y,A,w)}}n.skins.push(v),"default"==v.name&&(n.defaultSkin=v)}for(var i=0,T=this.linkedMeshes.length;i<T;i++){var E=this.linkedMeshes[i];if(null==(v=null==E.skin?n.defaultSkin:n.findSkin(E.skin)))throw new Error("Skin not found: "+E.skin);var b=v.getAttachment(E.slotIndex,E.parent);if(null==b)throw new Error("Parent mesh not found: "+E.parent);E.mesh.setParentMesh(b),E.mesh.updateUVs()}if(this.linkedMeshes.length=0,r.events)for(var R in r.events){var S=r.events[R];(d=new $.EventData(R)).intValue=this.getValue(S,"int",0),d.floatValue=this.getValue(S,"float",0),d.stringValue=this.getValue(S,"string",""),n.events.push(d)}if(r.animations)for(var C in r.animations){var I=r.animations[C];this.readAnimation(I,C,n)}return n},P.prototype.readAttachment=function(t,e,n,r,i){var a=this.scale;switch(r=this.getValue(t,"name",r),this.getValue(t,"type","region")){case"region":var o=this.getValue(t,"path",r),s=this.attachmentLoader.newRegionAttachment(e,r,o);return null==s?null:(s.path=o,s.x=this.getValue(t,"x",0)*a,s.y=this.getValue(t,"y",0)*a,s.scaleX=this.getValue(t,"scaleX",1),s.scaleY=this.getValue(t,"scaleY",1),s.rotation=this.getValue(t,"rotation",0),s.width=t.width*a,s.height=t.height*a,null!=(c=this.getValue(t,"color",null))&&s.color.setFromString(c),s.updateOffset(),s);case"boundingbox":s=this.attachmentLoader.newBoundingBoxAttachment(e,r);return null==s?null:(this.readVertices(t,s,t.vertexCount<<1),null!=(c=this.getValue(t,"color",null))&&s.color.setFromString(c),s);case"mesh":case"linkedmesh":var o=this.getValue(t,"path",r),s=this.attachmentLoader.newMeshAttachment(e,r,o);if(null==s)return null;s.path=o;null!=(c=this.getValue(t,"color",null))&&s.color.setFromString(c);var l=this.getValue(t,"parent",null);return null!=l?(s.inheritDeform=this.getValue(t,"deform",!0),this.linkedMeshes.push(new p(s,this.getValue(t,"skin",null),n,l))):(l=t.uvs,this.readVertices(t,s,l.length),s.triangles=t.triangles,s.regionUVs=l,s.updateUVs(),s.hullLength=2*this.getValue(t,"hull",0)),s;case"path":if(null==(o=this.attachmentLoader.newPathAttachment(e,r)))return null;o.closed=this.getValue(t,"closed",!1),o.constantSpeed=this.getValue(t,"constantSpeed",!0);var h=t.vertexCount;this.readVertices(t,o,h<<1);for(var u=$.Utils.newArray(h/3,0),d=0;d<t.lengths.length;d++)u[d]=t.lengths[d]*a;return o.lengths=u,null!=(c=this.getValue(t,"color",null))&&o.color.setFromString(c),o;case"point":l=this.attachmentLoader.newPointAttachment(e,r);return null==l?null:(l.x=this.getValue(t,"x",0)*a,l.y=this.getValue(t,"y",0)*a,l.rotation=this.getValue(t,"rotation",0),null!=(c=this.getValue(t,"color",null))&&l.color.setFromString(c),l);case"clipping":s=this.attachmentLoader.newClippingAttachment(e,r);if(null==s)return null;o=this.getValue(t,"end",null);if(null!=o){l=i.findSlot(o);if(null==l)throw new Error("Clipping end slot not found: "+o);s.endSlot=l}var c,h=t.vertexCount;return this.readVertices(t,s,h<<1),null!=(c=this.getValue(t,"color",null))&&s.color.setFromString(c),s}return null},P.prototype.readVertices=function(t,e,n){var r=this.scale,i=(e.worldVerticesLength=n,t.vertices);if(n==i.length){var a=$.Utils.toFloatArray(i);if(1!=r)for(var o=0,s=i.length;o<s;o++)a[o]*=r;e.vertices=a}else{for(var l=new Array,h=new Array,o=0,s=i.length;o<s;){var u=i[o++];h.push(u);for(var d=o+4*u;o<d;o+=4)h.push(i[o]),l.push(i[o+1]*r),l.push(i[o+2]*r),l.push(i[o+3])}e.bones=h,e.vertices=$.Utils.toFloatArray(l)}},P.prototype.readAnimation=function(t,N,e){var n=this.scale,r=new Array,i=0;if(t.slots)for(var a in t.slots){var o=t.slots[a];if(-1==(L=e.findSlotIndex(a)))throw new Error("Slot not found: "+a);for(y in o){var s=o[y];if("attachment"==y){(M=new $.AttachmentTimeline(s.length)).slotIndex=L;for(var l=0,h=0;h<s.length;h++){var u=s[h];M.setFrame(l++,u.time,u.name)}r.push(M),i=Math.max(i,M.frames[M.getFrameCount()-1])}else if("color"==y){(M=new $.ColorTimeline(s.length)).slotIndex=L;for(l=0,h=0;h<s.length;h++){var u=s[h],d=new $.Color;d.setFromString(u.color),M.setFrame(l,u.time,d.r,d.g,d.b,d.a),this.readCurve(u,M,l),l++}r.push(M),i=Math.max(i,M.frames[(M.getFrameCount()-1)*$.ColorTimeline.ENTRIES])}else{if("twoColor"!=y)throw new Error("Invalid timeline type for a slot: "+y+" ("+a+")");(M=new $.TwoColorTimeline(s.length)).slotIndex=L;for(l=0,h=0;h<s.length;h++){var u=s[h],c=new $.Color,p=new $.Color;c.setFromString(u.light),p.setFromString(u.dark),M.setFrame(l,u.time,c.r,c.g,c.b,c.a,p.r,p.g,p.b),this.readCurve(u,M,l),l++}r.push(M),i=Math.max(i,M.frames[(M.getFrameCount()-1)*$.TwoColorTimeline.ENTRIES])}}}if(t.bones)for(var f in t.bones){var U=t.bones[f],g=e.findBoneIndex(f);if(-1==g)throw new Error("Bone not found: "+f);for(y in U){s=U[y];if("rotate"===y){(M=new $.RotateTimeline(s.length)).boneIndex=g;for(l=0,h=0;h<s.length;h++){u=s[h];M.setFrame(l,u.time,u.angle),this.readCurve(u,M,l),l++}r.push(M),i=Math.max(i,M.frames[(M.getFrameCount()-1)*$.RotateTimeline.ENTRIES])}else{if("translate"!==y&&"scale"!==y&&"shear"!==y)throw new Error("Invalid timeline type for a bone: "+y+" ("+f+")");var M=null,m=1;"scale"===y?M=new $.ScaleTimeline(s.length):"shear"===y?M=new $.ShearTimeline(s.length):(M=new $.TranslateTimeline(s.length),m=n),M.boneIndex=g;for(l=0,h=0;h<s.length;h++){var u=s[h],B=this.getValue(u,"x",0),k=this.getValue(u,"y",0);M.setFrame(l,u.time,B*m,k*m),this.readCurve(u,M,l),l++}r.push(M),i=Math.max(i,M.frames[(M.getFrameCount()-1)*$.TranslateTimeline.ENTRIES])}}}if(t.ik)for(var v in t.ik){var x=t.ik[v],O=e.findIkConstraint(v);(M=new $.IkConstraintTimeline(x.length)).ikConstraintIndex=e.ikConstraints.indexOf(O);for(l=0,h=0;h<x.length;h++){u=x[h];M.setFrame(l,u.time,this.getValue(u,"mix",1),this.getValue(u,"bendPositive",!0)?1:-1),this.readCurve(u,M,l),l++}r.push(M),i=Math.max(i,M.frames[(M.getFrameCount()-1)*$.IkConstraintTimeline.ENTRIES])}if(t.transform)for(var v in t.transform){x=t.transform[v],O=e.findTransformConstraint(v);(M=new $.TransformConstraintTimeline(x.length)).transformConstraintIndex=e.transformConstraints.indexOf(O);for(l=0,h=0;h<x.length;h++){u=x[h];M.setFrame(l,u.time,this.getValue(u,"rotateMix",1),this.getValue(u,"translateMix",1),this.getValue(u,"scaleMix",1),this.getValue(u,"shearMix",1)),this.readCurve(u,M,l),l++}r.push(M),i=Math.max(i,M.frames[(M.getFrameCount()-1)*$.TransformConstraintTimeline.ENTRIES])}if(t.paths)for(var v in t.paths){var x=t.paths[v],A=e.findPathConstraintIndex(v);if(-1==A)throw new Error("Path constraint not found: "+v);var X=e.pathConstraints[A];for(y in x){s=x[y];if("position"===y||"spacing"===y){var M=null,m=1;"spacing"===y?(M=new $.PathConstraintSpacingTimeline(s.length),X.spacingMode!=$.SpacingMode.Length&&X.spacingMode!=$.SpacingMode.Fixed||(m=n)):(M=new $.PathConstraintPositionTimeline(s.length),X.positionMode==$.PositionMode.Fixed&&(m=n)),M.pathConstraintIndex=A;for(l=0,h=0;h<s.length;h++){u=s[h];M.setFrame(l,u.time,this.getValue(u,y,0)*m),this.readCurve(u,M,l),l++}r.push(M),i=Math.max(i,M.frames[(M.getFrameCount()-1)*$.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===y){(M=new $.PathConstraintMixTimeline(s.length)).pathConstraintIndex=A;for(l=0,h=0;h<s.length;h++){u=s[h];M.setFrame(l,u.time,this.getValue(u,"rotateMix",1),this.getValue(u,"translateMix",1)),this.readCurve(u,M,l),l++}r.push(M),i=Math.max(i,M.frames[(M.getFrameCount()-1)*$.PathConstraintMixTimeline.ENTRIES])}}}if(t.deform)for(var Y in t.deform){var W=t.deform[Y],G=e.findSkin(Y);if(null==G)throw new Error("Skin not found: "+Y);for(a in W){var y,o=W[a];if(-1==(L=e.findSlotIndex(a)))throw new Error("Slot not found: "+o.name);for(y in o){var s=o[y],w=G.getAttachment(L,y);if(null==w)throw new Error("Deform attachment not found: "+s.name);var z=null!=w.bones,T=w.vertices,q=z?T.length/3*2:T.length;(M=new $.DeformTimeline(s.length)).slotIndex=L,M.attachment=w;for(var l=0,E=0;E<s.length;E++){var u=s[E],b=void 0,R=this.getValue(u,"vertices",null);if(null==R)b=z?$.Utils.newFloatArray(q):T;else{var b=$.Utils.newFloatArray(q),H=this.getValue(u,"offset",0);if($.Utils.arrayCopy(R,0,b,H,R.length),1!=n)for(var j=(h=H)+R.length;h<j;h++)b[h]*=n;if(!z)for(h=0;h<q;h++)b[h]+=T[h]}M.setFrame(l,u.time,b),this.readCurve(u,M,l),l++}r.push(M),i=Math.max(i,M.frames[M.getFrameCount()-1])}}}var S=t.drawOrder;if(null!=(S=null==S?t.draworder:S)){for(var M=new $.DrawOrderTimeline(S.length),C=e.slots.length,l=0,E=0;E<S.length;E++){var Q=S[E],I=null,P=this.getValue(Q,"offsets",null);if(null!=P){for(var I=$.Utils.newArray(C,-1),Z=$.Utils.newArray(C-P.length,0),V=0,K=0,h=0;h<P.length;h++){var L,J=P[h];if(-1==(L=e.findSlotIndex(J.slot)))throw new Error("Slot not found: "+J.slot);for(;V!=L;)Z[K++]=V++;I[V+J.offset]=V++}for(;V<C;)Z[K++]=V++;for(h=C-1;0<=h;h--)-1==I[h]&&(I[h]=Z[--K])}M.setFrame(l++,Q.time,I)}r.push(M),i=Math.max(i,M.frames[M.getFrameCount()-1])}if(t.events){for(M=new $.EventTimeline(t.events.length),l=0,h=0;h<t.events.length;h++){var _=t.events[h],F=e.findEvent(_.name);if(null==F)throw new Error("Event not found: "+_.name);var D=new $.Event($.Utils.toSinglePrecision(_.time),F);D.intValue=this.getValue(_,"int",F.intValue),D.floatValue=this.getValue(_,"float",F.floatValue),D.stringValue=this.getValue(_,"string",F.stringValue),M.setFrame(l++,D)}r.push(M),i=Math.max(i,M.frames[M.getFrameCount()-1])}if(isNaN(i))throw new Error("Error while parsing animation, duration is NaN");e.animations.push(new $.Animation(N,r,i))},P.prototype.readCurve=function(t,e,n){t.curve&&("stepped"===t.curve?e.setStepped(n):"[object Array]"===Object.prototype.toString.call(t.curve)&&(t=t.curve,e.setCurve(n,t[0],t[1],t[2],t[3])))},P.prototype.getValue=function(t,e,n){return void 0!==t[e]?t[e]:n},P.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return $.BlendMode.Normal;if("additive"==t)return $.BlendMode.Additive;if("multiply"==t)return $.BlendMode.Multiply;if("screen"==t)return $.BlendMode.Screen;throw new Error("Unknown blend mode: "+t)},P.positionModeFromString=function(t){if("fixed"==(t=t.toLowerCase()))return $.PositionMode.Fixed;if("percent"==t)return $.PositionMode.Percent;throw new Error("Unknown position mode: "+t)},P.spacingModeFromString=function(t){if("length"==(t=t.toLowerCase()))return $.SpacingMode.Length;if("fixed"==t)return $.SpacingMode.Fixed;if("percent"==t)return $.SpacingMode.Percent;throw new Error("Unknown position mode: "+t)},P.rotateModeFromString=function(t){if("tangent"==(t=t.toLowerCase()))return $.RotateMode.Tangent;if("chain"==t)return $.RotateMode.Chain;if("chainscale"==t)return $.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+t)},P.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return $.TransformMode.Normal;if("onlytranslation"==t)return $.TransformMode.OnlyTranslation;if("norotationorreflection"==t)return $.TransformMode.NoRotationOrReflection;if("noscale"==t)return $.TransformMode.NoScale;if("noscaleorreflection"==t)return $.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},$.SkeletonJson=P;var p=function(t,e,n,r){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=r}}(spine=spine||{}),function(t){function e(t){if(this.attachments=new Array,null==t)throw new Error("name cannot be null.");this.name=t}e.prototype.addAttachment=function(t,e,n){if(null==n)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=n},e.prototype.getAttachment=function(t,e){t=this.attachments[t];return t?t[e]:null},e.prototype.attachAll=function(t,e){for(var n=0,r=0;r<t.slots.length;r++){var i=t.slots[r],a=i.getAttachment();if(a&&n<e.attachments.length){var o,s=e.attachments[n];for(o in s)if(a==s[o]){var l=this.getAttachment(n,o);null!=l&&i.setAttachment(l);break}}n++}},t.Skin=e}(spine=spine||{}),function(n){function t(t,e){if(this.attachmentVertices=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new n.Color,this.darkColor=null==t.darkColor?null:new n.Color,this.setToSetupPose()}t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},t.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},n.Slot=t}(spine=spine||{}),function(r){r.SlotData=function(t,e,n){if(this.color=new r.Color(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=n}}(spine=spine||{}),function(t){var e,n;function r(t){this._image=t}r.prototype.getImage=function(){return this._image},r.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return e.Nearest;case"linear":return e.Linear;case"mipmap":return e.MipMap;case"mipmapnearestnearest":return e.MipMapNearestNearest;case"mipmaplinearnearest":return e.MipMapLinearNearest;case"mipmapnearestlinear":return e.MipMapNearestLinear;case"mipmaplinearlinear":return e.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},r.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return n.MirroredRepeat;case"clamptoedge":return n.ClampToEdge;case"repeat":return n.Repeat;default:throw new Error("Unknown texture wrap "+t)}},t.Texture=r,(a=e=t.TextureFilter||(t.TextureFilter={}))[a.Nearest=9728]="Nearest",a[a.Linear=9729]="Linear",a[a.MipMap=9987]="MipMap",a[a.MipMapNearestNearest=9984]="MipMapNearestNearest",a[a.MipMapLinearNearest=9985]="MipMapLinearNearest",a[a.MipMapNearestLinear=9986]="MipMapNearestLinear",a[a.MipMapLinearLinear=9987]="MipMapLinearLinear",(a=n=t.TextureWrap||(t.TextureWrap={}))[a.MirroredRepeat=33648]="MirroredRepeat",a[a.ClampToEdge=33071]="ClampToEdge",a[a.Repeat=10497]="Repeat";t.TextureRegion=function(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0},i=t.Texture,__extends(o,i),o.prototype.setFilters=function(t,e){},o.prototype.setWraps=function(t,e){},o.prototype.dispose=function(){};var i,a=o;function o(){return null!==i&&i.apply(this,arguments)||this}t.FakeTexture=a}(spine=spine||{}),function(d){function t(t,e){this.pages=new Array,this.regions=new Array,this.load(t,e)}t.prototype.load=function(t,e){if(null==e)throw new Error("textureLoader cannot be null.");for(var n=new c(t),r=new Array(4),i=null;;){var a,o,s,l,h,u=n.readLine();if(null==u)break;0==(u=u.trim()).length?i=null:i?((a=new f).name=u,a.page=i,a.rotate="true"==n.readValue(),n.readTuple(r),h=parseInt(r[0]),o=parseInt(r[1]),n.readTuple(r),s=parseInt(r[0]),l=parseInt(r[1]),a.u=h/i.width,a.v=o/i.height,a.rotate?(a.u2=(h+l)/i.width,a.v2=(o+s)/i.height):(a.u2=(h+s)/i.width,a.v2=(o+l)/i.height),a.x=h,a.y=o,a.width=Math.abs(s),a.height=Math.abs(l),4==n.readTuple(r)&&4==n.readTuple(r)&&n.readTuple(r),a.originalWidth=parseInt(r[0]),a.originalHeight=parseInt(r[1]),n.readTuple(r),a.offsetX=parseInt(r[0]),a.offsetY=parseInt(r[1]),a.index=parseInt(n.readValue()),a.texture=i.texture,this.regions.push(a)):((i=new p).name=u,2==n.readTuple(r)&&(i.width=parseInt(r[0]),i.height=parseInt(r[1]),n.readTuple(r)),n.readTuple(r),i.minFilter=d.Texture.filterFromString(r[0]),i.magFilter=d.Texture.filterFromString(r[1]),h=n.readValue(),i.uWrap=d.TextureWrap.ClampToEdge,i.vWrap=d.TextureWrap.ClampToEdge,"x"==h?i.uWrap=d.TextureWrap.Repeat:"y"==h?i.vWrap=d.TextureWrap.Repeat:"xy"==h&&(i.uWrap=i.vWrap=d.TextureWrap.Repeat),i.texture=e(u),i.texture.setFilters(i.minFilter,i.magFilter),i.texture.setWraps(i.uWrap,i.vWrap),i.width=i.texture.getImage().width,i.height=i.texture.getImage().height,this.pages.push(i))}},t.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},t.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()},d.TextureAtlas=t;e.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},e.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},e.prototype.readTuple=function(t){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw new Error("Invalid line: "+e);for(var r=0,i=n+1;r<3;r++){var a=e.indexOf(",",i);if(-1==a)break;t[r]=e.substr(i,a-i).trim(),i=a+1}return t[r]=e.substring(i).trim(),r+1};var c=e,p=function(){};function e(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}d.TextureAtlasPage=p;n=d.TextureRegion,__extends(r,n);var n,f=r;function r(){return null!==n&&n.apply(this,arguments)||this}d.TextureAtlasRegion=f}(spine=spine||{}),function(b){function t(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new b.Vector2,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target,a=i.a,o=i.b,s=i.c,l=i.d,h=0<a*l-o*s?b.MathUtils.degRad:-b.MathUtils.degRad,u=this.data.offsetRotation*h,d=this.data.offsetShearY*h,c=this.bones,p=0,f=c.length;p<f;p++){var g,M,m,v,x,A,y,w,T=c[p],E=!1;0!=t&&(M=T.a,v=T.b,m=T.c,x=T.d,(y=Math.atan2(s,a)-Math.atan2(m,M)+u)>b.MathUtils.PI?y-=b.MathUtils.PI2:y<-b.MathUtils.PI&&(y+=b.MathUtils.PI2),y*=t,g=Math.cos(y),A=Math.sin(y),T.a=g*M-A*m,T.b=g*v-A*x,T.c=A*M+g*m,T.d=A*v+g*x,E=!0),0!=e&&(M=this.temp,i.localToWorld(M.set(this.data.offsetX,this.data.offsetY)),T.worldX+=(M.x-T.worldX)*e,T.worldY+=(M.y-T.worldY)*e,E=!0),0<n&&(w=Math.sqrt(T.a*T.a+T.c*T.c),m=Math.sqrt(a*a+s*s),1e-5<w&&(w=(w+(m-w+this.data.offsetScaleX)*n)/w),T.a*=w,T.c*=w,w=Math.sqrt(T.b*T.b+T.d*T.d),m=Math.sqrt(o*o+l*l),1e-5<w&&(w=(w+(m-w+this.data.offsetScaleY)*n)/w),T.b*=w,T.d*=w,E=!0),0<r&&(v=T.b,x=T.d,A=Math.atan2(x,v),(y=Math.atan2(l,o)-Math.atan2(s,a)-(A-Math.atan2(T.c,T.a)))>b.MathUtils.PI?y-=b.MathUtils.PI2:y<-b.MathUtils.PI&&(y+=b.MathUtils.PI2),y=A+(y+d)*r,w=Math.sqrt(v*v+x*x),T.b=Math.cos(y)*w,T.d=Math.sin(y)*w,E=!0),E&&(T.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target,a=i.a,o=i.b,s=i.c,l=i.d,h=0<a*l-o*s?b.MathUtils.degRad:-b.MathUtils.degRad,u=this.data.offsetRotation*h,d=this.data.offsetShearY*h,c=this.bones,p=0,f=c.length;p<f;p++){var g,M,m,v,x,A,y,w,T=c[p],E=!1;0!=t&&(v=T.a,A=T.b,g=T.c,y=T.d,(x=Math.atan2(s,a)+u)>b.MathUtils.PI?x-=b.MathUtils.PI2:x<-b.MathUtils.PI&&(x+=b.MathUtils.PI2),x*=t,M=Math.cos(x),m=Math.sin(x),T.a=M*v-m*g,T.b=M*A-m*y,T.c=m*v+M*g,T.d=m*A+M*y,E=!0),0!=e&&(v=this.temp,i.localToWorld(v.set(this.data.offsetX,this.data.offsetY)),T.worldX+=v.x*e,T.worldY+=v.y*e,E=!0),0<n&&(w=(Math.sqrt(a*a+s*s)-1+this.data.offsetScaleX)*n+1,T.a*=w,T.c*=w,w=(Math.sqrt(o*o+l*l)-1+this.data.offsetScaleY)*n+1,T.b*=w,T.d*=w,E=!0),0<r&&((x=Math.atan2(l,o)-Math.atan2(s,a))>b.MathUtils.PI?x-=b.MathUtils.PI2:x<-b.MathUtils.PI&&(x+=b.MathUtils.PI2),A=T.b,y=T.d,x=Math.atan2(y,A)+(x-b.MathUtils.PI/2+d)*r,w=Math.sqrt(A*A+y*y),T.b=Math.cos(x)*w,T.d=Math.sin(x)*w,E=!0),E&&(T.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();for(var a=this.bones,o=0,s=a.length;o<s;o++){var l,h=a[o],u=(h.appliedValid||h.updateAppliedTransform(),h.arotation),d=(0!=t&&(l=i.arotation-u+this.data.offsetRotation,u+=(l-=360*(16384-(16384.499999999996-l/360|0)))*t),h.ax),c=h.ay,p=(0!=e&&(d+=(i.ax-d+this.data.offsetX)*e,c+=(i.ay-c+this.data.offsetY)*e),h.ascaleX),f=h.ascaleY,g=(0<n&&(1e-5<p&&(p=(p+(i.ascaleX-p+this.data.offsetScaleX)*n)/p),1e-5<f)&&(f=(f+(i.ascaleY-f+this.data.offsetScaleY)*n)/f),h.ashearY);0<r&&(l=i.ashearY-g+this.data.offsetShearY,l-=360*(16384-(16384.499999999996-l/360|0)),h.shearY+=l*r),h.updateWorldTransformWith(d,c,u,p,f,h.ashearX,g)}},t.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();for(var a=this.bones,o=0,s=a.length;o<s;o++){var l=a[o],h=(l.appliedValid||l.updateAppliedTransform(),l.arotation),u=(0!=t&&(h+=(i.arotation+this.data.offsetRotation)*t),l.ax),d=l.ay,c=(0!=e&&(u+=(i.ax+this.data.offsetX)*e,d+=(i.ay+this.data.offsetY)*e),l.ascaleX),p=l.ascaleY,f=(0<n&&(1e-5<c&&(c*=(i.ascaleX-1+this.data.offsetScaleX)*n+1),1e-5<p)&&(p*=(i.ascaleY-1+this.data.offsetScaleY)*n+1),l.ashearY);0<r&&(f+=(i.ashearY+this.data.offsetShearY)*r),l.updateWorldTransformWith(u,d,h,c,p,l.ashearX,f)}},t.prototype.getOrder=function(){return this.data.order},b.TransformConstraint=t}(spine=spine||{}),(spine||(spine={})).TransformConstraintData=function(t){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,null==t)throw new Error("name cannot be null.");this.name=t},function(t){function X(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool(function(){return new Array}),this.polygonIndicesPool=new t.Pool(function(){return new Array})}X.prototype.triangulate=function(t){for(var e=t,n=t.length>>1,r=this.indicesArray,i=r.length=0;i<n;i++)r[i]=i;for(var a=this.isConcaveArray,i=a.length=0,o=n;i<o;++i)a[i]=X.isConcave(i,n,e,r);var s=this.triangles;for(s.length=0;3<n;){for(var l=n-1,i=0,h=1;;){t:if(!a[i]){for(var u=r[l]<<1,d=r[i]<<1,c=r[h]<<1,p=e[u],f=e[1+u],g=e[d],M=e[1+d],m=e[c],v=e[1+c],x=(h+1)%n;x!=l;x=(x+1)%n)if(a[x]){var A=r[x]<<1,y=e[A],A=e[1+A];if(X.positiveArea(m,v,p,f,y,A)&&X.positiveArea(p,f,g,M,y,A)&&X.positiveArea(g,M,m,v,y,A))break t}break}if(0==h){for(;a[i]&&0<--i;);break}l=i,h=((i=h)+1)%n}s.push(r[(n+i-1)%n]),s.push(r[i]),s.push(r[(i+1)%n]),r.splice(i,1),a.splice(i,1);var w=(--n+i-1)%n,T=i==n?0:i;a[w]=X.isConcave(w,n,e,r),a[T]=X.isConcave(T,n,e,r)}return 3==n&&(s.push(r[2]),s.push(r[0]),s.push(r[1])),s},X.prototype.decompose=function(N,t){for(var e=N,n=this.convexPolygons,r=(this.polygonPool.freeAll(n),n.length=0,this.convexPolygonsIndices),i=(this.polygonIndicesPool.freeAll(r),r.length=0,this.polygonIndicesPool.obtain()),a=(i.length=0,this.polygonPool.obtain()),o=-1,s=a.length=0,l=0,h=t.length;l<h;l+=3){var u=t[l]<<1,d=t[l+1]<<1,c=t[l+2]<<1,p=e[u],f=e[1+u],g=e[d],M=e[1+d],m=e[c],v=e[1+c],x=!1;o==u&&(A=a.length-4,R=X.winding(a[A],a[A+1],a[A+2],a[A+3],m,v),S=X.winding(m,v,a[0],a[1],a[2],a[3]),R==s)&&S==s&&(a.push(m),a.push(v),i.push(c),x=!0),x||(0<a.length?(n.push(a),r.push(i)):(this.polygonPool.free(a),this.polygonIndicesPool.free(i)),(a=this.polygonPool.obtain()).length=0,a.push(p),a.push(f),a.push(g),a.push(M),a.push(m),a.push(v),(i=this.polygonIndicesPool.obtain()).length=0,i.push(u),i.push(d),i.push(c),s=X.winding(p,f,g,M,m,v),o=u)}0<a.length&&(n.push(a),r.push(i));for(l=0,h=n.length;l<h;l++)if(0!=(i=r[l]).length)for(var A,y,w,T,E,b,R,S,U=i[0],B=i[i.length-1],C=(a=n[l])[A=a.length-4],I=a[A+1],P=a[A+2],V=a[A+3],L=a[0],_=a[1],k=a[2],O=a[3],F=X.winding(C,I,P,V,L,_),D=0;D<h;D++)D!=l&&3==(y=r[D]).length&&(w=y[0],T=y[1],E=y[2],m=(b=n[D])[b.length-2],v=b[b.length-1],w==U)&&T==B&&(R=X.winding(C,I,P,V,m,v),S=X.winding(m,v,L,_,k,O),R==F)&&S==F&&(b.length=0,y.length=0,a.push(m),a.push(v),i.push(E),C=P,I=V,P=m,V=v,D=0);for(l=n.length-1;0<=l;l--)0==(a=n[l]).length&&(n.splice(l,1),this.polygonPool.free(a),i=r[l],r.splice(l,1),this.polygonIndicesPool.free(i));return n},X.isConcave=function(t,e,n,r){var i=r[(e+t-1)%e]<<1,a=r[t]<<1,r=r[(t+1)%e]<<1;return!this.positiveArea(n[i],n[1+i],n[a],n[1+a],n[r],n[1+r])},X.positiveArea=function(t,e,n,r,i,a){return 0<=t*(a-r)+n*(e-a)+i*(r-e)},X.winding=function(t,e,n,r,i,a){n-=t,r-=e;return 0<=i*r-a*n+n*e-t*r?1:-1},t.Triangulator=X}(spine=spine||{}),function(t){function e(){this.array=new Array}function n(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.r=t=void 0===t?0:t,this.g=e,this.b=n,this.a=r}function r(){}e.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},e.prototype.contains=function(t){return null!=this.array[0|t]},e.prototype.remove=function(t){this.array[0|t]=void 0},e.prototype.clear=function(){this.array.length=0},t.IntSet=e,n.prototype.set=function(t,e,n,r){return this.r=t,this.g=e,this.b=n,this.a=r,this.clamp(),this},n.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},n.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},n.prototype.add=function(t,e,n,r){return this.r+=t,this.g+=e,this.b+=n,this.a+=r,this.clamp(),this},n.prototype.clamp=function(){return this.r<0?this.r=0:1<this.r&&(this.r=1),this.g<0?this.g=0:1<this.g&&(this.g=1),this.b<0?this.b=0:1<this.b&&(this.b=1),this.a<0?this.a=0:1<this.a&&(this.a=1),this},n.WHITE=new n(1,1,1,1),n.RED=new n(1,0,0,1),n.GREEN=new n(0,1,0,1),n.BLUE=new n(0,0,1,1),n.MAGENTA=new n(1,0,1,1),t.Color=n,r.clamp=function(t,e,n){return t<e?e:n<t?n:t},r.cosDeg=function(t){return Math.cos(t*r.degRad)},r.sinDeg=function(t){return Math.sin(t*r.degRad)},r.signum=function(t){return 0<t?1:t<0?-1:0},r.toInt=function(t){return 0<t?Math.floor(t):Math.ceil(t)},r.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},r.randomTriangular=function(t,e){return r.randomTriangularWith(t,e,.5*(t+e))},r.randomTriangularWith=function(t,e,n){var r=Math.random(),i=e-t;return r<=(n-t)/i?t+Math.sqrt(r*i*(n-t)):e-Math.sqrt((1-r)*i*(e-n))},r.PI2=2*(r.PI=3.1415927),r.radDeg=r.radiansToDegrees=180/r.PI,r.degRad=r.degreesToRadians=r.PI/180,t.MathUtils=r;a.prototype.apply=function(t,e,n){return t+(e-t)*this.applyInternal(n)};var i=a;function a(){}t.Interpolation=i;__extends(s,o=i),s.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1};var o,i=s;function s(t){var e=o.call(this)||this;return e.power=2,e.power=t,e}t.Pow=i;__extends(h,l=i),h.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1};var l,i=h;function h(t){return l.call(this,t)||this}function u(){}function d(){}function c(t){this.items=new Array,this.instantiator=t}function p(t,e){void 0===e&&(e=0),this.x=t=void 0===t?0:t,this.y=e}function f(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}function g(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}t.PowOut=i,u.arrayCopy=function(t,e,n,r,i){for(var a=e,o=r;a<e+i;a++,o++)n[o]=t[a]},u.setArraySize=function(t,e,n){void 0===n&&(n=0);var r=t.length;if(r!=e&&r<(t.length=e))for(var i=r;i<e;i++)t[i]=n;return t},u.ensureArrayCapacity=function(t,e,n){return void 0===n&&(n=0),t.length>=e?t:u.setArraySize(t,e,n)},u.newArray=function(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n},u.newFloatArray=function(t){if(u.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var e=new Array(t),n=0;n<e.length;n++)e[n]=0;return e},u.newShortArray=function(t){if(u.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var e=new Array(t),n=0;n<e.length;n++)e[n]=0;return e},u.toFloatArray=function(t){return u.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},u.toSinglePrecision=function(t){return u.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},u.webkit602BugfixHelper=function(t,e){},u.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t.Utils=u,d.logBones=function(t){for(var e=0;e<t.bones.length;e++){var n=t.bones[e];console.log(n.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.worldX+", "+n.worldY)}},t.DebugUtils=d,c.prototype.obtain=function(){return 0<this.items.length?this.items.pop():this.instantiator()},c.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},c.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},c.prototype.clear=function(){this.items.length=0},t.Pool=c,p.prototype.set=function(t,e){return this.x=t,this.y=e,this},p.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},p.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t.Vector2=p,f.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t.TimeKeeper=f,g.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},g.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},g.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t.WindowedMean=g}(spine=spine||{}),function(){var e;Math.fround||(Math.fround=(e=new Float32Array(1),function(t){return e[0]=t,e[0]}))}(),function(t){function e(t){if(null==t)throw new Error("name cannot be null.");this.name=t}t.Attachment=e,__extends(i,n=e),i.prototype.computeWorldVertices=function(t,e,n,r,i,a){n=i+(n>>1)*a;var o=t.bone.skeleton,s=t.attachmentVertices,l=this.vertices,h=this.bones;if(null!=h){for(var u=0,d=0,c=0;c<e;c+=2)u+=(v=h[u])+1,d+=v;var p=o.bones;if(0==s.length)for(var f=i,g=3*d;f<n;f+=a){var M=0,m=0,v=h[u++];for(v+=u;u<v;u++,g+=3){var x=p[h[u]],A=l[g],y=l[g+1],w=l[g+2];M+=(A*x.a+y*x.b+x.worldX)*w,m+=(A*x.c+y*x.d+x.worldY)*w}r[f]=M,r[f+1]=m}else for(var T=s,f=i,g=3*d,E=d<<1;f<n;f+=a){M=0,m=0,v=h[u++];for(v+=u;u<v;u++,g+=3,E+=2){x=p[h[u]],A=l[g]+T[E],y=l[g+1]+T[E+1],w=l[g+2];M+=(A*x.a+y*x.b+x.worldX)*w,m+=(A*x.c+y*x.d+x.worldY)*w}r[f]=M,r[f+1]=m}}else{0<s.length&&(l=s);for(var b=(x=t.bone).worldX,R=x.worldY,S=x.a,g=x.b,C=x.c,I=x.d,P=e,f=i;f<n;P+=2,f+=a){A=l[P],y=l[P+1];r[f]=A*S+y*g+b,r[f+1]=A*C+y*I+R}}},i.prototype.applyDeform=function(t){return this==t},i.nextID=0;var n,r=i;function i(t){t=n.call(this,t)||this;return t.id=(65535&i.nextID++)<<11,t.worldVerticesLength=0,t}t.VertexAttachment=r}(spine=spine||{}),function(t){(t=t.AttachmentType||(t.AttachmentType={}))[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(spine=spine||{}),function(e){n=e.VertexAttachment,__extends(r,n);var n,t=r;function r(t){t=n.call(this,t)||this;return t.color=new e.Color(1,1,1,1),t}e.BoundingBoxAttachment=t}(spine=spine||{}),function(e){n=e.VertexAttachment,__extends(r,n);var n,t=r;function r(t){t=n.call(this,t)||this;return t.color=new e.Color(.2275,.2275,.8078,1),t}e.ClippingAttachment=t}(spine=spine||{}),function(l){e=l.VertexAttachment,__extends(n,e),n.prototype.updateUVs=function(){var t=0,e=0,n=0,r=0,i=(null==this.region?(t=e=0,n=r=1):(t=this.region.u,e=this.region.v,n=this.region.u2-t,r=this.region.v2-e),this.regionUVs),a=(null!=this.uvs&&this.uvs.length==i.length||(this.uvs=l.Utils.newFloatArray(i.length)),this.uvs);if(this.region.rotate)for(var o=0,s=a.length;o<s;o+=2)a[o]=t+i[o+1]*n,a[o+1]=e+r-i[o]*r;else for(o=0,s=a.length;o<s;o+=2)a[o]=t+i[o]*n,a[o+1]=e+i[o+1]*r},n.prototype.applyDeform=function(t){return this==t||this.inheritDeform&&this.parentMesh==t},n.prototype.getParentMesh=function(){return this.parentMesh},n.prototype.setParentMesh=function(t){null!=(this.parentMesh=t)&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)};var e,t=n;function n(t){t=e.call(this,t)||this;return t.color=new l.Color(1,1,1,1),t.inheritDeform=!1,t.tempColor=new l.Color(0,0,0,0),t}l.MeshAttachment=t}(spine=spine||{}),function(e){n=e.VertexAttachment,__extends(r,n);var n,t=r;function r(t){t=n.call(this,t)||this;return t.closed=!1,t.constantSpeed=!1,t.color=new e.Color(1,1,1,1),t}e.PathAttachment=t}(spine=spine||{}),function(i){e=i.VertexAttachment,__extends(n,e),n.prototype.computeWorldPosition=function(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e},n.prototype.computeWorldRotation=function(t){var e=i.MathUtils.cosDeg(this.rotation),n=i.MathUtils.sinDeg(this.rotation),r=e*t.a+n*t.b,e=e*t.c+n*t.d;return Math.atan2(e,r)*i.MathUtils.radDeg};var e,t=n;function n(t){t=e.call(this,t)||this;return t.color=new i.Color(.38,.94,0,1),t}i.PointAttachment=t}(spine=spine||{}),function(e){n=e.Attachment,__extends(c,n),c.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,r=-this.height/2*this.scaleY+this.region.offsetY*e,t=n+this.region.width*t,e=r+this.region.height*e,i=this.rotation*Math.PI/180,a=Math.cos(i),i=Math.sin(i),o=n*a+this.x,n=n*i,s=r*a+this.y,r=r*i,l=t*a+this.x,t=t*i,a=e*a+this.y,e=e*i,i=this.offset;i[c.OX1]=o-r,i[c.OY1]=s+n,i[c.OX2]=o-e,i[c.OY2]=a+n,i[c.OX3]=l-e,i[c.OY3]=a+t,i[c.OX4]=l-r,i[c.OY4]=s+t},c.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},c.prototype.computeWorldVertices=function(t,e,n,r){var i=this.offset,a=t.worldX,o=t.worldY,s=t.a,l=t.b,h=t.c,t=t.d,u=i[c.OX1],d=i[c.OY1];e[n]=u*s+d*l+a,e[n+1]=u*h+d*t+o,u=i[c.OX2],d=i[c.OY2],e[n+=r]=u*s+d*l+a,e[n+1]=u*h+d*t+o,u=i[c.OX3],d=i[c.OY3],e[n+=r]=u*s+d*l+a,e[n+1]=u*h+d*t+o,u=i[c.OX4],d=i[c.OY4],e[n+=r]=u*s+d*l+a,e[n+1]=u*h+d*t+o},c.OX1=0,c.OY1=1,c.OX2=2,c.OY2=3,c.OX3=4,c.OY3=5,c.OX4=6,c.OY4=7,c.X1=0,c.Y1=1,c.C1R=2,c.C1G=3,c.C1B=4,c.C1A=5,c.U1=6,c.V1=7,c.X2=8,c.Y2=9,c.C2R=10,c.C2G=11,c.C2B=12,c.C2A=13,c.U2=14,c.V2=15,c.X3=16,c.Y3=17,c.C3R=18,c.C3G=19,c.C3B=20,c.C3A=21,c.U3=22,c.V3=23,c.X4=24,c.Y4=25,c.C4R=26,c.C4G=27,c.C4B=28,c.C4A=29,c.U4=30,c.V4=31;var n,t=c;function c(t){t=n.call(this,t)||this;return t.x=0,t.y=0,t.scaleX=1,t.scaleY=1,t.rotation=0,t.width=0,t.height=0,t.color=new e.Color(1,1,1,1),t.offset=e.Utils.newFloatArray(8),t.uvs=e.Utils.newFloatArray(8),t.tempColor=new e.Color(1,1,1,1),t}e.RegionAttachment=t}(spine=spine||{}),function(i){function t(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}t.prototype.begin=function(t){},t.prototype.transform=function(t,e,n,r){t.x+=i.MathUtils.randomTriangular(-this.jitterX,this.jitterY),t.y+=i.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},i.JitterEffect=t}(spine=spine||{}),function(l){h.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},h.prototype.transform=function(t,e,n,r){var i=this.angle*l.MathUtils.degreesToRadians,a=t.x-this.worldX,o=t.y-this.worldY,s=Math.sqrt(a*a+o*o);s<this.radius&&(i=h.interpolation.apply(0,i,(this.radius-s)/this.radius),s=Math.cos(i),i=Math.sin(i),t.x=s*a-i*o+this.worldX,t.y=i*a+s*o+this.worldY)},h.prototype.end=function(){},h.interpolation=new l.PowOut(2);var t=h;function h(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}l.SwirlEffect=t}(spine=spine||{}),function(n){var t,r;function e(e,t){return r.call(this,function(t){return new n.webgl.GLTexture(e,t)},t=void 0===t?"":t)||this}t=n.webgl||(n.webgl={}),r=n.AssetManager,__extends(e,r),t.AssetManager=e}(spine=spine||{}),function(t){var n;function e(t,e){this.position=new n.Vector3(0,0,0),this.direction=new n.Vector3(0,0,-1),this.up=new n.Vector3(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new n.Matrix4,this.inverseProjectionView=new n.Matrix4,this.projection=new n.Matrix4,this.view=new n.Matrix4,this.tmp=new n.Vector3,this.viewportWidth=t,this.viewportHeight=e,this.update()}n=t.webgl||(t.webgl={}),e.prototype.update=function(){var t=this.projection,e=this.view,n=this.projectionView,r=this.inverseProjectionView,i=this.zoom,a=this.viewportWidth,o=this.viewportHeight;t.ortho(i*(-a/2),i*(a/2),i*(-o/2),i*(o/2),this.near,this.far),e.lookAt(this.position,this.direction,this.up),n.set(t.values),n.multiply(e),r.set(n.values).invert()},e.prototype.screenToWorld=function(t,e,n){var r=t.x,i=n-t.y-1,a=this.tmp;return a.x=2*r/e-1,a.y=2*i/n-1,a.z=2*t.z-1,a.project(this.inverseProjectionView),t.set(a.x,a.y,a.z),t},e.prototype.setViewport=function(t,e){this.viewportWidth=t,this.viewportHeight=e},n.OrthoCamera=e}(spine=spine||{}),function(t){var r,i;function e(t,e,n){void 0===n&&(n=!1);e=i.call(this,e)||this;return e.texture=null,e.boundUnit=0,e.useMipMaps=!1,e.context=t instanceof r.ManagedWebGLRenderingContext?t:new r.ManagedWebGLRenderingContext(t),e.useMipMaps=n,e.restore(),e.context.addRestorable(e),e}r=t.webgl||(t.webgl={}),i=t.Texture,__extends(e,i),e.prototype.setFilters=function(t,e){var n=this.context.gl;this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e)},e.prototype.setWraps=function(t,e){var n=this.context.gl;this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e)},e.prototype.update=function(t){var e=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._image),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t&&e.generateMipmap(e.TEXTURE_2D)},e.prototype.restore=function(){this.texture=null,this.update(this.useMipMaps)},e.prototype.bind=function(t){var e=this.context.gl;this.boundUnit=t=void 0===t?0:t,e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},e.prototype.unbind=function(){var t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)},e.prototype.dispose=function(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)},r.GLTexture=e}(spine=spine||{}),function(e){var t;function n(t){this.lastX=0,this.lastY=0,this.buttonDown=!1,this.currTouch=null,this.touchesPool=new e.Pool(function(){return new e.webgl.Touch(0,0,0)}),this.listeners=new Array,this.element=t,this.setupCallbacks(t)}t=e.webgl||(e.webgl={}),n.prototype.setupCallbacks=function(h){var u=this;h.addEventListener("mousedown",function(t){if(t instanceof MouseEvent){for(var e=h.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top,i=u.listeners,a=0;a<i.length;a++)i[a].down(n,r);u.lastX=n,u.lastY=r,u.buttonDown=!0}},!0),h.addEventListener("mousemove",function(t){if(t instanceof MouseEvent){for(var e=h.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top,i=u.listeners,a=0;a<i.length;a++)u.buttonDown?i[a].dragged(n,r):i[a].moved(n,r);u.lastX=n,u.lastY=r}},!0),h.addEventListener("mouseup",function(t){if(t instanceof MouseEvent){for(var e=h.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top,i=u.listeners,a=0;a<i.length;a++)i[a].up(n,r);u.lastX=n,u.lastY=r,u.buttonDown=!1}},!0),h.addEventListener("touchstart",function(t){if(null==u.currTouch){for(var e=t.changedTouches,n=0;n<e.length;n++){var r=e[n],i=h.getBoundingClientRect(),a=r.clientX-i.left,i=r.clientY-i.top;u.currTouch=u.touchesPool.obtain(),u.currTouch.identifier=r.identifier,u.currTouch.x=a,u.currTouch.y=i;break}for(var o=u.listeners,s=0;s<o.length;s++)o[s].down(u.currTouch.x,u.currTouch.y);console.log("Start "+u.currTouch.x+", "+u.currTouch.y),u.lastX=u.currTouch.x,u.lastY=u.currTouch.y,u.buttonDown=!0,t.preventDefault()}},!1),h.addEventListener("touchend",function(t){for(var e=t.changedTouches,n=0;n<e.length;n++){var r=e[n];if(u.currTouch.identifier===r.identifier){var i=h.getBoundingClientRect(),a=u.currTouch.x=r.clientX-i.left,o=u.currTouch.y=r.clientY-i.top;u.touchesPool.free(u.currTouch);for(var s=u.listeners,l=0;l<s.length;l++)s[l].up(a,o);console.log("End "+a+", "+o),u.lastX=a,u.lastY=o,u.buttonDown=!1,u.currTouch=null;break}}t.preventDefault()},!1),h.addEventListener("touchcancel",function(t){for(var e=t.changedTouches,n=0;n<e.length;n++){var r=e[n];if(u.currTouch.identifier===r.identifier){var i=h.getBoundingClientRect(),a=u.currTouch.x=r.clientX-i.left,o=u.currTouch.y=r.clientY-i.top;u.touchesPool.free(u.currTouch);for(var s=u.listeners,l=0;l<s.length;l++)s[l].up(a,o);console.log("End "+a+", "+o),u.lastX=a,u.lastY=o,u.buttonDown=!1,u.currTouch=null;break}}t.preventDefault()},!1),h.addEventListener("touchmove",function(t){if(null!=u.currTouch){for(var e=t.changedTouches,n=0;n<e.length;n++){var r=e[n];if(u.currTouch.identifier===r.identifier){for(var i=h.getBoundingClientRect(),a=r.clientX-i.left,o=r.clientY-i.top,s=u.listeners,l=0;l<s.length;l++)s[l].dragged(a,o);console.log("Drag "+a+", "+o),u.lastX=u.currTouch.x=a,u.lastY=u.currTouch.y=o;break}}t.preventDefault()}},!1)},n.prototype.addListener=function(t){this.listeners.push(t)},n.prototype.removeListener=function(t){t=this.listeners.indexOf(t);-1<t&&this.listeners.splice(t,1)},t.Input=n,t.Touch=function(t,e,n){this.identifier=t,this.x=e,this.y=n}}(spine=spine||{}),function(e){var h;function u(t){this.logo=null,this.spinner=null,this.angle=0,this.fadeOut=0,this.timeKeeper=new e.TimeKeeper,this.backgroundColor=new e.Color(.135,.135,.135,1),this.tempColor=new e.Color,this.firstDraw=0,this.renderer=t,this.timeKeeper.maxDelta=9,null===u.logoImg&&(t=-1<navigator.userAgent.indexOf("Safari"),u.logoImg=new Image,u.logoImg.src=u.SPINE_LOGO_DATA,t||(u.logoImg.crossOrigin="anonymous"),u.logoImg.onload=function(t){u.loaded++},u.spinnerImg=new Image,u.spinnerImg.src=u.SPINNER_DATA,t||(u.spinnerImg.crossOrigin="anonymous"),u.spinnerImg.onload=function(t){u.loaded++})}h=e.webgl||(e.webgl={}),u.prototype.draw=function(t){if(!((t=void 0===t?!1:t)&&this.fadeOut>u.FADE_SECONDS)){this.timeKeeper.update();var e,n,r=Math.abs(Math.sin(this.timeKeeper.totalTime+.75)),i=(this.angle-=360*this.timeKeeper.delta*(1+1.5*Math.pow(r,5)),this.renderer),a=i.canvas,o=i.context.gl,s=i.camera.position.x,l=i.camera.position.y;if(i.camera.position.set(a.width/2,a.height/2,0),i.camera.viewportWidth=a.width,i.camera.viewportHeight=a.height,i.resize(h.ResizeMode.Stretch),t){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>u.FADE_SECONDS)return void i.camera.position.set(s,l,0);r=1-this.fadeOut/u.FADE_SECONDS,this.tempColor.setFromColor(this.backgroundColor),this.tempColor.a=1-(r-1)*(r-1),i.begin(),i.quad(!0,0,0,a.width,0,a.width,a.height,0,a.height,this.tempColor,this.tempColor,this.tempColor,this.tempColor),i.end()}else o.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),o.clear(o.COLOR_BUFFER_BIT),this.tempColor.a=1;this.tempColor.set(1,1,1,this.tempColor.a),2==u.loaded&&(null===this.logo&&(this.logo=new h.GLTexture(i.context,u.logoImg),this.spinner=new h.GLTexture(i.context,u.spinnerImg)),this.logo.update(!1),this.spinner.update(!1),t=this.logo.getImage().width,r=this.logo.getImage().height,e=this.spinner.getImage().width,n=this.spinner.getImage().height,i.batcher.setBlendMode(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),i.begin(),i.drawTexture(this.logo,(a.width-t)/2,(a.height-r)/2,t,r,this.tempColor),i.drawTextureRotated(this.spinner,(a.width-e)/2,(a.height-n)/2,e,n,e/2,n/2,this.angle,this.tempColor),i.end(),i.camera.position.set(s,l,0))}},u.FADE_SECONDS=1,u.loaded=0,u.spinnerImg=null,u.logoImg=null,u.SPINNER_DATA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAChCAMAAAB3TUS6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAYNQTFRFAAAA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AAkTDRyAAAAIB0Uk5TAAABAgMEBQYHCAkKCwwODxAREhMUFRYXGBkaHB0eICEiIyQlJicoKSorLC0uLzAxMjM0Nzg5Ojs8PT4/QEFDRUlKS0xNTk9QUlRWWFlbXF1eYWJjZmhscHF0d3h5e3x+f4CIiYuMj5GSlJWXm56io6arr7rAxcjO0dXe6Onr8fmb5sOOAAADuElEQVQYGe3B+3vTVBwH4M/3nCRt13br2Lozhug2q25gYQubcxqVKYoMCYoKjEsUdSpeiBc0Kl7yp9t2za39pely7PF5zvuiQKc+/e2f8K+f9g2oyQ77Ag4VGX+HketQ0XYYe0JQ0CdhogwF+WFiBgr6JkxUoKCDMMGgoP0w9gdUtB3GfoCKVsPYAVQ0H8YuQUWVMHYGKuJhrAklPQkjJpT0bdj3O9S0FfZ9ADXxP8MjVSiqFfa8B2VVV8+df14QtB4iwn+BpuZEgyM38WMQHDYhnbkgukrIh5ygZ48glyn6KshlL+jbhVRcxCzk0ApiC5CI5kVsgTAy9jiI/WxBGmqIFBMjqwYphwRZaiLNwsjqQdoVSFISGRwjM4OMFUjBRcYCYWT0XZD2SwUS0LzIKCGH2SDja0LxKiJjCrm0gowVFI6aIs1CTouPg5QvUTgSKXMMuVUeBSmEopFITBPGwO8HCYbCTYtImTAWejuI3CMUjmZFT5NjbM/9GvQcMkhADdFRIxxD7aug4wGDFGSVTcLx0MzutQ2CpmmapmmapmmapmmapmmaphWBmGFV6rNNcaLC0GUuv3LROftUo8wJk0a10207sVED6IIf+9673LIwQeW2PaCEJX/A+xYmhTbtQUu46g96SJgQZg9Zwxf+EAMTwuwhm3jkD7EwIdweBn+YhQlh9pA2HvpDTEwIs4es4GN/CMekNOxBJ9D2B10nTAyfW7fT1hjYgZ/xYIUwUcycaiwuv2h3tOcZADr7ud/12c0ru2cWSwQ1UAcixIgImqZpmqZpmqZpmqZpmqZp2v8HMSIcF186t8oghbnlOJt1wnHwl7yOGxwSlHacrjWG8dVuej03OApn7jhHtiyMiZa9yD6haLYTebWOsbDXvQRHwchJWSTkV/rQS+EoWttJaTHkJe56KXcJRZt20jY48nnBy9hE4WjLSbvAkIfwMm5zFG/KyWgRRke3vYwGZDjpZHCMruJltCAFrTtpVYxu1ktzCHKwbSdlGqOreynXGGQpOylljI5uebFbBuSZc2IbhBxmvcj9GiSiZ52+HQO5nPb6TkIqajs9L5eQk7jnddxZgGT0jNOxYSI36+Kdj9oG5OPV6QpB6yJuGAYnqIrecLveYlDUKffIOtREl90+BiWV3cgMlNR0I09DSS030oaSttzILpT0phu5BBWRmyAoiLkJgoIMN8GgoJKb4FBQzU0YUFDdTRhQUNVNcCjIdBMEBdE7buQ8lFRz+97lUFN5fe+qu//aMkeB/gU2ae9y2HgbngAAAABJRU5ErkJggg==",u.SPINE_LOGO_DATA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAZCAYAAACis3k0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtNJREFUaN7tmT2I1EAUxwN+oWgRT0HFKo0WCkJ6ObmAWFwZbCxsXGysLNJaiCyIoDaSwk4ETzvhmnBaCRbBWoQ01ho4PwotjP8cE337mMy8TLK757mBH3fLTWbe/PbN53neNniqZW8FvAVvQAqugwvgDDgO9niLRyTyJagM/ACPF6bsIl9ZRDac/Cc6tLn5xQdRQ496QlKPLxD5QCDxO9jtGM8QfYoIgUlgCipGCRJL5VvlyOdCU09iEXkCfLSIfCrs7Fab6nOsiafu06iDwES9w/uU1QnDC+ekkVS9vEaDsgVeB0d+z1VDtOGxRaYPboP3Gokb4GgXkZp4chZPJKgvZ3U0XkriK/TIt9YUDllFgTAjGwoaoHqfBhMI58yD4BQ4V6/aHYdfxToftvw9F2SiVroawU2/Cv5C4Thv0KB9S5nxlOd4STxjwUjzSdYlgrYijw2BsEfgsaFcM09lhiys94xXQQwugcvgJrgFLjrEE7WUiTuWCQzt/ZXN7FfqGwuGClyVy2xZAFmfDQvNtwFFSspMDGsD+UTWqu1KoVmVooFEJgKRXw0if85RpISEzwsjzeqWzkjkC4PIJ3MUmQgITAHlQwTFhnZhELkEntfZRwR+AvfAgXmJHOqU02XligWT8ppg67NXbdCXeq7afUQ6L8C2DalEZNt2YyQ94Qy8/ekjMpBMbfyl5iTjG7YAI8cNecROAb4kJmTjaXAF3AGvwQewOiuRxEtlSaT4j2h2lMsUueQEoMlIKpTvAmKhxPMtC876jEX6rE8l8TNx/KVbn6xlWU9NWcSDUsO4NGWpQOTZFpHPOooMXcswmW2XFk3ixb2v0Nq+XVKP00QNaffBLyWwBI/AkTlfMYZDXMf12kc6yjwEjoFdO/5me5oi/6tnyhlZX6OtgmX1c2Uh0k3khmbB2b9TRfpd/jfTUeRDJvHdYg5wE7kPXAN3wQ1weDvH+xufEgpi5qIl3QAAAABJRU5ErkJggg==",h.LoadingScreen=u}(spine=spine||{}),function(t){var h;function o(){this.temp=new Float32Array(16),this.values=new Float32Array(16);var t=this.values;t[h.M00]=1,t[h.M11]=1,t[h.M22]=1,t[h.M33]=1}(h=t.webgl||(t.webgl={})).M00=0,h.M01=4,h.M02=8,h.M03=12,h.M10=1,h.M11=5,h.M12=9,h.M13=13,h.M20=2,h.M21=6,h.M22=10,h.M23=14,h.M30=3,h.M31=7,h.M32=11,h.M33=15,o.prototype.set=function(t){return this.values.set(t),this},o.prototype.transpose=function(){var t=this.temp,e=this.values;return t[h.M00]=e[h.M00],t[h.M01]=e[h.M10],t[h.M02]=e[h.M20],t[h.M03]=e[h.M30],t[h.M10]=e[h.M01],t[h.M11]=e[h.M11],t[h.M12]=e[h.M21],t[h.M13]=e[h.M31],t[h.M20]=e[h.M02],t[h.M21]=e[h.M12],t[h.M22]=e[h.M22],t[h.M23]=e[h.M32],t[h.M30]=e[h.M03],t[h.M31]=e[h.M13],t[h.M32]=e[h.M23],t[h.M33]=e[h.M33],this.set(t)},o.prototype.identity=function(){var t=this.values;return t[h.M00]=1,t[h.M01]=0,t[h.M02]=0,t[h.M03]=0,t[h.M10]=0,t[h.M11]=1,t[h.M12]=0,t[h.M13]=0,t[h.M20]=0,t[h.M21]=0,t[h.M22]=1,t[h.M23]=0,t[h.M30]=0,t[h.M31]=0,t[h.M32]=0,t[h.M33]=1,this},o.prototype.invert=function(){var t=this.values,e=this.temp,n=t[h.M30]*t[h.M21]*t[h.M12]*t[h.M03]-t[h.M20]*t[h.M31]*t[h.M12]*t[h.M03]-t[h.M30]*t[h.M11]*t[h.M22]*t[h.M03]+t[h.M10]*t[h.M31]*t[h.M22]*t[h.M03]+t[h.M20]*t[h.M11]*t[h.M32]*t[h.M03]-t[h.M10]*t[h.M21]*t[h.M32]*t[h.M03]-t[h.M30]*t[h.M21]*t[h.M02]*t[h.M13]+t[h.M20]*t[h.M31]*t[h.M02]*t[h.M13]+t[h.M30]*t[h.M01]*t[h.M22]*t[h.M13]-t[h.M00]*t[h.M31]*t[h.M22]*t[h.M13]-t[h.M20]*t[h.M01]*t[h.M32]*t[h.M13]+t[h.M00]*t[h.M21]*t[h.M32]*t[h.M13]+t[h.M30]*t[h.M11]*t[h.M02]*t[h.M23]-t[h.M10]*t[h.M31]*t[h.M02]*t[h.M23]-t[h.M30]*t[h.M01]*t[h.M12]*t[h.M23]+t[h.M00]*t[h.M31]*t[h.M12]*t[h.M23]+t[h.M10]*t[h.M01]*t[h.M32]*t[h.M23]-t[h.M00]*t[h.M11]*t[h.M32]*t[h.M23]-t[h.M20]*t[h.M11]*t[h.M02]*t[h.M33]+t[h.M10]*t[h.M21]*t[h.M02]*t[h.M33]+t[h.M20]*t[h.M01]*t[h.M12]*t[h.M33]-t[h.M00]*t[h.M21]*t[h.M12]*t[h.M33]-t[h.M10]*t[h.M01]*t[h.M22]*t[h.M33]+t[h.M00]*t[h.M11]*t[h.M22]*t[h.M33];if(0==n)throw new Error("non-invertible matrix");n=1/n;return e[h.M00]=t[h.M12]*t[h.M23]*t[h.M31]-t[h.M13]*t[h.M22]*t[h.M31]+t[h.M13]*t[h.M21]*t[h.M32]-t[h.M11]*t[h.M23]*t[h.M32]-t[h.M12]*t[h.M21]*t[h.M33]+t[h.M11]*t[h.M22]*t[h.M33],e[h.M01]=t[h.M03]*t[h.M22]*t[h.M31]-t[h.M02]*t[h.M23]*t[h.M31]-t[h.M03]*t[h.M21]*t[h.M32]+t[h.M01]*t[h.M23]*t[h.M32]+t[h.M02]*t[h.M21]*t[h.M33]-t[h.M01]*t[h.M22]*t[h.M33],e[h.M02]=t[h.M02]*t[h.M13]*t[h.M31]-t[h.M03]*t[h.M12]*t[h.M31]+t[h.M03]*t[h.M11]*t[h.M32]-t[h.M01]*t[h.M13]*t[h.M32]-t[h.M02]*t[h.M11]*t[h.M33]+t[h.M01]*t[h.M12]*t[h.M33],e[h.M03]=t[h.M03]*t[h.M12]*t[h.M21]-t[h.M02]*t[h.M13]*t[h.M21]-t[h.M03]*t[h.M11]*t[h.M22]+t[h.M01]*t[h.M13]*t[h.M22]+t[h.M02]*t[h.M11]*t[h.M23]-t[h.M01]*t[h.M12]*t[h.M23],e[h.M10]=t[h.M13]*t[h.M22]*t[h.M30]-t[h.M12]*t[h.M23]*t[h.M30]-t[h.M13]*t[h.M20]*t[h.M32]+t[h.M10]*t[h.M23]*t[h.M32]+t[h.M12]*t[h.M20]*t[h.M33]-t[h.M10]*t[h.M22]*t[h.M33],e[h.M11]=t[h.M02]*t[h.M23]*t[h.M30]-t[h.M03]*t[h.M22]*t[h.M30]+t[h.M03]*t[h.M20]*t[h.M32]-t[h.M00]*t[h.M23]*t[h.M32]-t[h.M02]*t[h.M20]*t[h.M33]+t[h.M00]*t[h.M22]*t[h.M33],e[h.M12]=t[h.M03]*t[h.M12]*t[h.M30]-t[h.M02]*t[h.M13]*t[h.M30]-t[h.M03]*t[h.M10]*t[h.M32]+t[h.M00]*t[h.M13]*t[h.M32]+t[h.M02]*t[h.M10]*t[h.M33]-t[h.M00]*t[h.M12]*t[h.M33],e[h.M13]=t[h.M02]*t[h.M13]*t[h.M20]-t[h.M03]*t[h.M12]*t[h.M20]+t[h.M03]*t[h.M10]*t[h.M22]-t[h.M00]*t[h.M13]*t[h.M22]-t[h.M02]*t[h.M10]*t[h.M23]+t[h.M00]*t[h.M12]*t[h.M23],e[h.M20]=t[h.M11]*t[h.M23]*t[h.M30]-t[h.M13]*t[h.M21]*t[h.M30]+t[h.M13]*t[h.M20]*t[h.M31]-t[h.M10]*t[h.M23]*t[h.M31]-t[h.M11]*t[h.M20]*t[h.M33]+t[h.M10]*t[h.M21]*t[h.M33],e[h.M21]=t[h.M03]*t[h.M21]*t[h.M30]-t[h.M01]*t[h.M23]*t[h.M30]-t[h.M03]*t[h.M20]*t[h.M31]+t[h.M00]*t[h.M23]*t[h.M31]+t[h.M01]*t[h.M20]*t[h.M33]-t[h.M00]*t[h.M21]*t[h.M33],e[h.M22]=t[h.M01]*t[h.M13]*t[h.M30]-t[h.M03]*t[h.M11]*t[h.M30]+t[h.M03]*t[h.M10]*t[h.M31]-t[h.M00]*t[h.M13]*t[h.M31]-t[h.M01]*t[h.M10]*t[h.M33]+t[h.M00]*t[h.M11]*t[h.M33],e[h.M23]=t[h.M03]*t[h.M11]*t[h.M20]-t[h.M01]*t[h.M13]*t[h.M20]-t[h.M03]*t[h.M10]*t[h.M21]+t[h.M00]*t[h.M13]*t[h.M21]+t[h.M01]*t[h.M10]*t[h.M23]-t[h.M00]*t[h.M11]*t[h.M23],e[h.M30]=t[h.M12]*t[h.M21]*t[h.M30]-t[h.M11]*t[h.M22]*t[h.M30]-t[h.M12]*t[h.M20]*t[h.M31]+t[h.M10]*t[h.M22]*t[h.M31]+t[h.M11]*t[h.M20]*t[h.M32]-t[h.M10]*t[h.M21]*t[h.M32],e[h.M31]=t[h.M01]*t[h.M22]*t[h.M30]-t[h.M02]*t[h.M21]*t[h.M30]+t[h.M02]*t[h.M20]*t[h.M31]-t[h.M00]*t[h.M22]*t[h.M31]-t[h.M01]*t[h.M20]*t[h.M32]+t[h.M00]*t[h.M21]*t[h.M32],e[h.M32]=t[h.M02]*t[h.M11]*t[h.M30]-t[h.M01]*t[h.M12]*t[h.M30]-t[h.M02]*t[h.M10]*t[h.M31]+t[h.M00]*t[h.M12]*t[h.M31]+t[h.M01]*t[h.M10]*t[h.M32]-t[h.M00]*t[h.M11]*t[h.M32],e[h.M33]=t[h.M01]*t[h.M12]*t[h.M20]-t[h.M02]*t[h.M11]*t[h.M20]+t[h.M02]*t[h.M10]*t[h.M21]-t[h.M00]*t[h.M12]*t[h.M21]-t[h.M01]*t[h.M10]*t[h.M22]+t[h.M00]*t[h.M11]*t[h.M22],t[h.M00]=e[h.M00]*n,t[h.M01]=e[h.M01]*n,t[h.M02]=e[h.M02]*n,t[h.M03]=e[h.M03]*n,t[h.M10]=e[h.M10]*n,t[h.M11]=e[h.M11]*n,t[h.M12]=e[h.M12]*n,t[h.M13]=e[h.M13]*n,t[h.M20]=e[h.M20]*n,t[h.M21]=e[h.M21]*n,t[h.M22]=e[h.M22]*n,t[h.M23]=e[h.M23]*n,t[h.M30]=e[h.M30]*n,t[h.M31]=e[h.M31]*n,t[h.M32]=e[h.M32]*n,t[h.M33]=e[h.M33]*n,this},o.prototype.determinant=function(){var t=this.values;return t[h.M30]*t[h.M21]*t[h.M12]*t[h.M03]-t[h.M20]*t[h.M31]*t[h.M12]*t[h.M03]-t[h.M30]*t[h.M11]*t[h.M22]*t[h.M03]+t[h.M10]*t[h.M31]*t[h.M22]*t[h.M03]+t[h.M20]*t[h.M11]*t[h.M32]*t[h.M03]-t[h.M10]*t[h.M21]*t[h.M32]*t[h.M03]-t[h.M30]*t[h.M21]*t[h.M02]*t[h.M13]+t[h.M20]*t[h.M31]*t[h.M02]*t[h.M13]+t[h.M30]*t[h.M01]*t[h.M22]*t[h.M13]-t[h.M00]*t[h.M31]*t[h.M22]*t[h.M13]-t[h.M20]*t[h.M01]*t[h.M32]*t[h.M13]+t[h.M00]*t[h.M21]*t[h.M32]*t[h.M13]+t[h.M30]*t[h.M11]*t[h.M02]*t[h.M23]-t[h.M10]*t[h.M31]*t[h.M02]*t[h.M23]-t[h.M30]*t[h.M01]*t[h.M12]*t[h.M23]+t[h.M00]*t[h.M31]*t[h.M12]*t[h.M23]+t[h.M10]*t[h.M01]*t[h.M32]*t[h.M23]-t[h.M00]*t[h.M11]*t[h.M32]*t[h.M23]-t[h.M20]*t[h.M11]*t[h.M02]*t[h.M33]+t[h.M10]*t[h.M21]*t[h.M02]*t[h.M33]+t[h.M20]*t[h.M01]*t[h.M12]*t[h.M33]-t[h.M00]*t[h.M21]*t[h.M12]*t[h.M33]-t[h.M10]*t[h.M01]*t[h.M22]*t[h.M33]+t[h.M00]*t[h.M11]*t[h.M22]*t[h.M33]},o.prototype.translate=function(t,e,n){var r=this.values;return r[h.M03]+=t,r[h.M13]+=e,r[h.M23]+=n,this},o.prototype.copy=function(){return(new o).set(this.values)},o.prototype.projection=function(t,e,n,r){this.identity();var n=1/Math.tan(n*(Math.PI/180)/2),i=(e+t)/(t-e),t=2*e*t/(t-e),e=this.values;return e[h.M00]=n/r,e[h.M10]=0,e[h.M20]=0,e[h.M30]=0,e[h.M01]=0,e[h.M11]=n,e[h.M21]=0,e[h.M31]=0,e[h.M02]=0,e[h.M12]=0,e[h.M22]=i,e[h.M32]=-1,e[h.M03]=0,e[h.M13]=0,e[h.M23]=t,e[h.M33]=0,this},o.prototype.ortho2d=function(t,e,n,r){return this.ortho(t,t+n,e,e+r,0,1)},o.prototype.ortho=function(t,e,n,r,i,a){this.identity();var o=2/(r-n),s=-2/(a-i),l=-(e+t)/(e-t),r=-(r+n)/(r-n),n=-(a+i)/(a-i),a=this.values;return a[h.M00]=2/(e-t),a[h.M10]=0,a[h.M20]=0,a[h.M30]=0,a[h.M01]=0,a[h.M11]=o,a[h.M21]=0,a[h.M31]=0,a[h.M02]=0,a[h.M12]=0,a[h.M22]=s,a[h.M32]=0,a[h.M03]=l,a[h.M13]=r,a[h.M23]=n,a[h.M33]=1,this},o.prototype.multiply=function(t){var e=this.temp,n=this.values,t=t.values;return e[h.M00]=n[h.M00]*t[h.M00]+n[h.M01]*t[h.M10]+n[h.M02]*t[h.M20]+n[h.M03]*t[h.M30],e[h.M01]=n[h.M00]*t[h.M01]+n[h.M01]*t[h.M11]+n[h.M02]*t[h.M21]+n[h.M03]*t[h.M31],e[h.M02]=n[h.M00]*t[h.M02]+n[h.M01]*t[h.M12]+n[h.M02]*t[h.M22]+n[h.M03]*t[h.M32],e[h.M03]=n[h.M00]*t[h.M03]+n[h.M01]*t[h.M13]+n[h.M02]*t[h.M23]+n[h.M03]*t[h.M33],e[h.M10]=n[h.M10]*t[h.M00]+n[h.M11]*t[h.M10]+n[h.M12]*t[h.M20]+n[h.M13]*t[h.M30],e[h.M11]=n[h.M10]*t[h.M01]+n[h.M11]*t[h.M11]+n[h.M12]*t[h.M21]+n[h.M13]*t[h.M31],e[h.M12]=n[h.M10]*t[h.M02]+n[h.M11]*t[h.M12]+n[h.M12]*t[h.M22]+n[h.M13]*t[h.M32],e[h.M13]=n[h.M10]*t[h.M03]+n[h.M11]*t[h.M13]+n[h.M12]*t[h.M23]+n[h.M13]*t[h.M33],e[h.M20]=n[h.M20]*t[h.M00]+n[h.M21]*t[h.M10]+n[h.M22]*t[h.M20]+n[h.M23]*t[h.M30],e[h.M21]=n[h.M20]*t[h.M01]+n[h.M21]*t[h.M11]+n[h.M22]*t[h.M21]+n[h.M23]*t[h.M31],e[h.M22]=n[h.M20]*t[h.M02]+n[h.M21]*t[h.M12]+n[h.M22]*t[h.M22]+n[h.M23]*t[h.M32],e[h.M23]=n[h.M20]*t[h.M03]+n[h.M21]*t[h.M13]+n[h.M22]*t[h.M23]+n[h.M23]*t[h.M33],e[h.M30]=n[h.M30]*t[h.M00]+n[h.M31]*t[h.M10]+n[h.M32]*t[h.M20]+n[h.M33]*t[h.M30],e[h.M31]=n[h.M30]*t[h.M01]+n[h.M31]*t[h.M11]+n[h.M32]*t[h.M21]+n[h.M33]*t[h.M31],e[h.M32]=n[h.M30]*t[h.M02]+n[h.M31]*t[h.M12]+n[h.M32]*t[h.M22]+n[h.M33]*t[h.M32],e[h.M33]=n[h.M30]*t[h.M03]+n[h.M31]*t[h.M13]+n[h.M32]*t[h.M23]+n[h.M33]*t[h.M33],this.set(this.temp)},o.prototype.multiplyLeft=function(t){var e=this.temp,n=this.values,t=t.values;return e[h.M00]=t[h.M00]*n[h.M00]+t[h.M01]*n[h.M10]+t[h.M02]*n[h.M20]+t[h.M03]*n[h.M30],e[h.M01]=t[h.M00]*n[h.M01]+t[h.M01]*n[h.M11]+t[h.M02]*n[h.M21]+t[h.M03]*n[h.M31],e[h.M02]=t[h.M00]*n[h.M02]+t[h.M01]*n[h.M12]+t[h.M02]*n[h.M22]+t[h.M03]*n[h.M32],e[h.M03]=t[h.M00]*n[h.M03]+t[h.M01]*n[h.M13]+t[h.M02]*n[h.M23]+t[h.M03]*n[h.M33],e[h.M10]=t[h.M10]*n[h.M00]+t[h.M11]*n[h.M10]+t[h.M12]*n[h.M20]+t[h.M13]*n[h.M30],e[h.M11]=t[h.M10]*n[h.M01]+t[h.M11]*n[h.M11]+t[h.M12]*n[h.M21]+t[h.M13]*n[h.M31],e[h.M12]=t[h.M10]*n[h.M02]+t[h.M11]*n[h.M12]+t[h.M12]*n[h.M22]+t[h.M13]*n[h.M32],e[h.M13]=t[h.M10]*n[h.M03]+t[h.M11]*n[h.M13]+t[h.M12]*n[h.M23]+t[h.M13]*n[h.M33],e[h.M20]=t[h.M20]*n[h.M00]+t[h.M21]*n[h.M10]+t[h.M22]*n[h.M20]+t[h.M23]*n[h.M30],e[h.M21]=t[h.M20]*n[h.M01]+t[h.M21]*n[h.M11]+t[h.M22]*n[h.M21]+t[h.M23]*n[h.M31],e[h.M22]=t[h.M20]*n[h.M02]+t[h.M21]*n[h.M12]+t[h.M22]*n[h.M22]+t[h.M23]*n[h.M32],e[h.M23]=t[h.M20]*n[h.M03]+t[h.M21]*n[h.M13]+t[h.M22]*n[h.M23]+t[h.M23]*n[h.M33],e[h.M30]=t[h.M30]*n[h.M00]+t[h.M31]*n[h.M10]+t[h.M32]*n[h.M20]+t[h.M33]*n[h.M30],e[h.M31]=t[h.M30]*n[h.M01]+t[h.M31]*n[h.M11]+t[h.M32]*n[h.M21]+t[h.M33]*n[h.M31],e[h.M32]=t[h.M30]*n[h.M02]+t[h.M31]*n[h.M12]+t[h.M32]*n[h.M22]+t[h.M33]*n[h.M32],e[h.M33]=t[h.M30]*n[h.M03]+t[h.M31]*n[h.M13]+t[h.M32]*n[h.M23]+t[h.M33]*n[h.M33],this.set(this.temp)},o.prototype.lookAt=function(t,e,n){o.initTemps();var r=o.xAxis,i=o.yAxis,a=o.zAxis,e=(a.setFrom(e).normalize(),r.setFrom(e).normalize(),r.cross(n).normalize(),i.setFrom(r).cross(a).normalize(),this.identity(),this.values);return e[h.M00]=r.x,e[h.M01]=r.y,e[h.M02]=r.z,e[h.M10]=i.x,e[h.M11]=i.y,e[h.M12]=i.z,e[h.M20]=-a.x,e[h.M21]=-a.y,e[h.M22]=-a.z,o.tmpMatrix.identity(),o.tmpMatrix.values[h.M03]=-t.x,o.tmpMatrix.values[h.M13]=-t.y,o.tmpMatrix.values[h.M23]=-t.z,this.multiply(o.tmpMatrix),this},o.initTemps=function(){null===o.xAxis&&(o.xAxis=new h.Vector3),null===o.yAxis&&(o.yAxis=new h.Vector3),null===o.zAxis&&(o.zAxis=new h.Vector3)},o.xAxis=null,o.yAxis=null,o.zAxis=null,o.tmpMatrix=new o,h.Matrix4=o}(spine=spine||{}),function(t){var e,a=t.webgl||(t.webgl={});function n(t,e,n,r){this.attributes=e,this.verticesLength=0,this.dirtyVertices=!1,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=t instanceof a.ManagedWebGLRenderingContext?t:new a.ManagedWebGLRenderingContext(t);for(var i=this.elementsPerVertex=0;i<e.length;i++)this.elementsPerVertex+=e[i].numElements;this.vertices=new Float32Array(n*this.elementsPerVertex),this.indices=new Uint16Array(r),this.context.addRestorable(this)}function r(t,e,n){this.name=t,this.type=e,this.numElements=n}function i(){return e.call(this,a.Shader.POSITION,p.Float,2)||this}n.prototype.getAttributes=function(){return this.attributes},n.prototype.maxVertices=function(){return this.vertices.length/this.elementsPerVertex},n.prototype.numVertices=function(){return this.verticesLength/this.elementsPerVertex},n.prototype.setVerticesLength=function(t){this.dirtyVertices=!0,this.verticesLength=t},n.prototype.getVertices=function(){return this.vertices},n.prototype.maxIndices=function(){return this.indices.length},n.prototype.numIndices=function(){return this.indicesLength},n.prototype.setIndicesLength=function(t){this.dirtyIndices=!0,this.indicesLength=t},n.prototype.getIndices=function(){return this.indices},n.prototype.getVertexSizeInFloats=function(){for(var t=0,e=0;e<this.attributes.length;e++)t+=this.attributes[e].numElements;return t},n.prototype.setVertices=function(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length},n.prototype.setIndices=function(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length},n.prototype.draw=function(t,e){this.drawWithOffset(t,e,0,0<this.indicesLength?this.indicesLength:this.verticesLength/this.elementsPerVertex)},n.prototype.drawWithOffset=function(t,e,n,r){var i=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),0<this.indicesLength?i.drawElements(e,r,i.UNSIGNED_SHORT,2*n):i.drawArrays(e,n,r),this.unbind(t)},n.prototype.bind=function(t){var e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer);for(var n=0,r=0;r<this.attributes.length;r++){var i=this.attributes[r],a=t.getAttributeLocation(i.name);e.enableVertexAttribArray(a),e.vertexAttribPointer(a,i.numElements,e.FLOAT,!1,4*this.elementsPerVertex,4*n),n+=i.numElements}0<this.indicesLength&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)},n.prototype.unbind=function(t){for(var e=this.context.gl,n=0;n<this.attributes.length;n++){var r=this.attributes[n],r=t.getAttributeLocation(r.name);e.disableVertexAttribArray(r)}e.bindBuffer(e.ARRAY_BUFFER,null),0<this.indicesLength&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)},n.prototype.update=function(){var t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)},n.prototype.restore=function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()},n.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)},a.Mesh=n,a.VertexAttribute=r,__extends(i,e=r),a.Position2Attribute=i,__extends(s,o=r);var o;function s(){return o.call(this,a.Shader.POSITION,p.Float,3)||this}a.Position3Attribute=s,__extends(h,l=r);var l;function h(t){return l.call(this,a.Shader.TEXCOORDS+(0==(t=void 0===t?0:t)?"":t),p.Float,2)||this}a.TexCoordAttribute=h,__extends(d,u=r);var u;function d(){return u.call(this,a.Shader.COLOR,p.Float,4)||this}a.ColorAttribute=d,__extends(f,c=r);var c,p;function f(){return c.call(this,a.Shader.COLOR2,p.Float,4)||this}a.Color2Attribute=f,(p=a.VertexAttributeType||(a.VertexAttributeType={}))[p.Float=0]="Float"}(spine=spine||{}),function(t){var r;function e(t,e,n){if(void 0===e&&(e=!0),void 0===n&&(n=10920),this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,10920<n)throw new Error("Can't have more than 10920 triangles per batch: "+n);this.context=t instanceof r.ManagedWebGLRenderingContext?t:new r.ManagedWebGLRenderingContext(t);e=e?[new r.Position2Attribute,new r.ColorAttribute,new r.TexCoordAttribute,new r.Color2Attribute]:[new r.Position2Attribute,new r.ColorAttribute,new r.TexCoordAttribute];this.mesh=new r.Mesh(t,e,n,3*n),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}r=t.webgl||(t.webgl={}),e.prototype.begin=function(t){var e=this.context.gl;if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0,e.enable(e.BLEND),e.blendFunc(this.srcBlend,this.dstBlend)},e.prototype.setBlendMode=function(t,e){var n=this.context.gl;this.srcBlend=t,this.dstBlend=e,this.isDrawing&&(this.flush(),n.blendFunc(this.srcBlend,this.dstBlend))},e.prototype.draw=function(t,e,n){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+e.length>this.mesh.getVertices().length||this.indicesLength+n.length>this.mesh.getIndices().length)&&this.flush();var r=this.mesh.numVertices();this.mesh.getVertices().set(e,this.verticesLength),this.verticesLength+=e.length,this.mesh.setVerticesLength(this.verticesLength);for(var i=this.mesh.getIndices(),a=this.indicesLength,o=0;o<n.length;a++,o++)i[a]=n[o]+r;this.indicesLength+=n.length,this.mesh.setIndicesLength(this.indicesLength)},e.prototype.flush=function(){var t=this.context.gl;0!=this.verticesLength&&(this.lastTexture.bind(),this.mesh.draw(this.shader,t.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++)},e.prototype.end=function(){var t=this.context.gl;if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(0<this.verticesLength||0<this.indicesLength)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1,t.disable(t.BLEND)},e.prototype.getDrawCalls=function(){return this.drawCalls},e.prototype.dispose=function(){this.mesh.dispose()},r.PolygonBatcher=e}(spine=spine||{}),function(T){var r,i,t;function e(t,e,n){void 0===n&&(n=!0),this.twoColorTint=!1,this.activeRenderer=null,this.QUAD=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],this.QUAD_TRIANGLES=[0,1,2,2,3,0],this.WHITE=new T.Color(1,1,1,1),this.canvas=t,this.context=e instanceof r.ManagedWebGLRenderingContext?e:new r.ManagedWebGLRenderingContext(e),this.twoColorTint=n,this.camera=new r.OrthoCamera(t.width,t.height),this.batcherShader=n?r.Shader.newTwoColoredTextured(this.context):r.Shader.newColoredTextured(this.context),this.batcher=new r.PolygonBatcher(this.context,n),this.shapesShader=r.Shader.newColored(this.context),this.shapes=new r.ShapeRenderer(this.context),this.skeletonRenderer=new r.SkeletonRenderer(this.context,n),this.skeletonDebugRenderer=new r.SkeletonDebugRenderer(this.context)}r=T.webgl||(T.webgl={}),e.prototype.begin=function(){this.camera.update(),this.enableRenderer(this.batcher)},e.prototype.drawSkeleton=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=-1),void 0===r&&(r=-1),this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=e,this.skeletonRenderer.draw(this.batcher,t,n,r)},e.prototype.drawSkeletonDebug=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=e,this.skeletonDebugRenderer.draw(this.shapes,t,n)},e.prototype.drawTexture=function(t,e,n,r,i,a){void 0===a&&(a=null),this.enableRenderer(this.batcher),null===a&&(a=this.WHITE);var o=this.QUAD,s=0;o[s++]=e,o[s++]=n,o[s++]=a.r,o[s++]=a.g,o[s++]=a.b,o[s++]=a.a,o[s++]=0,o[s++]=1,this.twoColorTint&&(o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=0),o[s++]=e+r,o[s++]=n,o[s++]=a.r,o[s++]=a.g,o[s++]=a.b,o[s++]=a.a,o[s++]=1,o[s++]=1,this.twoColorTint&&(o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=0),o[s++]=e+r,o[s++]=n+i,o[s++]=a.r,o[s++]=a.g,o[s++]=a.b,o[s++]=a.a,o[s++]=1,o[s++]=0,this.twoColorTint&&(o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=0),o[s++]=e,o[s++]=n+i,o[s++]=a.r,o[s++]=a.g,o[s++]=a.b,o[s++]=a.a,o[s++]=0,o[s++]=0,this.twoColorTint&&(o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=0),this.batcher.draw(t,o,this.QUAD_TRIANGLES)},e.prototype.drawTextureUV=function(t,e,n,r,i,a,o,s,l,h){void 0===h&&(h=null),this.enableRenderer(this.batcher),null===h&&(h=this.WHITE);var u=this.QUAD,d=0;u[d++]=e,u[d++]=n,u[d++]=h.r,u[d++]=h.g,u[d++]=h.b,u[d++]=h.a,u[d++]=a,u[d++]=o,this.twoColorTint&&(u[d++]=0,u[d++]=0,u[d++]=0,u[d++]=0),u[d++]=e+r,u[d++]=n,u[d++]=h.r,u[d++]=h.g,u[d++]=h.b,u[d++]=h.a,u[d++]=s,u[d++]=o,this.twoColorTint&&(u[d++]=0,u[d++]=0,u[d++]=0,u[d++]=0),u[d++]=e+r,u[d++]=n+i,u[d++]=h.r,u[d++]=h.g,u[d++]=h.b,u[d++]=h.a,u[d++]=s,u[d++]=l,this.twoColorTint&&(u[d++]=0,u[d++]=0,u[d++]=0,u[d++]=0),u[d++]=e,u[d++]=n+i,u[d++]=h.r,u[d++]=h.g,u[d++]=h.b,u[d++]=h.a,u[d++]=a,u[d++]=l,this.twoColorTint&&(u[d++]=0,u[d++]=0,u[d++]=0,u[d++]=0),this.batcher.draw(t,u,this.QUAD_TRIANGLES)},e.prototype.drawTextureRotated=function(t,e,n,r,i,a,o,s,l,h){void 0===l&&(l=null),void 0===h&&(h=!1),this.enableRenderer(this.batcher),null===l&&(l=this.WHITE);var u,h=this.QUAD,e=e+a,n=n+o,d=-a,c=-o,r=r-a,a=i-o,i=d,o=c,p=a,f=r,g=0,M=0,m=0,v=0,x=0,A=0,y=0,w=0,s=(v=0!=s?(m=(x=(u=T.MathUtils.cosDeg(s))*f-(s=T.MathUtils.sinDeg(s))*a)+((g=u*i-s*o)-(y=u*d-s*p)),(A=s*f+u*a)+((M=s*i+u*o)-(w=s*d+u*p))):(g=i,M=o,y=d,w=p,x=f,A=a,m=r,c),M+=n,m+=e,v+=n,x+=e,A+=n,y+=e,w+=n,0);h[s++]=g+=e,h[s++]=M,h[s++]=l.r,h[s++]=l.g,h[s++]=l.b,h[s++]=l.a,h[s++]=0,h[s++]=1,this.twoColorTint&&(h[s++]=0,h[s++]=0,h[s++]=0,h[s++]=0),h[s++]=m,h[s++]=v,h[s++]=l.r,h[s++]=l.g,h[s++]=l.b,h[s++]=l.a,h[s++]=1,h[s++]=1,this.twoColorTint&&(h[s++]=0,h[s++]=0,h[s++]=0,h[s++]=0),h[s++]=x,h[s++]=A,h[s++]=l.r,h[s++]=l.g,h[s++]=l.b,h[s++]=l.a,h[s++]=1,h[s++]=0,this.twoColorTint&&(h[s++]=0,h[s++]=0,h[s++]=0,h[s++]=0),h[s++]=y,h[s++]=w,h[s++]=l.r,h[s++]=l.g,h[s++]=l.b,h[s++]=l.a,h[s++]=0,h[s++]=0,this.twoColorTint&&(h[s++]=0,h[s++]=0,h[s++]=0,h[s++]=0),this.batcher.draw(t,h,this.QUAD_TRIANGLES)},e.prototype.drawRegion=function(t,e,n,r,i,a,o){void 0===a&&(a=null),void 0===o&&(o=!1),this.enableRenderer(this.batcher),null===a&&(a=this.WHITE);var o=this.QUAD,s=0;o[s++]=e,o[s++]=n,o[s++]=a.r,o[s++]=a.g,o[s++]=a.b,o[s++]=a.a,o[s++]=t.u,o[s++]=t.v2,this.twoColorTint&&(o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=0),o[s++]=e+r,o[s++]=n,o[s++]=a.r,o[s++]=a.g,o[s++]=a.b,o[s++]=a.a,o[s++]=t.u2,o[s++]=t.v2,this.twoColorTint&&(o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=0),o[s++]=e+r,o[s++]=n+i,o[s++]=a.r,o[s++]=a.g,o[s++]=a.b,o[s++]=a.a,o[s++]=t.u2,o[s++]=t.v,this.twoColorTint&&(o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=0),o[s++]=e,o[s++]=n+i,o[s++]=a.r,o[s++]=a.g,o[s++]=a.b,o[s++]=a.a,o[s++]=t.u,o[s++]=t.v,this.twoColorTint&&(o[s++]=0,o[s++]=0,o[s++]=0,o[s++]=0),this.batcher.draw(t.texture,o,this.QUAD_TRIANGLES)},e.prototype.line=function(t,e,n,r,i,a){void 0===i&&(i=null),void 0===a&&(a=null),this.enableRenderer(this.shapes),this.shapes.line(t,e,n,r,i)},e.prototype.triangle=function(t,e,n,r,i,a,o,s,l,h){void 0===s&&(s=null),void 0===l&&(l=null),void 0===h&&(h=null),this.enableRenderer(this.shapes),this.shapes.triangle(t,e,n,r,i,a,o,s,l,h)},e.prototype.quad=function(t,e,n,r,i,a,o,s,l,h,u,d,c){void 0===h&&(h=null),void 0===u&&(u=null),void 0===d&&(d=null),void 0===c&&(c=null),this.enableRenderer(this.shapes),this.shapes.quad(t,e,n,r,i,a,o,s,l,h,u,d,c)},e.prototype.rect=function(t,e,n,r,i,a){void 0===a&&(a=null),this.enableRenderer(this.shapes),this.shapes.rect(t,e,n,r,i,a)},e.prototype.rectLine=function(t,e,n,r,i,a,o){void 0===o&&(o=null),this.enableRenderer(this.shapes),this.shapes.rectLine(t,e,n,r,i,a,o)},e.prototype.polygon=function(t,e,n,r){void 0===r&&(r=null),this.enableRenderer(this.shapes),this.shapes.polygon(t,e,n,r)},e.prototype.circle=function(t,e,n,r,i,a){void 0===i&&(i=null),void 0===a&&(a=0),this.enableRenderer(this.shapes),this.shapes.circle(t,e,n,r,i,a)},e.prototype.curve=function(t,e,n,r,i,a,o,s,l,h){void 0===h&&(h=null),this.enableRenderer(this.shapes),this.shapes.curve(t,e,n,r,i,a,o,s,l,h)},e.prototype.end=function(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null},e.prototype.resize=function(t){var e=this.canvas,n=e.clientWidth,r=e.clientHeight;e.width==n&&e.height==r||(e.width=n,e.height=r),this.context.gl.viewport(0,0,e.width,e.height),t!==i.Stretch&&(t===i.Expand?this.camera.setViewport(n,r):t===i.Fit&&(n=e.width,r=e.height,t=this.camera.viewportWidth,e=this.camera.viewportHeight,this.camera.viewportWidth=n*(t=e/t<r/n?t/n:e/r),this.camera.viewportHeight=r*t)),this.camera.update()},e.prototype.enableRenderer=function(t){this.activeRenderer!==t&&(this.end(),t instanceof r.PolygonBatcher?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(r.Shader.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof r.ShapeRenderer?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(r.Shader.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)},e.prototype.dispose=function(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()},r.SceneRenderer=e,(t=i=r.ResizeMode||(r.ResizeMode={}))[t.Stretch=0]="Stretch",t[t.Expand=1]="Expand",t[t.Fit=2]="Fit"}(spine=spine||{}),function(t){var r;function e(t,e,n){this.vertexShader=e,this.fragmentShader=n,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=e,this.fsSource=n,this.context=t instanceof r.ManagedWebGLRenderingContext?t:new r.ManagedWebGLRenderingContext(t),this.context.addRestorable(this),this.compile()}r=t.webgl||(t.webgl={}),e.prototype.getProgram=function(){return this.program},e.prototype.getVertexShader=function(){return this.vertexShader},e.prototype.getFragmentShader=function(){return this.fragmentShader},e.prototype.getVertexShaderSource=function(){return this.vsSource},e.prototype.getFragmentSource=function(){return this.fsSource},e.prototype.compile=function(){var t=this.context.gl;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs)}catch(t){throw this.dispose(),t}},e.prototype.compileShader=function(t,e){var n=this.context.gl,t=n.createShader(t);if(n.shaderSource(t,e),n.compileShader(t),!n.getShaderParameter(t,n.COMPILE_STATUS)){e="Couldn't compile shader: "+n.getShaderInfoLog(t);if(n.deleteShader(t),!n.isContextLost())throw new Error(e)}return t},e.prototype.compileProgram=function(t,e){var n=this.context.gl,r=n.createProgram();if(n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS)){t="Couldn't compile shader program: "+n.getProgramInfoLog(r);if(n.deleteProgram(r),!n.isContextLost())throw new Error(t)}return r},e.prototype.restore=function(){this.compile()},e.prototype.bind=function(){this.context.gl.useProgram(this.program)},e.prototype.unbind=function(){this.context.gl.useProgram(null)},e.prototype.setUniformi=function(t,e){this.context.gl.uniform1i(this.getUniformLocation(t),e)},e.prototype.setUniformf=function(t,e){this.context.gl.uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniform2f=function(t,e,n){this.context.gl.uniform2f(this.getUniformLocation(t),e,n)},e.prototype.setUniform3f=function(t,e,n,r){this.context.gl.uniform3f(this.getUniformLocation(t),e,n,r)},e.prototype.setUniform4f=function(t,e,n,r,i){this.context.gl.uniform4f(this.getUniformLocation(t),e,n,r,i)},e.prototype.setUniform2x2f=function(t,e){var n=this.context.gl;this.tmp2x2.set(e),n.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)},e.prototype.setUniform3x3f=function(t,e){var n=this.context.gl;this.tmp3x3.set(e),n.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)},e.prototype.setUniform4x4f=function(t,e){var n=this.context.gl;this.tmp4x4.set(e),n.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)},e.prototype.getUniformLocation=function(t){var e=this.context.gl,n=e.getUniformLocation(this.program,t);if(n||e.isContextLost())return n;throw new Error("Couldn't find location for uniform "+t)},e.prototype.getAttributeLocation=function(t){var e=this.context.gl,n=e.getAttribLocation(this.program,t);if(-1!=n||e.isContextLost())return n;throw new Error("Couldn't find location for attribute "+t)},e.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)},e.newColoredTextured=function(t){return new e(t,"\n\t\t\t\tattribute vec4 "+e.POSITION+";\n\t\t\t\tattribute vec4 "+e.COLOR+";\n\t\t\t\tattribute vec2 "+e.TEXCOORDS+";\n\t\t\t\tuniform mat4 "+e.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = "+e.COLOR+";\n\t\t\t\t\tv_texCoords = "+e.TEXCOORDS+";\n\t\t\t\t\tgl_Position = "+e.MVP_MATRIX+" * "+e.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n\t\t\t\t}\n\t\t\t")},e.newTwoColoredTextured=function(t){return new e(t,"\n\t\t\t\tattribute vec4 "+e.POSITION+";\n\t\t\t\tattribute vec4 "+e.COLOR+";\n\t\t\t\tattribute vec4 "+e.COLOR2+";\n\t\t\t\tattribute vec2 "+e.TEXCOORDS+";\n\t\t\t\tuniform mat4 "+e.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_light;\n\t\t\t\tvarying vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_light = "+e.COLOR+";\n\t\t\t\t\tv_dark = "+e.COLOR2+";\n\t\t\t\t\tv_texCoords = "+e.TEXCOORDS+";\n\t\t\t\t\tgl_Position = "+e.MVP_MATRIX+" * "+e.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_light;\n\t\t\t\tvarying LOWP vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\t\t\t\t\tgl_FragColor.a = texColor.a * v_light.a;\n\t\t\t\t\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n\t\t\t\t}\n\t\t\t")},e.newColored=function(t){return new e(t,"\n\t\t\t\tattribute vec4 "+e.POSITION+";\n\t\t\t\tattribute vec4 "+e.COLOR+";\n\t\t\t\tuniform mat4 "+e.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = "+e.COLOR+";\n\t\t\t\t\tgl_Position = "+e.MVP_MATRIX+" * "+e.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color;\n\t\t\t\t}\n\t\t\t")},e.MVP_MATRIX="u_projTrans",e.POSITION="a_position",e.COLOR="a_color",e.COLOR2="a_color2",e.TEXCOORDS="a_texCoords",e.SAMPLER="u_texture",r.Shader=e}(spine=spine||{}),function(f){var n,b,t;function e(t,e){if(void 0===e&&(e=10920),this.isDrawing=!1,this.shapeType=b.Filled,this.color=new f.Color(1,1,1,1),this.vertexIndex=0,this.tmp=new f.Vector2,10920<e)throw new Error("Can't have more than 10920 triangles per batch: "+e);this.context=t instanceof n.ManagedWebGLRenderingContext?t:new n.ManagedWebGLRenderingContext(t),this.mesh=new n.Mesh(t,[new n.Position2Attribute,new n.ColorAttribute],e,0),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}n=f.webgl||(f.webgl={}),e.prototype.begin=function(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;t=this.context.gl;t.enable(t.BLEND),t.blendFunc(this.srcBlend,this.dstBlend)},e.prototype.setBlendMode=function(t,e){var n=this.context.gl;this.srcBlend=t,this.dstBlend=e,this.isDrawing&&(this.flush(),n.blendFunc(this.srcBlend,this.dstBlend))},e.prototype.setColor=function(t){this.color.setFromColor(t)},e.prototype.setColorWith=function(t,e,n,r){this.color.set(t,e,n,r)},e.prototype.point=function(t,e,n){void 0===n&&(n=null),this.check(b.Point,1),null===n&&(n=this.color),this.vertex(t,e,n)},e.prototype.line=function(t,e,n,r,i){void 0===i&&(i=null),this.check(b.Line,2),this.mesh.getVertices(),this.vertexIndex,null===i&&(i=this.color),this.vertex(t,e,i),this.vertex(n,r,i)},e.prototype.triangle=function(t,e,n,r,i,a,o,s,l,h){void 0===s&&(s=null),void 0===l&&(l=null),void 0===h&&(h=null),this.check(t?b.Filled:b.Line,3),this.mesh.getVertices(),this.vertexIndex,null===s&&(s=this.color),null===l&&(l=this.color),null===h&&(h=this.color),t?(this.vertex(e,n,s),this.vertex(r,i,l),this.vertex(a,o,h)):(this.vertex(e,n,s),this.vertex(r,i,l),this.vertex(r,i,s),this.vertex(a,o,l),this.vertex(a,o,s),this.vertex(e,n,l))},e.prototype.quad=function(t,e,n,r,i,a,o,s,l,h,u,d,c){void 0===h&&(h=null),void 0===u&&(u=null),void 0===d&&(d=null),void 0===c&&(c=null),this.check(t?b.Filled:b.Line,3),this.mesh.getVertices(),this.vertexIndex,null===h&&(h=this.color),null===u&&(u=this.color),null===d&&(d=this.color),null===c&&(c=this.color),t?(this.vertex(e,n,h),this.vertex(r,i,u),this.vertex(a,o,d),this.vertex(a,o,d)):(this.vertex(e,n,h),this.vertex(r,i,u),this.vertex(r,i,u),this.vertex(a,o,d),this.vertex(a,o,d),this.vertex(s,l,c)),this.vertex(s,l,c),this.vertex(e,n,h)},e.prototype.rect=function(t,e,n,r,i,a){this.quad(t,e,n,e+r,n,e+r,n+i,e,n+i,a=void 0===a?null:a,a,a,a)},e.prototype.rectLine=function(t,e,n,r,i,a,o){void 0===o&&(o=null),this.check(t?b.Filled:b.Line,8),null===o&&(o=this.color);var s=this.tmp.set(i-n,e-r),l=(s.normalize(),s.x*(a*=.5)),s=s.y*a;t?(this.vertex(e+l,n+s,o),this.vertex(e-l,n-s,o),this.vertex(r+l,i+s,o),this.vertex(r-l,i-s,o),this.vertex(r+l,i+s,o)):(this.vertex(e+l,n+s,o),this.vertex(e-l,n-s,o),this.vertex(r+l,i+s,o),this.vertex(r-l,i-s,o),this.vertex(r+l,i+s,o),this.vertex(e+l,n+s,o),this.vertex(r-l,i-s,o)),this.vertex(e-l,n-s,o)},e.prototype.x=function(t,e,n){this.line(t-n,e-n,t+n,e+n),this.line(t-n,e+n,t+n,e-n)},e.prototype.polygon=function(t,e,n,r){if(void 0===r&&(r=null),n<3)throw new Error("Polygon must contain at least 3 vertices");this.check(b.Line,2*n),null===r&&(r=this.color),this.mesh.getVertices(),this.vertexIndex;for(var i=t[e<<=1],a=t[e+1],o=e+(n<<=1),s=e,l=e+n-2;s<l;s+=2){var h=t[s],u=t[s+1],d=0,c=0,c=o<=s+2?(d=i,a):(d=t[s+2],t[s+3]);this.vertex(h,u,r),this.vertex(d,c,r)}},e.prototype.circle=function(t,e,n,r,i,a){if(void 0===i&&(i=null),(a=0===(a=void 0===a?0:a)?Math.max(1,6*f.MathUtils.cbrt(r)|0):a)<=0)throw new Error("segments must be > 0.");null===i&&(i=this.color);var o=2*f.MathUtils.PI/a,s=Math.cos(o),l=Math.sin(o),h=r,u=0;if(t){this.check(b.Filled,3*a+3),a--;for(var d=0;d<a;d++){this.vertex(e,n,i),this.vertex(e+h,n+u,i);var c=h,h=s*h-l*u,u=l*c+s*u;this.vertex(e+h,n+u,i)}this.vertex(e,n,i)}else{this.check(b.Line,2*a+2);for(d=0;d<a;d++){this.vertex(e+h,n+u,i);var p=h;this.vertex(e+(h=s*h-l*u),n+(u=l*p+s*u),i)}}this.vertex(e+h,n+u,i),this.vertex(e+(h=r),n+(u=0),i)},e.prototype.curve=function(t,e,n,r,i,a,o,s,l,h){void 0===h&&(h=null),this.check(b.Line,2*l+2),null===h&&(h=this.color);for(var u=1/l,d=u*u,c=u*u*u,u=3*u,p=3*d,d=6*d,f=6*c,g=t-2*n+i,M=e-2*r+a,i=3*(n-i)-t+o,a=3*(r-a)-e+s,m=t,v=e,x=(n-t)*u+g*p+i*c,A=(r-e)*u+M*p+a*c,y=g*d+i*f,w=M*d+a*f,T=i*f,E=a*f;0<l--;)this.vertex(m,v,h),m+=x,v+=A,x+=y,A+=w,y+=T,w+=E,this.vertex(m,v,h);this.vertex(m,v,h),this.vertex(o,s,h)},e.prototype.vertex=function(t,e,n){var r=this.vertexIndex,i=this.mesh.getVertices();i[r++]=t,i[r++]=e,i[r++]=n.r,i[r++]=n.g,i[r++]=n.b,i[r++]=n.a,this.vertexIndex=r},e.prototype.end=function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush(),this.context.gl.disable(this.context.gl.BLEND),this.isDrawing=!1},e.prototype.flush=function(){0!=this.vertexIndex&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0)},e.prototype.check=function(t,e){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.shapeType==t?this.mesh.maxVertices()-this.mesh.numVertices()<e&&this.flush():(this.flush(),this.shapeType=t)},e.prototype.dispose=function(){this.mesh.dispose()},n.ShapeRenderer=e,(t=b=n.ShapeType||(n.ShapeType={}))[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled"}(spine=spine||{}),function(W){var e;function G(t){this.boneLineColor=new W.Color(1,0,0,1),this.boneOriginColor=new W.Color(0,1,0,1),this.attachmentLineColor=new W.Color(0,0,1,.5),this.triangleLineColor=new W.Color(1,.64,0,.5),this.pathColor=(new W.Color).setFromString("FF7F00"),this.clipColor=new W.Color(.8,0,0,2),this.aabbColor=new W.Color(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new W.SkeletonBounds,this.temp=new Array,this.vertices=W.Utils.newFloatArray(2048),this.context=t instanceof e.ManagedWebGLRenderingContext?t:new e.ManagedWebGLRenderingContext(t)}e=W.webgl||(W.webgl={}),G.prototype.draw=function(t,e,n){void 0===n&&(n=null);var r=e.x,i=e.y,a=this.context.gl,o=this.premultipliedAlpha?a.ONE:a.SRC_ALPHA,s=(t.setBlendMode(o,a.ONE_MINUS_SRC_ALPHA),e.bones);if(this.drawBones){t.setColor(this.boneLineColor);for(var l=0,h=s.length;l<h;l++){var u=s[l];n&&-1<n.indexOf(u.data.name)||null==u.parent||(A=r+u.data.length*u.a+u.worldX,y=i+u.data.length*u.c+u.worldY,t.rectLine(!0,r+u.worldX,i+u.worldY,A,y,this.boneWidth*this.scale))}this.drawSkeletonXY&&t.x(r,i,4*this.scale)}if(this.drawRegionAttachments){t.setColor(this.attachmentLineColor);for(l=0,h=(L=e.slots).length;l<h;l++)(F=(_=L[l]).getAttachment())instanceof W.RegionAttachment&&(c=this.vertices,F.computeWorldVertices(_.bone,c,0,2),t.line(c[0],c[1],c[2],c[3]),t.line(c[2],c[3],c[4],c[5]),t.line(c[4],c[5],c[6],c[7]),t.line(c[6],c[7],c[0],c[1]))}if(this.drawMeshHull||this.drawMeshTriangles)for(l=0,h=(L=e.slots).length;l<h;l++)if((F=(_=L[l]).getAttachment())instanceof W.MeshAttachment){var d=F,c=this.vertices,p=(d.computeWorldVertices(_,0,d.worldVerticesLength,c,0,2),d.triangles),d=d.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(var f=0,g=p.length;f<g;f+=3){var M=2*p[f],m=2*p[f+1],v=2*p[f+2];t.triangle(!1,c[M],c[1+M],c[m],c[1+m],c[v],c[1+v])}}if(this.drawMeshHull&&0<d){t.setColor(this.attachmentLineColor);for(var x=c[(d=2*(d>>1))-2],N=c[d-1],f=0,g=d;f<g;f+=2){var A=c[f],y=c[f+1];t.line(A,y,x,N),x=A,N=y}}}if(this.drawBoundingBoxes){o=this.bounds;o.update(e,!0),t.setColor(this.aabbColor),t.rect(!1,o.minX,o.minY,o.getWidth(),o.getHeight());for(var U=o.polygons,B=o.boundingBoxes,l=0,h=U.length;l<h;l++){var k=U[l];t.setColor(B[l].color),t.polygon(k,0,k.length)}}if(this.drawPaths)for(l=0,h=(L=e.slots).length;l<h;l++)if((F=(_=L[l]).getAttachment())instanceof W.PathAttachment){var w=F,g=w.worldVerticesLength,T=this.temp=W.Utils.setArraySize(this.temp,g,0),O=(w.computeWorldVertices(_,0,g,T,0,2),this.pathColor),E=T[2],b=T[3],R=0,S=0;w.closed&&(t.setColor(O),C=T[0],I=T[1],P=T[g-2],V=T[g-1],R=T[g-4],S=T[g-3],t.curve(E,b,C,I,P,V,R,S,32),t.setColor(G.LIGHT_GRAY),t.line(E,b,C,I),t.line(R,S,P,V)),g-=4;for(f=4;f<g;f+=6){var C=T[f],I=T[f+1],P=T[f+2],V=T[f+3];R=T[f+4],S=T[f+5],t.setColor(O),t.curve(E,b,C,I,P,V,R,S,32),t.setColor(G.LIGHT_GRAY),t.line(E,b,C,I),t.line(R,S,P,V),E=R,b=S}}if(this.drawBones){t.setColor(this.boneOriginColor);for(l=0,h=s.length;l<h;l++){u=s[l];n&&-1<n.indexOf(u.data.name)||t.circle(!0,r+u.worldX,i+u.worldY,3*this.scale,G.GREEN,8)}}if(this.drawClipping){var L=e.slots;t.setColor(this.clipColor);for(var _,F,l=0,h=L.length;l<h;l++)if((F=(_=L[l]).getAttachment())instanceof W.ClippingAttachment){var X=F,g=X.worldVerticesLength,T=this.temp=W.Utils.setArraySize(this.temp,g,0);X.computeWorldVertices(_,0,g,T,0,2);for(var D=0,Y=T.length;D<Y;D+=2){A=T[D],y=T[D+1],R=T[(D+2)%T.length],S=T[(D+3)%T.length];t.line(A,y,R,S)}}}},G.prototype.dispose=function(){},G.LIGHT_GRAY=new W.Color(192/255,192/255,192/255,1),G.GREEN=new W.Color(0,1,0,1),e.SkeletonDebugRenderer=G}(spine=spine||{}),function(k){var O,n;function X(t,e){void 0===e&&(e=!0),this.premultipliedAlpha=!1,this.vertexEffect=null,this.tempColor=new k.Color,this.tempColor2=new k.Color,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new n(null,0,0),this.clipper=new k.SkeletonClipping,this.temp=new k.Vector2,this.temp2=new k.Vector2,this.temp3=new k.Color,this.temp4=new k.Color,(this.twoColorTint=e)&&(this.vertexSize+=4),this.vertices=k.Utils.newFloatArray(1024*this.vertexSize)}O=k.webgl||(k.webgl={}),n=function(t,e,n){this.vertices=t,this.numVertices=e,this.numFloats=n},X.prototype.draw=function(t,e,n,r){void 0===r&&(r=-1);var i=this.clipper,a=this.premultipliedAlpha,o=this.twoColorTint,s=null,l=this.temp,h=this.temp2,u=this.temp3,d=this.temp4,c=this.renderable,p=null,f=null,g=e.drawOrder,M=null,m=e.color,v=o?12:8,x=!1;-1==(n=void 0===n?-1:n)&&(x=!0);for(var A=0,y=g.length;A<y;A++){var w=i.isClipping()?2:v,T=g[A];if(x=0<=n&&n==T.data.index||x){0<=r&&r==T.data.index&&(x=!1);var E=T.getAttachment(),b=null;if(E instanceof k.RegionAttachment){var R=E;c.vertices=this.vertices,c.numVertices=4,c.numFloats=w<<2,R.computeWorldVertices(T.bone,c.vertices,0,w),f=X.QUAD_TRIANGLES,p=R.uvs,b=R.region.renderObject.texture,M=R.color}else{if(!(E instanceof k.MeshAttachment)){if(E instanceof k.ClippingAttachment){i.clipStart(T,E);continue}continue}R=E;c.vertices=this.vertices,c.numVertices=R.worldVerticesLength>>1,c.numFloats=c.numVertices*w,c.numFloats>c.vertices.length&&(c.vertices=this.vertices=k.Utils.newFloatArray(c.numFloats)),R.computeWorldVertices(T,0,R.worldVerticesLength,c.vertices,0,w),f=R.triangles,b=R.region.renderObject.texture,p=R.uvs,M=R.color}if(null!=b){var E=T.color,S=this.tempColor,C=(S.r=m.r*E.r*M.r,S.g=m.g*E.g*M.g,S.b=m.b*E.b*M.b,S.a=m.a*E.a*M.a,a&&(S.r*=S.a,S.g*=S.a,S.b*=S.a),this.tempColor2),w=(null==T.darkColor?C.set(0,0,0,1):(a?(C.r=T.darkColor.r*S.a,C.g=T.darkColor.g*S.a,C.b=T.darkColor.b*S.a):C.setFromColor(T.darkColor),C.a=a?1:0),T.data.blendMode);if(w!=s&&t.setBlendMode(O.WebGLBlendModeConverter.getSourceGLBlendMode(s=w,a),O.WebGLBlendModeConverter.getDestGLBlendMode(s)),i.isClipping()){i.clipTriangles(c.vertices,c.numFloats,f,f.length,p,S,C,o);E=new Float32Array(i.clippedVertices),w=i.clippedTriangles;if(null!=this.vertexEffect){var I=this.vertexEffect,P=E;if(o)for(var V=0,L=E.length;V<L;V+=v)l.x=P[V],l.y=P[V+1],u.set(P[V+2],P[V+3],P[V+4],P[V+5]),h.x=P[V+6],h.y=P[V+7],d.set(P[V+8],P[V+9],P[V+10],P[V+11]),I.transform(l,h,u,d),P[V]=l.x,P[V+1]=l.y,P[V+2]=u.r,P[V+3]=u.g,P[V+4]=u.b,P[V+5]=u.a,P[V+6]=h.x,P[V+7]=h.y,P[V+8]=d.r,P[V+9]=d.g,P[V+10]=d.b,P[V+11]=d.a;else for(var V=0,_=E.length;V<_;V+=v)l.x=P[V],l.y=P[V+1],u.set(P[V+2],P[V+3],P[V+4],P[V+5]),h.x=P[V+6],h.y=P[V+7],d.set(0,0,0,0),I.transform(l,h,u,d),P[V]=l.x,P[V+1]=l.y,P[V+2]=u.r,P[V+3]=u.g,P[V+4]=u.b,P[V+5]=u.a,P[V+6]=h.x,P[V+7]=h.y}t.draw(b,E,w)}else{P=c.vertices;if(null!=this.vertexEffect){I=this.vertexEffect;if(o)for(var V=0,F=0,D=c.numFloats;V<D;V+=v,F+=2)l.x=P[V],l.y=P[V+1],h.x=p[F],h.y=p[F+1],u.setFromColor(S),d.setFromColor(C),I.transform(l,h,u,d),P[V]=l.x,P[V+1]=l.y,P[V+2]=u.r,P[V+3]=u.g,P[V+4]=u.b,P[V+5]=u.a,P[V+6]=h.x,P[V+7]=h.y,P[V+8]=d.r,P[V+9]=d.g,P[V+10]=d.b,P[V+11]=d.a;else for(var V=0,F=0,N=c.numFloats;V<N;V+=v,F+=2)l.x=P[V],l.y=P[V+1],h.x=p[F],h.y=p[F+1],u.setFromColor(S),d.set(0,0,0,0),I.transform(l,h,u,d),P[V]=l.x,P[V+1]=l.y,P[V+2]=u.r,P[V+3]=u.g,P[V+4]=u.b,P[V+5]=u.a,P[V+6]=h.x,P[V+7]=h.y}else if(o)for(var V=2,F=0,U=c.numFloats;V<U;V+=v,F+=2)P[V]=S.r,P[V+1]=S.g,P[V+2]=S.b,P[V+3]=S.a,P[V+4]=p[F],P[V+5]=p[F+1],P[V+6]=C.r,P[V+7]=C.g,P[V+8]=C.b,P[V+9]=C.a;else for(var V=2,F=0,B=c.numFloats;V<B;V+=v,F+=2)P[V]=S.r,P[V+1]=S.g,P[V+2]=S.b,P[V+3]=S.a,P[V+4]=p[F],P[V+5]=p[F+1];E=c.vertices.subarray(0,c.numFloats);t.draw(b,E,f)}}}i.clipEndWithSlot(T)}i.clipEnd()},X.QUAD_TRIANGLES=[0,1,2,2,3,0],O.SkeletonRenderer=X}(spine=spine||{}),function(t){var n;function e(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=n}n=t.webgl||(t.webgl={}),e.prototype.setFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},e.prototype.set=function(t,e,n){return this.x=t,this.y=e,this.z=n,this},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},e.prototype.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this},e.prototype.normalize=function(){var t=this.length();return 0==t||(this.x*=t=1/t,this.y*=t,this.z*=t),this},e.prototype.cross=function(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},e.prototype.multiply=function(t){t=t.values;return this.set(this.x*t[n.M00]+this.y*t[n.M01]+this.z*t[n.M02]+t[n.M03],this.x*t[n.M10]+this.y*t[n.M11]+this.z*t[n.M12]+t[n.M13],this.x*t[n.M20]+this.y*t[n.M21]+this.z*t[n.M22]+t[n.M23])},e.prototype.project=function(t){var t=t.values,e=1/(this.x*t[n.M30]+this.y*t[n.M31]+this.z*t[n.M32]+t[n.M33]);return this.set((this.x*t[n.M00]+this.y*t[n.M01]+this.z*t[n.M02]+t[n.M03])*e,(this.x*t[n.M10]+this.y*t[n.M11]+this.z*t[n.M12]+t[n.M13])*e,(this.x*t[n.M20]+this.y*t[n.M21]+this.z*t[n.M22]+t[n.M23])*e)},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},e.prototype.distance=function(t){var e=t.x-this.x,n=t.y-this.y,t=t.z-this.z;return Math.sqrt(e*e+n*n+t*t)},n.Vector3=e}(spine=spine||{}),function(n){var t;function e(t,e){void 0===e&&(e={alpha:"true"});var n,r=this;this.restorables=new Array,t instanceof HTMLCanvasElement?(this.gl=(n=t).getContext("webgl",e)||n.getContext("experimental-webgl",e),(this.canvas=n).addEventListener("webglcontextlost",function(t){t&&t.preventDefault()}),n.addEventListener("webglcontextrestored",function(t){for(var e=0,n=r.restorables.length;e<n;e++)r.restorables[e].restore()})):(this.gl=t,this.canvas=this.gl.canvas)}function r(){}t=n.webgl||(n.webgl={}),e.prototype.addRestorable=function(t){this.restorables.push(t)},e.prototype.removeRestorable=function(t){t=this.restorables.indexOf(t);-1<t&&this.restorables.splice(t,1)},t.ManagedWebGLRenderingContext=e,r.getDestGLBlendMode=function(t){switch(t){case n.BlendMode.Normal:return r.ONE_MINUS_SRC_ALPHA;case n.BlendMode.Additive:return r.ONE;case n.BlendMode.Multiply:case n.BlendMode.Screen:return r.ONE_MINUS_SRC_ALPHA;default:throw new Error("Unknown blend mode: "+t)}},r.getSourceGLBlendMode=function(t,e){switch(void 0===e&&(e=!1),t){case n.BlendMode.Normal:case n.BlendMode.Additive:return e?r.ONE:r.SRC_ALPHA;case n.BlendMode.Multiply:return r.DST_COLOR;case n.BlendMode.Screen:return r.ONE;default:throw new Error("Unknown blend mode: "+t)}},r.ZERO=0,r.ONE=1,r.SRC_COLOR=768,r.ONE_MINUS_SRC_COLOR=769,r.SRC_ALPHA=770,r.ONE_MINUS_SRC_ALPHA=771,r.DST_ALPHA=772,r.ONE_MINUS_DST_ALPHA=773,r.DST_COLOR=774,t.WebGLBlendModeConverter=r}(spine=spine||{});let SpineManager=function(){const o="assets/spine/";let a,s,l=new spine.webgl.Matrix4,h,u,d,c,p={},f="",g=1,M=[],m=["DEAR","NO_WEAPON","POSING","RACE","RUN_JUMP","SMILE"],v=!1,x,A={},y={},w,T={type:0,data:{}},E={id:0,data:{}},b="1",R=null;function S(t){return(t<10?"0":"")+t}function C(t){var e=new DataView(t).getInt32(12,!0);return{count:e,data:t.slice(32*(e+1))}}function I(t,e,n,r){let i=new XMLHttpRequest;i.open("GET",t,!0),n&&(i.responseType=n),r&&(i.onprogress=r),i.onload=function(){200===i.status?e(!0,i.response):e(!1)},i.onerror=function(){e(!1)},i.send()}function r(){let r=0,i=!1,a=x.baseId;y[a]=y[a]||{},m.forEach(function(n){if(y[a][n])return r++;I(o+a+"_"+n+".cysp",function(t,e){if(!t||null==e)return i=!0;i||(y[a][n]=C(e),++r===m.length&&P())},"arraybuffer")}),r===m.length&&P()}function P(){T.type===b?n():I(o+S(b)+"_COMMON_BATTLE.cysp",function(t,e){if(!t||null===e)return v=!1;T={type:b,data:C(e)},n()},"arraybuffer")}function n(){let n=x.id;n-=n%100-1,E.id===n?i():I(o+n+"_BATTLE.cysp",function(t,e){if(!t||null===e)return v=!1;E={id:n,data:C(e)},i()},"arraybuffer")}function i(){I(o+x.id+".atlas",function(t,c){if(!t)return v=!1;I(o+x.id+".png",function(t,e){if(!t)return v=!1;let d=new Image;d.onload=function(){var t=!!p.skeleton;t&&(p.state.clearTracks(),p.state.clearListeners(),gl.deleteTexture(w.texture));let e=new spine.webgl.GLTexture(gl,d);URL.revokeObjectURL(d.src);var n=new spine.TextureAtlas(c,function(){return e}),n=(w=e,new spine.AtlasAttachmentLoader(n)),r=x.baseId,i=Object.values(y[r]);let a=0;var o=T.data.count,o=(a+=o,E.data.count);a+=o,i.forEach(function(t){a+=t.count});let s=A[r].byteLength-64+1+T.data.data.byteLength+E.data.data.byteLength,l=(i.forEach(function(t){s+=t.data.byteLength}),new Uint8Array(s)),h=0;l.set(new Uint8Array(A[r].slice(64)),0),h+=A[r].byteLength-64,l[h]=a,h++,l.set(new Uint8Array(T.data.data),h),h+=T.data.data.byteLength,l.set(new Uint8Array(E.data.data),h),h+=E.data.data.byteLength,i.forEach(function(t){l.set(new Uint8Array(t.data),h),h+=t.data.byteLength});o=new spine.SkeletonBinary(n).readSkeletonData(l.buffer),r=new spine.Skeleton(o),r.setSkinByName("default"),(i=r).setToSetupPose(),i.updateWorldTransform(),n=new spine.Vector2,o=new spine.Vector2,i.getBounds(n,o,[]),n.y=0,i={offset:n,size:o};animationStateData=new spine.AnimationStateData(r.data);let u=new spine.AnimationState(animationStateData);u.addListener({complete:function t(){if(M.length){var e=M.shift();if("stop"!==e){if("hold"===e)return setTimeout(t,1e3);(e=V(e))===S(b)+"_run"&&(g=1),u.setAnimation(0,e,!M.length)}}}}),p={skeleton:r,state:u,bounds:i,premultipliedAlpha:!0},v=!1,t||(canvas.style.width="99%",R&&R(),R=null,setTimeout(function(){canvas.style.width=""},0)),f=x.id},d.src=URL.createObjectURL(e)},"blob",function(t){})})}function V(t){let e;return e="000000"!==t.substr(0,6)&&"1"!==t.substr(0,1)?S(T.type)+"_"+t:t}let L=0;function t(t){var e,n;if(0===M.length)return n=V(n=(e=t.shift()).animName),p.state.setAnimation(0,n,e.isLoop).timeScale=e.timeScale,t.forEach(function(t){M.push(t.animName)}),1}return{init:function(){a=spine.webgl.Shader.newTwoColoredTextured(gl),s=new spine.webgl.PolygonBatcher(gl),l.ortho2d(0,0,canvas.width-1,canvas.height-1),h=new spine.webgl.SkeletonRenderer(gl),(u=new spine.webgl.SkeletonDebugRenderer(gl)).drawRegionAttachments=!0,u.drawBoundingBoxes=!0,u.drawMeshHull=!0,u.drawMeshTriangles=!0,u.drawPaths=!0,d=spine.webgl.Shader.newColored(gl),c=new spine.webgl.ShapeRenderer(gl)},load:function(t,e,n){if(R=n,!v&&(v=!0,f!==t||b!==classList.value)){b=e;let n=(x={id:0|t,baseId:"000000"}).baseId;A[n]?r():I(o+n+"_CHARA_BASE.cysp",function(t,e){if(!t||null===e)return v=!1;A[n]=e,r()},"arraybuffer")}},resize:function(t){var e=canvas.width/t*2,t=canvas.height/t*2;l.ortho2d(0-e/2,0-t/2,e,t)},render:function(t,e){p.skeleton.x=L,p.skeleton.y=-550;var n=p.state,r=p.skeleton,i=p.premultipliedAlpha;n.update(t),n.apply(r),t=r,(n=g)<0?t.flipX=!0:0<n&&(t.flipX=!1),r.updateWorldTransform(),a.bind(),a.setUniformi(spine.webgl.Shader.SAMPLER,0),a.setUniform4x4f(spine.webgl.Shader.MVP_MATRIX,l.values),s.begin(a),h.premultipliedAlpha=i,h.draw(s,r),s.end(),a.unbind(),e&&(d.bind(),d.setUniform4x4f(spine.webgl.Shader.MVP_MATRIX,l.values),u.premultipliedAlpha=i,c.begin(d),u.draw(c,r),c.end(),d.unbind())},setPosition:function(t){L=t},getPosition:function(){return L},setDearIdle:function(){p.state.setAnimation(0,S(b)+"_idle",!0),g=.5},setIdle:function(){p.state.setAnimation(0,S(b)+"_idle",!0)},run:function(t){g=!0===t?-1:1,p.state.setAnimation(0,S(b)+"_run",!0)},jump:function(){t([{animName:"000000_run_highJump",isLoop:!1,timeScale:.5},{animName:"run",isLoop:!0,timeScale:1}])},damage:function(){return!!t([{animName:"damage",isLoop:!1,timeScale:1},{animName:"run",isLoop:!0,timeScale:1}])&&!(g=0)},attackChar:function(){t([{animName:"attack_skipQuest",isLoop:!1,timeScale:1},{animName:"idle",isLoop:!(g=0),timeScale:1}])},getSpeed:function(){return g},die:function(){g=0,M.length=0,t([{animName:"die",isLoop:!1,timeScale:1},{animName:"stop",isLoop:!1,timeScale:1}])}}},TextureUtil={textureList:["0.png","1.png","2.png","3.png","4.png","5.png","6.png","7.png","8.png","obstacle.png","optionUI.png"],_glTexture:{},loadTexture:function(n){function r(){let t=gl.createTexture(),e=new Image;e.onload=function(){gl.bindTexture(gl.TEXTURE_2D,t),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,e),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR_MIPMAP_NEAREST),gl.generateMipmap(gl.TEXTURE_2D),gl.bindTexture(gl.TEXTURE_2D,null),a._glTexture[a.textureList[i]]={texture:t,width:this.width,height:this.height},++i<a.textureList.length?r(i):n()},e.onerror=function(t){console.log(t)},e.src="assets/img/"+a.textureList[i]}let i=0,a=this;r(i)},getTexture:function(t){return this._glTexture[t]}},SpriteShader=function(){let r={program:null,attribLocations:{},uniformLocations:{}},t={position:null,uv:null,indices:null},i={width:0,height:0};var e,n,a;return r=ShaderUtil.initShaders("textureShader").textureShader,e=[0,0,0,0,1,0,1,1,0,1,0,0],n=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,n),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(e),gl.STATIC_DRAW),e=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,e),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([1,1,1,0,0,0,0,1]),gl.STATIC_DRAW),a=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,a),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),gl.STATIC_DRAW),t.position=n,t.uv=e,t.indices=a,{bind:function(){gl.useProgram(r.program),gl.bindBuffer(gl.ARRAY_BUFFER,t.position),gl.vertexAttribPointer(r.attribLocations.aVertexPosition,3,gl.FLOAT,!1,0,0),gl.enableVertexAttribArray(r.attribLocations.aVertexPosition),r.attribLocations.hasOwnProperty("uv")&&(gl.bindBuffer(gl.ARRAY_BUFFER,t.uv),gl.vertexAttribPointer(r.attribLocations.uv,2,gl.FLOAT,!0,0,0),gl.enableVertexAttribArray(r.attribLocations.uv)),gl.uniformMatrix4fv(r.uniformLocations.uVPMatrix,!1,[2,0,0,0,0,2,0,0,0,0,1,0,0,0,0,1]),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,t.indices),gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA)},setAttr:function(t,e){void 0===e&&(e=[1,1]);var n=i.width/ScreenSize[0]*e[0],e=i.height/ScreenSize[1]*e[1];gl.uniformMatrix4fv(r.uniformLocations.uWorldMatrix,!1,[n,0,0,0,0,e,0,0,0,0,1,0,t[0]/ScreenSize[0],t[1]/ScreenSize[1],0,1])},unbind:function(){},setTexture:function(t){t=TextureUtil.getTexture(t),i.width=t.width,i.height=t.height,gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,t.texture),gl.uniform1i(r.uniformLocations.texture,0)},draw:function(){gl.drawElements(gl.TRIANGLES,6,gl.UNSIGNED_SHORT,0)},getTextureSize:function(){return i}}}();
//# sourceMappingURL=render.min.js.map